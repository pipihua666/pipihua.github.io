<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.01877a06b072953c14c7.css" id="gatsby-global-css">code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#8292a2}.token.punctuation{color:#f8f8f2}.token.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.32.12"/><title data-react-helmet="true">Linux-文本操作 - pipihua&#x27;s blog</title><meta data-react-helmet="true" name="description" content="linux-文本操作，个人记录学习"/><meta data-react-helmet="true" property="og:title" content="Linux-文本操作 - pipihua&#x27;s blog"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:description" content="linux-文本操作，个人记录学习"/><meta data-react-helmet="true" property="og:url" content="https://pipihua666.github.io/linux-text"/><meta data-react-helmet="true" name="twitter:label1" content="Written by"/><meta data-react-helmet="true" name="twitter:data1" content="pipihua"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="pipihua"/><meta data-react-helmet="true" name="twitter:title" content="Linux-文本操作 - pipihua&#x27;s blog"/><meta data-react-helmet="true" name="twitter:description" content="linux-文本操作，个人记录学习"/><meta data-react-helmet="true" name="keywords" content="React, JavaScript, TypeScript, Echarts, DevOps, Linux"/><meta data-react-helmet="true" name="article:published_time" content="2021-04-11T00:00:00.000Z"/><meta data-react-helmet="true" name="article:modified_time" content="2021-04-11T00:00:00.000Z"/><meta data-react-helmet="true" name="twitter:label2" content="Filed under"/><meta data-react-helmet="true" name="twitter:data2" content="Linux"/><meta data-react-helmet="true" property="og:image" content="https://pipihua666.github.io/static/fd86a57a19d26f621fabca2e9cc0b4cc/90823/header.png"/><meta data-react-helmet="true" name="twitter:image" content="https://pipihua666.github.io/static/fd86a57a19d26f621fabca2e9cc0b4cc/90823/header.png"/><script data-react-helmet="true" type="application/ld+json">
        {
          "@context": "https://schema.org/",
          "@type": "Article",
          "author": {
            "@type": "Person",
            "name": "pipihua"
          },
          "keywords": "Linux",
          "headline": "Linux-文本操作 - pipihua's blog",
          "url": "https://pipihua666.github.io/linux-text",
          "datePublished": "2021-04-11T00:00:00.000Z",
          "dateModified": "2021-04-11T00:00:00.000Z",
          "image": {
            "@type": "ImageObject",
            "url": "https://pipihua666.github.io/static/fd86a57a19d26f621fabca2e9cc0b4cc/90823/header.png",
            "width": "1000",
            "height": "520"
          },
          "publisher": {
            "@type": "Organization",
            "name": "pipihua's blog"
          },
          "description": "linux-文本操作，个人记录学习",
          "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://pipihua666.github.io"
          }
        }
      </script><style data-styled="bzOPpS kHKWRw fOuWxu biTeGs jLOYBk fVqyTA cROOCp gWrDHi MQpwo llwmof fYiJFa iRZLqu jZNSfz kfkDB faXnX lhFcmu hNWued Zkydf bXjWFc leeAUT jtkVLk jqyLKa cCerLd cprjfl jqxPBx bYZhdV iKTLAq gTfYTh iHGPyz kXzLbm lfACiL lbetsi OjwYO gpDhwt ctpkkx cXOFUh bqPxdl" data-styled-version="4.4.1">
/* sc-component-id: sc-global-705724203 */
html{line-height:1.15;-webkit-text-size-adjust:100%;} body{margin:0;} main{display:block;} h1{font-size:2em;margin:0.67em 0;} hr{box-sizing:content-box;height:0;overflow:visible;} pre{font-family:monospace,monospace;font-size:1em;} a{background-color:transparent;} abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;} b,strong{font-weight:bolder;} code,kbd,samp{font-family:monospace,monospace;font-size:1em;} small{font-size:80%;} sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;} sub{bottom:-0.25em;} sup{top:-0.5em;} img{border-style:none;} button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0;} button,input{overflow:visible;} button,select{text-transform:none;} button,[type="button"],[type="reset"],[type="submit"]{-webkit-appearance:button;} button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;} button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText;} fieldset{padding:0.35em 0.75em 0.625em;} legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;} progress{vertical-align:baseline;} textarea{overflow:auto;} [type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;} [type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto;} [type="search"]{-webkit-appearance:textfield;outline-offset:-2px;} [type="search"]::-webkit-search-decoration{-webkit-appearance:none;} ::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;} details{display:block;} summary{display:list-item;} template{display:none;} [hidden]{display:none;} html{box-sizing:border-box;background-color:#fafafa;} body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;line-height:1.9em;} *{box-sizing:border-box;} h1,h2,h3,h4,h5,h6{outline:none;} a{color:#000;-webkit-text-decoration:none;text-decoration:none;} .gatsby-highlight{max-width:100% !important;} .gatsby-highlight-code-line{background-color:#353631;display:block;margin-right:-1em;margin-left:-1em;padding-right:1em;padding-left:0.75em;}
/* sc-component-id: style__NavContainer-sc-1ck1w82-0 */
.bzOPpS{z-index:1000;background-color:#20232a;position:-webkit-sticky;position:sticky;top:0;box-shadow:0 0 3px rgba(0,0,0,.03),0 3px 46px rgba(0,0,0,.07);}
/* sc-component-id: style__Nav-sc-1ck1w82-1 */
.kHKWRw{width:1260px;margin-left:auto;margin-right:auto;max-width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;} @media (max-width:1300px){.kHKWRw{padding:0 20px;}}
/* sc-component-id: style__NavWrapper-sc-1ck1w82-2 */
.jLOYBk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:100%;height:70px;white-space:nowrap;} @media (max-width:576px){.jLOYBk{width:90%;}}
/* sc-component-id: style__NavMenu-sc-1ck1w82-3 */
.fVqyTA{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;list-style-type:none;margin:0;padding:0;} @media (max-width:576px){.fVqyTA{width:80%;overflow-x:auto;overflow-y:hidden;-webkit-mask-image:linear-gradient(to right,transparent,#000 25px,#000 90%,transparent);mask-image:linear-gradient(to right,transparent,#000 25px,#000 90%,transparent);}}.cROOCp{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;list-style-type:none;margin:0;padding:0;}
/* sc-component-id: style__NavMenuItem-sc-1ck1w82-4 */
.gWrDHi{cursor:pointer;display:inline-block;border:0;background:transparent;outline:none;-webkit-text-decoration:none;text-decoration:none;}
/* sc-component-id: style__NavLink-sc-1ck1w82-5 */
.MQpwo{color:#fff;opacity:.8;padding:16px;-webkit-transition:opacity .5s;transition:opacity .5s;} .MQpwo:hover{opacity:1;}
/* sc-component-id: style__SearchContainer-sc-1ck1w82-6 */
.llwmof{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;position:relative;}
/* sc-component-id: style__ToggleSearchButton-sc-1ck1w82-7 */
.fYiJFa{cursor:pointer;color:#fff;opacity:.8;background:none;outline:none;border:0;-webkit-transition:opacity .5s;transition:opacity .5s;} .fYiJFa:hover{opacity:1;}
/* sc-component-id: logo__LogoImage-sc-1eqkae8-0 */
.biTeGs{max-height:30px;width:30px;margin-right:45px;} @media (max-width:576px){.biTeGs{margin-right:15px;}}
/* sc-component-id: logo__HomeLink-sc-1eqkae8-1 */
.fOuWxu{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;height:30px;}
/* sc-component-id: style__StyledFooter-sc-1oqvjzu-0 */
.gpDhwt{max-width:100%;padding:10px 0;z-index:700;position:relative;font-size:.9em;margin-top:50px;}
/* sc-component-id: style__FooterContainer-sc-1oqvjzu-1 */
.ctpkkx{width:1260px;margin-left:auto;margin-right:auto;max-width:100%;text-align:right;line-height:1.1em;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;} @media (max-width:1300px){.ctpkkx{padding:0 20px;}}
/* sc-component-id: style__Copyright-sc-1oqvjzu-2 */
.cXOFUh{margin:0;}
/* sc-component-id: style__DesignBy-sc-1oqvjzu-3 */
.bqPxdl{margin:0;opacity:.8;font-size:.8em;} .bqPxdl a{font-weight:bold;-webkit-text-decoration:none;text-decoration:none;color:#000;} .bqPxdl a:hover{-webkit-text-decoration:underline;text-decoration:underline;}
/* sc-component-id: toc__StyledNav-sc-1hwup8p-0 */
.lhFcmu .toc-list{list-style-type:none;margin:0;padding:0;} .lhFcmu .toc-list .toc-list{padding-left:17px;padding-top:10px;} .lhFcmu .toc-list-item{line-height:1.2em;padding-bottom:10px;} .lhFcmu .toc-list-item:last-child{padding-bottom:0;} .lhFcmu .toc-link{color:#808080;-webkit-text-decoration:none;text-decoration:none;} .lhFcmu .is-active-link{color:#404040;font-weight:700;}
/* sc-component-id: reading-progress__ReadingProgressBar-vxjjnv-0 */
.iRZLqu{position:-webkit-sticky;position:sticky;height:5px;top:70px;background-color:#a4cbb8;z-index:500;}
/* sc-component-id: avatar__StyledAvatar-sc-1v6bq9n-0 */
.kXzLbm{max-width:55px;border-radius:100%;}
/* sc-component-id: bio__StyledBio-sc-19adui4-0 */
.iHGPyz{margin:auto;text-align:center;width:100%;}
/* sc-component-id: bio__AuthorDescription-sc-19adui4-1 */
.lbetsi{margin:10px 0 13px;} .lbetsi a{color:#000;-webkit-text-decoration:underline;text-decoration:underline;}
/* sc-component-id: bio__AuthorName-sc-19adui4-2 */
.lfACiL{margin:10px;}
/* sc-component-id: bio__FriendLink-sc-19adui4-3 */
.OjwYO{-webkit-text-decoration:underline;text-decoration:underline;margin-left:5px;}
/* sc-component-id: post__PostContainer-h8gzap-0 */
.jZNSfz{width:1260px;margin-left:auto;margin-right:auto;max-width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:0 !important;} @media (max-width:1300px){.jZNSfz{padding:0 20px;}}
/* sc-component-id: post__LeftSidebar-h8gzap-1 */
.kfkDB{min-width:255px;max-width:225px;-webkit-transition:opacity 0.5s,z-index 0.5s;transition:opacity 0.5s,z-index 0.5s;} @media (max-width:1300px){.kfkDB{position:fixed;opacity:0;z-index:-1;background-color:#fff;width:100% !important;max-width:100%;padding:0 20px;margin-top:-5px;height:calc(100vh - 70px);}}
/* sc-component-id: post__PostContent-h8gzap-2 */
.Zkydf{margin-top:-5px;border-right:1px #e5eff5 solid;border-left:1px #e5eff5 solid;background-color:#fff;box-shadow:0 0 3px rgba(0,0,0,0.03),0 3px 46px rgba(0,0,0,0.1);z-index:10;width:1035px;max-width:100%;} .Zkydf li > a,.Zkydf p > a{color:#a4cbb8;border-bottom:2px #a4cbb8 solid;} .Zkydf pre{margin:30px 0;} .Zkydf blockquote{border-left:4px #a4cbb8 solid;background-color:#fafafa;margin:30px 0;padding:5px 20px;border-radius:0.3em;} .Zkydf h3::before,.Zkydf h4::before,.Zkydf h5::before,.Zkydf h6::before{display:block;content:" ";height:90px;margin-top:-90px;visibility:hidden;} .Zkydf h2{border-top:1px solid #ececec;margin-top:44px;padding-top:40px;line-height:1.2;} .Zkydf code[class*="language-text"]{padding:5px;} .Zkydf p > img{max-width:100%;border-radius:0.3em;margin:30px 0;} .Zkydf hr{border-top:1px solid #ececec;border-bottom:0;margin-top:44px;margin-bottom:40px;} .Zkydf .gatsby-resp-image-link{margin:30px 0;max-width:100%;} .Zkydf .gatsby-resp-image-link .gatsby-resp-image-image{border-radius:0.3em;}
/* sc-component-id: post__TocWrapper-h8gzap-3 */
.faXnX{position:-webkit-sticky;position:sticky;top:70px;padding:40px 30px 40px 0;}
/* sc-component-id: post__PostHeader-h8gzap-4 */
.bXjWFc{padding:40px;} @media (max-width:576px){.bXjWFc{padding:20px;}}
/* sc-component-id: post__FeaturedImage-h8gzap-5 */
.jqyLKa{border-radius:0;} @media (max-width:1300px){.jqyLKa{margin-left:-1px;margin-right:-1px;}}
/* sc-component-id: post__StyledPost-h8gzap-6 */
.cCerLd{padding:40px;} @media (max-width:576px){.cCerLd{padding:20px;}}
/* sc-component-id: post__PostMeta-h8gzap-7 */
.leeAUT{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;opacity:0.8;font-size:0.9em;}
/* sc-component-id: post__PostTitle-h8gzap-8 */
.jtkVLk{margin:0;padding:0;}
/* sc-component-id: post__PostFooter-h8gzap-9 */
.cprjfl{background-color:#fafafa;font-size:0.8em;color:#666;padding:40px;line-height:1em;} .cprjfl p{margin:5px 0;}
/* sc-component-id: post__FooterTagLink-h8gzap-10 */
.jqxPBx{color:#000 !important;-webkit-text-decoration:none;text-decoration:none;border-bottom:0 !important;}
/* sc-component-id: post__PostAddition-h8gzap-11 */
.bYZhdV{background-color:#fff;border-top:1px #e5eff5 solid;border-bottom:1px #e5eff5 solid;z-index:700;position:relative;padding:40px;}
/* sc-component-id: post__PostAdditionContent-h8gzap-12 */
.iKTLAq{width:1260px;margin-left:auto;margin-right:auto;max-width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;} @media (max-width:1300px){.iKTLAq{padding:0 20px;}}
/* sc-component-id: post__BioWrapper-h8gzap-13 */
.gTfYTh{width:50%;margin:auto;} @media (max-width:576px){.gTfYTh{width:100%;}}
/* sc-component-id: post__ToggleTocButton-h8gzap-14 */
.hNWued{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:fixed;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;right:20px;bottom:20px;border-radius:100%;box-shadow:0 0 3px rgba(0,0,0,0.03),0 3px 46px rgba(0,0,0,0.1);border:0;z-index:5000;width:50px;height:50px;background-color:#20232a;color:#fff;outline:none;} @media (min-width:1300px){.hNWued{display:none;}}</style><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="icon" href="/favicon-32x32.png?v=72e8008a1ad86357775e2878c278a5b7" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#a4cbb8"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=72e8008a1ad86357775e2878c278a5b7"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=72e8008a1ad86357775e2878c278a5b7"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=72e8008a1ad86357775e2878c278a5b7"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=72e8008a1ad86357775e2878c278a5b7"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=72e8008a1ad86357775e2878c278a5b7"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=72e8008a1ad86357775e2878c278a5b7"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=72e8008a1ad86357775e2878c278a5b7"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=72e8008a1ad86357775e2878c278a5b7"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/rss.xml"/><link as="script" rel="preload" href="/webpack-runtime-31950b19dd1a93d97ffb.js"/><link as="script" rel="preload" href="/framework-9fb4b3462a06af88db8a.js"/><link as="script" rel="preload" href="/app-c93d32e57524b68cb8e4.js"/><link as="script" rel="preload" href="/styles-7d4153d260c0197f0043.js"/><link as="script" rel="preload" href="/fa5f8105-689aa33d25e6e356ccaa.js"/><link as="script" rel="preload" href="/29265ece-88f1747c601614111197.js"/><link as="script" rel="preload" href="/commons-163e26c0e5bce56e925e.js"/><link as="script" rel="preload" href="/31e465ace986b06bdd05abbccc58f663d9057919-269ec04f495a252dea53.js"/><link as="script" rel="preload" href="/component---theme-src-templates-post-tsx-7eaf4d1f6f6f59b194f3.js"/><link as="fetch" rel="preload" href="/page-data/linux-text/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1116962356.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2275848304.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3097946992.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3138592700.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3462520645.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="style__NavContainer-sc-1ck1w82-0 bzOPpS"><div class="common__Container-sc-1d5kp8-0 style__Nav-sc-1ck1w82-1 kHKWRw"><a class="logo__HomeLink-sc-1eqkae8-1 fOuWxu" href="/"><div class="logo__LogoImage-sc-1eqkae8-0 biTeGs gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:30px;height:30px"><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAMEBQL/xAAWAQEBAQAAAAAAAAAAAAAAAAACAQP/2gAMAwEAAhADEAAAAeY5rjFYKVdEzeaKf//EABwQAAICAgMAAAAAAAAAAAAAAAEDAAIREjEzQf/aAAgBAQABBQJg0qu24mRaBa9ciU59b2//xAAWEQEBAQAAAAAAAAAAAAAAAAARABD/2gAIAQMBAT8BI3//xAAWEQEBAQAAAAAAAAAAAAAAAAARABD/2gAIAQIBAT8BZ3//xAAZEAADAAMAAAAAAAAAAAAAAAAAARECEDH/2gAIAQEABj8CvSyaj4xYraMj/8QAHRABAAICAgMAAAAAAAAAAAAAAQARIVExQWFx8P/aAAgBAQABPyG2OBqedFQ4gW7ZAWImBlbS5IcnuH36jqjc/9oADAMBAAIAAwAAABCvB4P/xAAZEQEAAgMAAAAAAAAAAAAAAAABADEQESH/2gAIAQMBAT8Q0TmBUbn/xAAXEQEAAwAAAAAAAAAAAAAAAAARABAh/9oACAECAQE/EG7Bf//EABwQAQADAAIDAAAAAAAAAAAAAAEAESEQYTFB0f/aAAgBAQABPxAqOffZYytIw4Bb3AVSEpAyy33sWjiIncLHitjrt+op/Dc//9k=" alt="pipihua&#x27;s blog" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/72e8008a1ad86357775e2878c278a5b7/58a4b/profile-pic.jpg 1x,
/static/72e8008a1ad86357775e2878c278a5b7/f8771/profile-pic.jpg 1.5x,
/static/72e8008a1ad86357775e2878c278a5b7/56ed0/profile-pic.jpg 2x" /><img loading="lazy" width="30" height="30" srcset="/static/72e8008a1ad86357775e2878c278a5b7/58a4b/profile-pic.jpg 1x,
/static/72e8008a1ad86357775e2878c278a5b7/f8771/profile-pic.jpg 1.5x,
/static/72e8008a1ad86357775e2878c278a5b7/56ed0/profile-pic.jpg 2x" src="/static/72e8008a1ad86357775e2878c278a5b7/58a4b/profile-pic.jpg" alt="pipihua's blog" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></a><div class="style__NavWrapper-sc-1ck1w82-2 jLOYBk"><ul class="style__NavMenu-sc-1ck1w82-3 fVqyTA"><li class="style__NavMenuItem-sc-1ck1w82-4 gWrDHi"><a class="style__NavLink-sc-1ck1w82-5 MQpwo" href="/">Home</a></li></ul><div class="style__SearchContainer-sc-1ck1w82-6 llwmof"><ul class="style__NavMenu-sc-1ck1w82-3 cROOCp"><li class="style__NavMenuItem-sc-1ck1w82-4 gWrDHi"><button role="button" aria-label="Toggle search" class="style__ToggleSearchButton-sc-1ck1w82-7 fYiJFa"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg></button></li></ul></div></div></div></div><main><div style="width:0%" class="reading-progress__ReadingProgressBar-vxjjnv-0 iRZLqu"></div><div class="common__Container-sc-1d5kp8-0 post__PostContainer-h8gzap-0 jZNSfz"><div class="post__LeftSidebar-h8gzap-1 kfkDB"><div class="post__TocWrapper-h8gzap-3 faXnX"><nav class="toc__StyledNav-sc-1hwup8p-0 lhFcmu toc"></nav></div></div><button role="button" aria-label="Toggle table of contents" class="post__ToggleTocButton-h8gzap-14 hNWued"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M432 416H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-128H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-128H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-128H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"></path></svg></button><div class="post__PostContent-h8gzap-2 Zkydf"><article class="post"><header class="post__PostHeader-h8gzap-4 bXjWFc"><section class="post__PostMeta-h8gzap-7 leeAUT"><a href="/tag/linux">Linux</a><time dateTime="2021-04-11T00:00:00.000Z">11 April, 2021</time><span id="/linux-text" class="leancloud_visitors" data-flag-title="Linux-文本操作"><span role="img" aria-label="fire" style="margin-right:8px" class="anticon anticon-fire"><svg viewBox="64 64 896 896" focusable="false" data-icon="fire" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M834.1 469.2A347.49 347.49 0 00751.2 354l-29.1-26.7a8.09 8.09 0 00-13 3.3l-13 37.3c-8.1 23.4-23 47.3-44.1 70.8-1.4 1.5-3 1.9-4.1 2-1.1.1-2.8-.1-4.3-1.5-1.4-1.2-2.1-3-2-4.8 3.7-60.2-14.3-128.1-53.7-202C555.3 171 510 123.1 453.4 89.7l-41.3-24.3c-5.4-3.2-12.3 1-12 7.3l2.2 48c1.5 32.8-2.3 61.8-11.3 85.9-11 29.5-26.8 56.9-47 81.5a295.64 295.64 0 01-47.5 46.1 352.6 352.6 0 00-100.3 121.5A347.75 347.75 0 00160 610c0 47.2 9.3 92.9 27.7 136a349.4 349.4 0 0075.5 110.9c32.4 32 70 57.2 111.9 74.7C418.5 949.8 464.5 959 512 959s93.5-9.2 136.9-27.3A348.6 348.6 0 00760.8 857c32.4-32 57.8-69.4 75.5-110.9a344.2 344.2 0 0027.7-136c0-48.8-10-96.2-29.9-140.9zM713 808.5c-53.7 53.2-125 82.4-201 82.4s-147.3-29.2-201-82.4c-53.5-53.1-83-123.5-83-198.4 0-43.5 9.8-85.2 29.1-124 18.8-37.9 46.8-71.8 80.8-97.9a349.6 349.6 0 0058.6-56.8c25-30.5 44.6-64.5 58.2-101a240 240 0 0012.1-46.5c24.1 22.2 44.3 49 61.2 80.4 33.4 62.6 48.8 118.3 45.8 165.7a74.01 74.01 0 0024.4 59.8 73.36 73.36 0 0053.4 18.8c19.7-1 37.8-9.7 51-24.4 13.3-14.9 24.8-30.1 34.4-45.6 14 17.9 25.7 37.4 35 58.4 15.9 35.8 24 73.9 24 113.1 0 74.9-29.5 145.4-83 198.4z"></path></svg></span><i class="leancloud-visitors-count"></i></span></section><h1 class="post__PostTitle-h8gzap-8 jtkVLk">Linux-文本操作</h1></header><div class="post__FeaturedImage-h8gzap-5 jqyLKa gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:66.5%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC3ElEQVQoz01RaU8TURR905lpS4WwyFIgokYxEsWAVoGAURSIIEqCGAFBlFBUaKBQ1koZBMvSoQvQlk6HltJtCl1sS1voFokY/eQP8Rfw1SnVhJOT++479+S8l/dAUyfWxpe/ERLvxZbheef4kncaD8woQrPKgyQlyoMZRXAa948tegQY1TdhfD2oae2VPe3AQMcHGX9cN/LZKpa55lQ+qTokIyK4PionE1xN1Biuj6wQ4UVNEFN4Jxcdgk/Gd8KNV/wlMDC1MSndWVhz4jr/himitcQ2zVGdJUZYY7pEHyEsUbrXmsNq06HKEFzReDDcJsKIfpEcSJYJXGNXb3lIa1ClozRbLvNu2JLgIeWJewLf7c6I1Rl2fI3b3VGTI0RafOv6XanCMDWnAko1qTfZzJSbcvmLr12/V1F1GP3mDxzG40eUw7W0vBoIHHj9IYI0GrbNvv3Qnttrse/pyO0V+RowEBrKuu11UVYjiSIIl8tdwCR2IykRTzU11Av6esSi4eOgu7CAy7tdFvbu7TttHrvJuqXVKpeBdV3q1svD9k3FrAhm0EBYzJTyGyV1FeU70omfto3GmsqeFy05WRk5mRk+7eKBYdW3uexQYuT8KKAWBB7Z6JFOMtndDABgoilpqelrA22/VCM/8MHjpf4Y1t1VXQIgGEXgzeH2GD7k/fLRMdOrF7YDg+C5fbQ1ONMu76mDYQSGUTbr3NbbmmPRo/hg5W8hj1918VZRLgtF6Wis5U54rHl38ImRX6/qfADWX1Zvdz109tb6+bVXczMhCKJNQ7zcPx/zT4SsEzFcnJVQIIiRgiK2lhJfB0/9rFzWWCauLQU387PvXsi7f6mg/kphXloqOAWXg4pK2TuPEWEVzEQh+DQxk81sKMq6nM45z2Fnc9jpbBY4CyhhOz0nsWMAQF8VPjv/Xxn/BARmJIkm3jo5BvTKghlsBGIhybSkyGAhKBOhP5S2M2j+BU+JI3HgZJpGAAAAAElFTkSuQmCC" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/fd86a57a19d26f621fabca2e9cc0b4cc/dc47e/header.png 200w,
/static/fd86a57a19d26f621fabca2e9cc0b4cc/9f2d5/header.png 400w,
/static/fd86a57a19d26f621fabca2e9cc0b4cc/90823/header.png 800w,
/static/fd86a57a19d26f621fabca2e9cc0b4cc/77647/header.png 1200w,
/static/fd86a57a19d26f621fabca2e9cc0b4cc/f8d4f/header.png 1600w,
/static/fd86a57a19d26f621fabca2e9cc0b4cc/4ce6a/header.png 1920w" sizes="(max-width: 800px) 100vw, 800px" /><img loading="lazy" sizes="(max-width: 800px) 100vw, 800px" srcset="/static/fd86a57a19d26f621fabca2e9cc0b4cc/dc47e/header.png 200w,
/static/fd86a57a19d26f621fabca2e9cc0b4cc/9f2d5/header.png 400w,
/static/fd86a57a19d26f621fabca2e9cc0b4cc/90823/header.png 800w,
/static/fd86a57a19d26f621fabca2e9cc0b4cc/77647/header.png 1200w,
/static/fd86a57a19d26f621fabca2e9cc0b4cc/f8d4f/header.png 1600w,
/static/fd86a57a19d26f621fabca2e9cc0b4cc/4ce6a/header.png 1920w" src="/static/fd86a57a19d26f621fabca2e9cc0b4cc/90823/header.png" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><section class="post__StyledPost-h8gzap-6 cCerLd post"><h2 id="wc" style="position:relative;"><a href="#wc" aria-label="wc permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>wc</h2>
<blockquote>
<p>print newline, word, and byte counts for each file</p>
</blockquote>
<ul>
<li>wc -l [文件名] // 计算文件的行数</li>
<li>wc -c [文件名] // 计算文件字节数</li>
<li>wc -w [文件名] // 计算文件字符数</li>
</ul>
<h2 id="stat" style="position:relative;"><a href="#stat" aria-label="stat permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>stat</h2>
<blockquote>
<p>display file or file system status</p>
</blockquote>
<ul>
<li>LANG=c stat [filename] // 英文化查看文件的信息</li>
</ul>
<h2 id="grep" style="position:relative;"><a href="#grep" aria-label="grep permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>grep</h2>
<blockquote>
<p>print lines matching a pattern</p>
</blockquote>
<ul>
<li>grep [正则][文件名] 一行一行查找正则匹配的内容</li>
</ul>
<h2 id="find" style="position:relative;"><a href="#find" aria-label="find permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>find</h2>
<blockquote>
<p>search for files in a directory hierarchy</p>
</blockquote>
<ul>
<li>find *txt -exec rm -v {} ; // 查找文件并执行命令操作</li>
</ul>
<h2 id="time" style="position:relative;"><a href="#time" aria-label="time permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>time</h2>
<blockquote>
<p>计算指令的执行时间</p>
</blockquote>
<ul>
<li>time ls</li>
</ul>
<h2 id="cut" style="position:relative;"><a href="#cut" aria-label="cut permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>cut</h2>
<blockquote>
<p>remove sections from each line of files</p>
</blockquote>
<ul>
<li>cut -d " " -f 1 // 以空格分隔文本并显示第一个（相当于 split()[0]）</li>
</ul>
<p><a name="NrMVF"></a></p>
<h2 id="sed" style="position:relative;"><a href="#sed" aria-label="sed permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>sed</h2>
<blockquote>
<p>默认只替换每行的第一个</p>
</blockquote>
<p><a name="mmHID"></a></p>
<h3 id="sed-的工作模式" style="position:relative;"><a href="#sed-%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F" aria-label="sed 的工作模式 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>sed 的工作模式</h3>
<ul>
<li>将文件以行为单位读取到内存（模式空间）</li>
<li>使用 sed 的每个脚本对该行进行操作 sed "script" filename</li>
<li>处理完成后输出该行（默认输出）</li>
</ul>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token function">sed</span> <span class="token string">'a/lod/new/'</span> filename

<span class="token comment"># 如果要替换/，可以使用别的分隔符</span>
<span class="token function">sed</span> <span class="token string">'s!/!abc!'</span> filename

<span class="token comment"># 执行多个命令</span>
<span class="token function">sed</span> -e <span class="token string">'s/a/aa/'</span> -e <span class="token string">'s/aa/bb/'</span> afile
<span class="token function">sed</span> <span class="token string">'s/a/aa/;s/aa/bb/'</span> afile

<span class="token comment"># 将替换后的内容写入到原始文件</span>
<span class="token function">sed</span> -i <span class="token string">'s/a/aa/;s/aa/bb/'</span> afile

<span class="token comment"># 支持元字符</span>
<span class="token function">head</span> -5 /etc/passwd <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/s*bin//'</span>

<span class="token comment"># 支持回调，源文件内容：axyzb</span>
<span class="token comment"># 扩展元字符使用 -r 参数</span>
root@4ebe31ff7a18:/tmp<span class="token comment"># sed -r 's/(a.*b)/\1:\1/' cfile</span>
axyzb:axyzb</code></pre></div>
<p><a name="EUZxj"></a></p>
<h3 id="sed-替换指令加强版" style="position:relative;"><a href="#sed-%E6%9B%BF%E6%8D%A2%E6%8C%87%E4%BB%A4%E5%8A%A0%E5%BC%BA%E7%89%88" aria-label="sed 替换指令加强版 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>sed 替换指令加强版</h3>
<ul>
<li>
<p>标志位：</p>
<ul>
<li>s/old/new/ 标志位</li>
</ul>
</li>
</ul>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># 全局替换</span>
<span class="token function">sed</span> <span class="token string">"s/old/new/g"</span> afile

<span class="token comment"># 替换前两次</span>
<span class="token function">sed</span> <span class="token string">"s/old/new/2"</span> afile

<span class="token comment"># /p 打印模式空间的内容,匹配的行在下面再进行输出,应用：只输出替换成功的行, -n阻止默认输出</span>
<span class="token function">sed</span> -n <span class="token string">'s/root/123/p'</span>

<span class="token comment"># /w 将替换成功的行写入别的文件</span>
<span class="token function">sed</span> -n <span class="token string">'s/root/123/w a.txt'</span></code></pre></div>
<ul>
<li>
<p>寻址：默认对每行进行操作，增加寻址后对匹配的行进行操作</p>
<ul>
<li>/正则表达式/s/old/new/g</li>
<li>行号/s/old/new/g</li>
<li>可以使用两个寻址符号，也可以混合使用行号和正则地址</li>
</ul>
</li>
</ul>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># 从1-6行进行替换</span>
<span class="token function">head</span> -6 /etc/passwd <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'1,6s/games/!!!!!!!!/'</span>

<span class="token comment"># 匹配root行，进行替换</span>
<span class="token function">head</span> -6 /etc/passwd <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'/root/s/bash/!!!!!!!!/'</span>

<span class="token comment"># 多条命令</span>
<span class="token function">sed</span> /正则/<span class="token punctuation">{</span>s/old/new/<span class="token punctuation">;</span>s/old/new/<span class="token punctuation">}</span></code></pre></div>
<ul>
<li>脚本文件：文件里写正常的 sed 命令</li>
</ul>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token function">sed</span> -f sedscript filename // 加载脚本文件</code></pre></div>
<p><a name="sm3XA"></a></p>
<h3 id="sed-的其他常用命令" style="position:relative;"><a href="#sed-%E7%9A%84%E5%85%B6%E4%BB%96%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4" aria-label="sed 的其他常用命令 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>sed 的其他常用命令</h3>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># 删除行，删除操作会改变模式空间，就和管道的作用一样，后面的命令会以删除后的文件内容为准</span>
<span class="token function">sed</span> <span class="token string">'/ab/d'</span> bfile
<span class="token function">sed</span> <span class="token string">'/ab/d;='</span> bfile

<span class="token comment"># /i 在上一行插入</span>
<span class="token function">sed</span> <span class="token string">'/ab/i hello'</span> bfile

<span class="token comment"># /a 在下一行插入</span>
<span class="token function">sed</span> <span class="token string">'/ab/a hello'</span> bfile

<span class="token comment"># /c 替换行</span>
<span class="token function">sed</span> <span class="token string">'/ab/c hello'</span> bfile

<span class="token comment"># /r 合并两个文件</span>
<span class="token function">sed</span> <span class="token string">'/ab/r cfile'</span> bfile

<span class="token comment"># 打印行号 =</span>
<span class="token function">sed</span> <span class="token string">"="</span> bfile

<span class="token comment"># /n 操作匹配的下一行</span>

<span class="token comment"># 打印匹配行，这个替换中的p不同，通常和-n参数配合只打印匹配到的行</span>
<span class="token function">sed</span> -n <span class="token string">'/ab/p'</span> bfile

<span class="token comment"># 退出命令</span>
<span class="token function">sed</span> 10q filename <span class="token comment"># 不会把文件全部读入</span>
<span class="token function">sed</span> -n <span class="token number">1</span>,10p filename</code></pre></div>
<p><a name="UCTeJ"></a></p>
<h3 id="sed-多行模式" style="position:relative;"><a href="#sed-%E5%A4%9A%E8%A1%8C%E6%A8%A1%E5%BC%8F" aria-label="sed 多行模式 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>sed 多行模式</h3>
<ul>
<li>N：将下一行加入到模式空间中</li>
<li>D：删除模式空间中的第一个字符到第一个换行符</li>
<li>P：打印模式空间中第一个字符到第一个换行符</li>
</ul>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">root@4ebe31ff7a18:/tmp<span class="token comment"># cat dfile</span>
hel
lo
root@4ebe31ff7a18:/tmp<span class="token comment"># sed 'N;s/hel\nlo/!!!/' dfile</span>
<span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span>
root@4ebe31ff7a18:/tmp<span class="token comment"># sed 'N;s/hel.lo/!!!/' dfile</span>
<span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span>

<span class="token comment"># 多行操作</span>
root@4ebe31ff7a18:/tmp<span class="token comment"># cat b.txt</span>
hell
o <span class="token function">bash</span> hel
lo <span class="token function">bash</span>
<span class="token comment"># 两行连起来操作</span>
root@4ebe31ff7a18:/tmp<span class="token comment"># sed 'N;s/\n//;s/hello bash/hello sed\n/;P;D' b.txt</span>
hello <span class="token function">sed</span>
 hello <span class="token function">sed</span>
<span class="token comment"># 三行连起来操作</span>
<span class="token function">sed</span> <span class="token string">'N;N;s/<span class="token entity" title="\n">\n</span>//;s/hello bash/hello sed<span class="token entity" title="\n">\n</span>/;P;D'</span> b.txt</code></pre></div>
<p><a name="wYacy"></a></p>
<h2 id="awk" style="position:relative;"><a href="#awk" aria-label="awk permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>AWK</h2>
<p><a name="QYMuI"></a></p>
<h3 id="认识-awk" style="position:relative;"><a href="#%E8%AE%A4%E8%AF%86-awk" aria-label="认识 awk permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>认识 awk</h3>
<ul>
<li>awk 更像是脚本语言</li>
<li>awk 用于比较规范的文本处理，用于统计数量并输出指定字段</li>
<li>sed 将不规范的文本，处理为比较规范的文本</li>
</ul>
<p><a name="qDTRG"></a></p>
<h3 id="awk-的字段" style="position:relative;"><a href="#awk-%E7%9A%84%E5%AD%97%E6%AE%B5" aria-label="awk 的字段 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>AWK 的字段</h3>
<ul>
<li>每行称作 AWK 的记录</li>
<li>使用空格、制表符分隔开的单词成为字段</li>
<li>可以自己制定分隔的字段</li>
</ul>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># -F 指定分隔符</span>
<span class="token comment"># x++：打印行号</span>
<span class="token comment"># ^menu：匹配行</span>
<span class="token function">awk</span> -F <span class="token string">"''"</span> <span class="token string">'/^menu/{ print x++, <span class="token variable">$2</span> }'</span> /boot/grub2/grub.cfg</code></pre></div>
<p><a name="zDdaT"></a></p>
<h3 id="awk-表达式" style="position:relative;"><a href="#awk-%E8%A1%A8%E8%BE%BE%E5%BC%8F" aria-label="awk 表达式 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>AWK 表达式</h3>
<ul>
<li>
<p>系统变量</p>
<ul>
<li>FS 表示输入的内容用什么分隔，OFS 表示输出用什么符号分隔</li>
<li>RS 行分隔符</li>
<li>NR 打印行号，如果文件变化了 NR 是不会重新排号，FNR 则会重新排号</li>
<li>NF 字段的数量</li>
</ul>
</li>
</ul>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># 下面两行意义相同，BEGIN表示在输入内容之前的操作</span>
<span class="token function">head</span> -n <span class="token number">6</span> /etc/passwd <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'BEGIN{FS=":"}{print <span class="token variable">$1</span>}'</span>
<span class="token function">head</span> -n <span class="token number">6</span> /etc/passwd <span class="token operator">|</span> <span class="token function">awk</span> -F <span class="token string">':'</span> <span class="token string">'{print <span class="token variable">$1</span>}	'</span>

<span class="token comment"># 设置输出分隔符</span>
<span class="token function">head</span> -n <span class="token number">6</span> /etc/passwd <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'BEGIN{FS=":";OFS="-"}{print <span class="token variable">$1</span>,<span class="token variable">$2</span>}

# 改变内容行的分隔符，改为通过:来换行，<span class="token variable">$0</span>是输出一行
head -n 6 /etc/passwd | awk '</span>BEGIN<span class="token punctuation">{</span>RS<span class="token operator">=</span><span class="token string">":"</span><span class="token punctuation">}</span><span class="token punctuation">{</span>print <span class="token variable">$0</span><span class="token punctuation">}</span><span class="token string">'

# 打印行号
root@709230c0b366:~# awk '</span><span class="token punctuation">{</span>print NR, <span class="token variable">$0</span><span class="token punctuation">}</span><span class="token string">' /etc/hosts /etc/hosts
1 127.0.0.1    localhost
2 ::1    localhost ip6-localhost ip6-loopback
3 fe00::0    ip6-localnet
4 ff00::0    ip6-mcastprefix
5 ff02::1    ip6-allnodes
6 ff02::2    ip6-allrouters
7 172.17.0.4    709230c0b366
8 127.0.0.1    localhost
9 ::1    localhost ip6-localhost ip6-loopback
10 fe00::0    ip6-localnet
11 ff00::0    ip6-mcastprefix
12 ff02::1    ip6-allnodes
13 ff02::2    ip6-allrouters
14 172.17.0.4    709230c0b366
root@709230c0b366:~# awk '</span><span class="token punctuation">{</span>print FNR, <span class="token variable">$0</span><span class="token punctuation">}</span><span class="token string">' /etc/hosts /etc/hosts
1 127.0.0.1    localhost
2 ::1    localhost ip6-localhost ip6-loopback
3 fe00::0    ip6-localnet
4 ff00::0    ip6-mcastprefix
5 ff02::1    ip6-allnodes
6 ff02::2    ip6-allrouters
7 172.17.0.4    709230c0b366
1 127.0.0.1    localhost
2 ::1    localhost ip6-localhost ip6-loopback
3 fe00::0    ip6-localnet
4 ff00::0    ip6-mcastprefix
5 ff02::1    ip6-allnodes
6 ff02::2    ip6-allrouters
7 172.17.0.4    709230c0b366

# 打印有多少个字段
head -n 6 /etc/passwd | awk '</span>BEGIN<span class="token punctuation">{</span>FS<span class="token operator">=</span><span class="token string">":"</span><span class="token punctuation">}</span><span class="token punctuation">{</span>print NF<span class="token punctuation">}</span><span class="token string">'

# 打印最后一个字段的值
head -n 6 /etc/passwd | awk '</span>BEGIN<span class="token punctuation">{</span>FS<span class="token operator">=</span><span class="token string">":"</span><span class="token punctuation">}</span><span class="token punctuation">{</span>print <span class="token variable">$NF</span><span class="token punctuation">}</span>'</code></pre></div>
<p><a name="VHsAt"></a></p>
<h3 id="awk-的判断和循环" style="position:relative;"><a href="#awk-%E7%9A%84%E5%88%A4%E6%96%AD%E5%92%8C%E5%BE%AA%E7%8E%AF" aria-label="awk 的判断和循环 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>AWK 的判断和循环</h3>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">root@7dc8bb7d5702:/tmp<span class="token comment"># cat a.txt</span>
user1 <span class="token number">34</span> <span class="token number">54</span> <span class="token number">23</span> <span class="token number">12</span>
user2 <span class="token number">94</span> <span class="token number">34</span> <span class="token number">73</span> <span class="token number">22</span>
user3 <span class="token number">99</span> <span class="token number">45</span> <span class="token number">12</span> <span class="token number">49</span>
root@7dc8bb7d5702:/tmp<span class="token comment"># awk '{ if($2>80) {print $1,$2} }' a.txt</span>
user2 <span class="token number">94</span>
user3 <span class="token number">99</span>
root@7dc8bb7d5702:/tmp<span class="token comment"># awk '{ for(c=2;c&lt;=NF;c++) print $c }' a.txt</span>
<span class="token number">34</span>
<span class="token number">54</span>
<span class="token number">23</span>
<span class="token number">12</span>
<span class="token number">94</span>
<span class="token number">34</span>
<span class="token number">73</span>
<span class="token number">22</span>
<span class="token number">99</span>
<span class="token number">45</span>
<span class="token number">12</span>
<span class="token number">49</span>
root@7dc8bb7d5702:/tmp<span class="token comment"># awk '{ for(c=2;c&lt;=NF;c++) sum+=$c; print sum}' a.txt</span>
<span class="token number">123</span>
<span class="token number">346</span>
<span class="token number">551</span></code></pre></div>
<p><a name="2YGNz"></a></p>
<h3 id="awk-数组" style="position:relative;"><a href="#awk-%E6%95%B0%E7%BB%84" aria-label="awk 数组 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>AWK 数组</h3>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># END表示数据读入完毕</span>
root@7dc8bb7d5702:/tmp<span class="token comment"># awk '{ sum=0; for(c=2;c&lt;=NF;c++) sum+=$c; average[$1]=sum/(NF-1) }END{ for( user in average ) print user,average[user] }' a.txt</span>
user1 <span class="token number">30.75</span>
user2 <span class="token number">55.75</span>
user3 <span class="token number">51.25</span>
root@7dc8bb7d5702:/tmp<span class="token comment"># cat a.txt</span>
user1 <span class="token number">34</span> <span class="token number">54</span> <span class="token number">23</span> <span class="token number">12</span>
user2 <span class="token number">94</span> <span class="token number">34</span> <span class="token number">73</span> <span class="token number">22</span>
user3 <span class="token number">99</span> <span class="token number">45</span> <span class="token number">12</span> <span class="token number">49</span>
root@7dc8bb7d5702:/tmp<span class="token comment"># awk '{ sum=0; for(c=2;c&lt;=NF;c++) sum+=$c; average[$1]=sum/(NF-1) }END{ for( user in average ) print user,average[user] }' a.txt</span>
user1 <span class="token number">30.75</span>
user2 <span class="token number">55.75</span>
user3 <span class="token number">51.25</span>
root@7dc8bb7d5702:/tmp<span class="token comment"># awk '{ sum=0; for(c=2;c&lt;=NF;c++) sum+=$c; average[$1]=sum/(NF-1) }END{ for( user in average ) sum2+=average[user]; print sum2/NR }' a.txt</span>
<span class="token number">45.9167</span></code></pre></div>
<p><a name="53WWH"></a></p>
<h3 id="awk-数组的应用" style="position:relative;"><a href="#awk-%E6%95%B0%E7%BB%84%E7%9A%84%E5%BA%94%E7%94%A8" aria-label="awk 数组的应用 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>AWK 数组的应用</h3>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">root@7dc8bb7d5702:/tmp<span class="token comment"># cat a.txt</span>
user1 <span class="token number">34</span> <span class="token number">54</span> <span class="token number">23</span> <span class="token number">12</span>
user2 <span class="token number">94</span> <span class="token number">34</span> <span class="token number">73</span> <span class="token number">22</span>
user3 <span class="token number">99</span> <span class="token number">45</span> <span class="token number">12</span> <span class="token number">49</span>
root@7dc8bb7d5702:/tmp<span class="token comment"># cat result.awk</span>
<span class="token punctuation">{</span>
<span class="token function">sum</span> <span class="token operator">=</span> <span class="token number">0</span>
for<span class="token punctuation">(</span>c <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> c <span class="token operator">&lt;</span><span class="token operator">=</span> NF<span class="token punctuation">;</span> c++<span class="token punctuation">)</span>
    <span class="token function">sum</span> <span class="token operator">+=</span> <span class="token variable">$c</span>

average<span class="token punctuation">[</span><span class="token variable">$1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">sum</span> / <span class="token punctuation">(</span>NF - <span class="token number">1</span><span class="token punctuation">)</span>
print <span class="token variable">$1</span>, average<span class="token punctuation">[</span><span class="token variable">$1</span><span class="token punctuation">]</span>

<span class="token punctuation">}</span>
END<span class="token punctuation">{</span>
for<span class="token punctuation">(</span>user <span class="token keyword">in</span> average<span class="token punctuation">)</span>
    sum_all <span class="token operator">+=</span> average<span class="token punctuation">[</span>user<span class="token punctuation">]</span>

avg_all <span class="token operator">=</span> sum_all / NR

for<span class="token punctuation">(</span>user <span class="token keyword">in</span> average<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>average<span class="token punctuation">[</span>user<span class="token punctuation">]</span> <span class="token operator">></span> avg_all<span class="token punctuation">)</span>
        above++
    <span class="token keyword">else</span>
        below++

print <span class="token string">"above"</span>, above
print <span class="token string">"below"</span>, below

<span class="token punctuation">}</span>
root@7dc8bb7d5702:/tmp<span class="token comment"># awk -f result.awk a.txt</span>
user1 <span class="token number">30.75</span>
user2 <span class="token number">55.75</span>
user3 <span class="token number">51.25</span>
above <span class="token number">2</span>
below <span class="token number">1</span></code></pre></div>
<p><a name="CKQgY"></a></p>
<h3 id="awk-函数" style="position:relative;"><a href="#awk-%E5%87%BD%E6%95%B0" aria-label="awk 函数 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>AWK 函数</h3>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># 整数</span>
root@7dc8bb7d5702:/tmp<span class="token comment"># awk 'BEGIN{pi=3.114; print int(pi)}'</span>
<span class="token number">3</span>

<span class="token comment"># 随机数</span>
root@7dc8bb7d5702:/tmp<span class="token comment"># awk 'BEGIN{srand(); print rand()}'</span>
<span class="token number">0.739691</span>
root@7dc8bb7d5702:/tmp<span class="token comment"># awk 'BEGIN{srand(); print rand()}'</span>
<span class="token number">0.00276686</span>
root@7dc8bb7d5702:/tmp<span class="token comment"># awk 'BEGIN{srand(); print rand()}'</span>
<span class="token number">0.134305</span>

<span class="token comment"># 自定义函数</span>
root@7dc8bb7d5702:/tmp<span class="token comment"># awk 'function double(str) {return str str} BEGIN{print double("hello")}'</span>
hellohello</code></pre></div></section><footer class="post__PostFooter-h8gzap-9 cprjfl"><p>Published under <span><a class="post__FooterTagLink-h8gzap-10 jqxPBx" href="/tag/linux">Linux</a></span> on<!-- --> <time dateTime="2021-04-11T00:00:00.000Z">11 April, 2021</time>.</p></footer></article><div style="margin:15px" appId="SyVUmIdmEVx7k6yLT5RCWrFS-gzGzoHsz" appKey="51PiabiVM933usXeOB8Vr2Gk" path="/linux-text"></div></div></div><section class="post__PostAddition-h8gzap-11 bYZhdV"><div class="common__Container-sc-1d5kp8-0 post__PostAdditionContent-h8gzap-12 iKTLAq"><div class="post__BioWrapper-h8gzap-13 gTfYTh"><section class="bio__StyledBio-sc-19adui4-0 iHGPyz"><div class="avatar__StyledAvatar-sc-1v6bq9n-0 kXzLbm gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:55px;height:55px"><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAMEBQL/xAAWAQEBAQAAAAAAAAAAAAAAAAACAQP/2gAMAwEAAhADEAAAAeY5rjFYKVdEzeaKf//EABwQAAICAgMAAAAAAAAAAAAAAAEDAAIREjEzQf/aAAgBAQABBQJg0qu24mRaBa9ciU59b2//xAAWEQEBAQAAAAAAAAAAAAAAAAARABD/2gAIAQMBAT8BI3//xAAWEQEBAQAAAAAAAAAAAAAAAAARABD/2gAIAQIBAT8BZ3//xAAZEAADAAMAAAAAAAAAAAAAAAAAARECEDH/2gAIAQEABj8CvSyaj4xYraMj/8QAHRABAAICAgMAAAAAAAAAAAAAAQARIVExQWFx8P/aAAgBAQABPyG2OBqedFQ4gW7ZAWImBlbS5IcnuH36jqjc/9oADAMBAAIAAwAAABCvB4P/xAAZEQEAAgMAAAAAAAAAAAAAAAABADEQESH/2gAIAQMBAT8Q0TmBUbn/xAAXEQEAAwAAAAAAAAAAAAAAAAARABAh/9oACAECAQE/EG7Bf//EABwQAQADAAIDAAAAAAAAAAAAAAEAESEQYTFB0f/aAAgBAQABPxAqOffZYytIw4Bb3AVSEpAyy33sWjiIncLHitjrt+op/Dc//9k=" alt="pipihua" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/72e8008a1ad86357775e2878c278a5b7/36742/profile-pic.jpg 1x,
/static/72e8008a1ad86357775e2878c278a5b7/aa6d7/profile-pic.jpg 1.5x,
/static/72e8008a1ad86357775e2878c278a5b7/05b67/profile-pic.jpg 2x" /><img loading="lazy" width="55" height="55" srcset="/static/72e8008a1ad86357775e2878c278a5b7/36742/profile-pic.jpg 1x,
/static/72e8008a1ad86357775e2878c278a5b7/aa6d7/profile-pic.jpg 1.5x,
/static/72e8008a1ad86357775e2878c278a5b7/05b67/profile-pic.jpg 2x" src="/static/72e8008a1ad86357775e2878c278a5b7/36742/profile-pic.jpg" alt="pipihua" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><h3 class="bio__AuthorName-sc-19adui4-2 lfACiL">pipihua</h3><p class="bio__AuthorDescription-sc-19adui4-1 lbetsi">I'm <strong>pipihua</strong>, The best way to deal with anxiety is to get started right now.
        If you like what you see feel free to give a 
        <a href="https://github.com/pipihua666" rel="noopener" target="_blank">star on GitHub!</a></p><div>Friend:<a href="https://www.cnblogs.com/yahuian/" target="_blank" rel="noopener" class="bio__FriendLink-sc-19adui4-3 OjwYO">Golang-就学45分钟</a></div></section></div></div></section></main><footer class="style__StyledFooter-sc-1oqvjzu-0 gpDhwt"><div class="common__Container-sc-1d5kp8-0 style__FooterContainer-sc-1oqvjzu-1 ctpkkx"><div><p class="style__Copyright-sc-1oqvjzu-2 cXOFUh"><strong>pipihua&#x27;s blog</strong> © <!-- -->2021</p><p class="style__DesignBy-sc-1oqvjzu-3 bqPxdl">Theme by<!-- --> <a href="https://nehalist.io" target="_blank" rel="noopener">nehalist.io</a></p></div></div></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/linux-text";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-6384056a1448fcdc251d.js"],"app":["/app-c93d32e57524b68cb8e4.js"],"component---theme-src-pages-404-tsx":["/component---theme-src-pages-404-tsx-b986668cb626fbf90e83.js"],"component---theme-src-pages-archive-tsx":["/component---theme-src-pages-archive-tsx-467ecca720d67678032a.js"],"component---theme-src-pages-tags-tsx":["/component---theme-src-pages-tags-tsx-2455358143df0a368504.js"],"component---theme-src-templates-page-tsx":["/component---theme-src-templates-page-tsx-9b7c3d92ee9cd988b03f.js"],"component---theme-src-templates-post-tsx":["/component---theme-src-templates-post-tsx-7eaf4d1f6f6f59b194f3.js"],"component---theme-src-templates-posts-tsx":["/component---theme-src-templates-posts-tsx-13b5cb91187ba0eed2c6.js"],"component---theme-src-templates-tag-tsx":["/component---theme-src-templates-tag-tsx-91b2bf9c79bba892fd14.js"]};/*]]>*/</script><script src="/polyfill-6384056a1448fcdc251d.js" nomodule=""></script><script src="/component---theme-src-templates-post-tsx-7eaf4d1f6f6f59b194f3.js" async=""></script><script src="/31e465ace986b06bdd05abbccc58f663d9057919-269ec04f495a252dea53.js" async=""></script><script src="/commons-163e26c0e5bce56e925e.js" async=""></script><script src="/29265ece-88f1747c601614111197.js" async=""></script><script src="/fa5f8105-689aa33d25e6e356ccaa.js" async=""></script><script src="/styles-7d4153d260c0197f0043.js" async=""></script><script src="/app-c93d32e57524b68cb8e4.js" async=""></script><script src="/framework-9fb4b3462a06af88db8a.js" async=""></script><script src="/webpack-runtime-31950b19dd1a93d97ffb.js" async=""></script></body></html>