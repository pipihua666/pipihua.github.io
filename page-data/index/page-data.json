{"componentChunkName":"component---theme-src-templates-posts-tsx","path":"/","result":{"pageContext":{"posts":[{"id":"debde2f7-3ff2-58ee-8792-c84056613d22","headings":[{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":3},{"depth":3},{"depth":3},{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"k8s持久化存储实现前端oem需求","path":"/oem","tags":["Kubernetes"],"excerpt":"前端根据licence显示不同的背景图和文字信息.","created":"2021-02-21 15:00","createdPretty":"21 February, 2021","updated":"2021-04-11T00:00:00.000Z","updatedPretty":"21 February, 2021","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAADJElEQVQozwEZA+b8ALCNXufixuXhx+Xix+XiyePUqeHFiOLSqOTjyuXiyOXhxuXhxuXgxOXgxOXgwuXfweXfweXfweXduuPUqACjfU/j2bXk3sDk4MTk17HgwHzfu3LeuHDk2rbk3sDl38Ll4MTm4sfm4sXm4sXm4sPm4cHn4cDk27fWv48AjGEz1K5q48F74MB93bp21rJu4MB83bhv3Lhu28KN6ObL5Ny64M+h4M+i3caT2r+G2Lp+0rF2z6turYFIAJBlN9OrZcylYtawadGoYcKYWN68d9y2bdOsZL2aY9fEl9y+f9GmXc6jWdGmXcygWMWcV7uOTMGVUruQTwCUZjSzh0u3jlHbtWvMo164jk/euXHft2zTrGW3jE3Tq2PasWbOpFzQplzRqGDKn1nTrWfHnVnEl1TDllMAh1UsgFEsilsyq31EroJIqX5Fs41Vr4hQsohOpnpFsIZMtYtPrIFIsIVLsohNsYRKqXxGsINIsINItIhLAEoiI00jI1IoI1guJVctJVkxJl45LF42KlgvJ10zKVwzKVUtJl82KmM8LmY8K1UsJlkuJF00KVQsJlEqJQBZLSQ+HSI8GSFIISN4UDmddUqxi1mge1ZbNC1DGx9GHB9sRTajf1e1j1qme0lgNys9GSE7GCBRKSWNYj0AdD8lOBsiNRYgUisno3hFu45N2rJnyZ9aYzgtSyEiSyIif1Y8xplTx5pTyp5XcEMwUyUiQRshaT8tm29BAHpJKkMlJTAUIEUjJZ9+WNCsa9u4c8eiZV42LE0jIz4ZIF05MdOxct68etOydG1EM1kpIz0aIVY0LnVQOQCWXi9kPy4oDB5jPC7RsHTjwnzhv3reuXCMZUI/GB9DHSCTcU7p0Zbn0JfnzIyfdkpMICE5FR91TjakekcAXS8kRCAhOhkgWTIom3RFqoJLq4NMimI4WjQoQh4jQRwgf15BwKRvxKdzpINVYT0tQBwgQSAkWTMpgVcyAHVJMJlzSpVwSqF/VKGAVauKWqODV5d5Uph7V5t7Vpd5VJt9VrGRXbKRXp9/VY50VIJnTZF2VpF2V5R5WdJzgcS6sLzOAAAAAElFTkSuQmCC","aspectRatio":1.5625,"src":"/static/67770bd9ce3b813d3f9c5e3fbab1e18f/0853f/bridge.png","srcSet":"/static/67770bd9ce3b813d3f9c5e3fbab1e18f/14156/bridge.png 125w,\n/static/67770bd9ce3b813d3f9c5e3fbab1e18f/d6e47/bridge.png 250w,\n/static/67770bd9ce3b813d3f9c5e3fbab1e18f/0853f/bridge.png 500w,\n/static/67770bd9ce3b813d3f9c5e3fbab1e18f/ce627/bridge.png 750w,\n/static/67770bd9ce3b813d3f9c5e3fbab1e18f/9dbcf/bridge.png 1000w,\n/static/67770bd9ce3b813d3f9c5e3fbab1e18f/87046/bridge.png 1920w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<h2 id=\"技术栈\" style=\"position:relative;\"><a href=\"#%E6%8A%80%E6%9C%AF%E6%A0%88\" aria-label=\"技术栈 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>技术栈</h2>\n<ul>\n<li>react，docker，k8s</li>\n</ul>\n<h2 id=\"需求\" style=\"position:relative;\"><a href=\"#%E9%9C%80%E6%B1%82\" aria-label=\"需求 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>需求</h2>\n<ul>\n<li>前端实现界面的 licence 控制，根据 licence 显示不同的背景和文字信息，并且不用重新编译前端镜像，达到可以在宿主机上随时都可以定制的需求</li>\n</ul>\n<h2 id=\"需求分析\" style=\"position:relative;\"><a href=\"#%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90\" aria-label=\"需求分析 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>需求分析</h2>\n<ul>\n<li>创建一个 oem 文件夹，存放不同的 licence 的 index.json 和图片，前端通过 ajax 可以直接请求本地的文件（这里是 index.json） k8s 在宿主机上持久化本地存储的方式来进行需求开发再合适不过。）</li>\n</ul>\n<h2 id=\"目前官方支持的-3-种本地存储方案如下：\" style=\"position:relative;\"><a href=\"#%E7%9B%AE%E5%89%8D%E5%AE%98%E6%96%B9%E6%94%AF%E6%8C%81%E7%9A%84-3-%E7%A7%8D%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8%E6%96%B9%E6%A1%88%E5%A6%82%E4%B8%8B%EF%BC%9A\" aria-label=\"目前官方支持的 3 种本地存储方案如下： permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>目前官方支持的 3 种本地存储方案如下：</h2>\n<h3 id=\"emptydir\" style=\"position:relative;\"><a href=\"#emptydir\" aria-label=\"emptydir permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>emptyDir</h3>\n<ol>\n<li>pod 在节点上运行时初始化的空卷，pod 中的所有容器都可以访问到该卷。</li>\n<li>pod 从节点上删除时，该卷也会被删除(注意：容器奔溃不会导致 pod 从节点上删除，因此容器奔溃时 emptyDir 是安全的）。</li>\n</ol>\n<p>pod 示例：</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Pod\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>pod\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>app<span class=\"token punctuation\">-</span>image\n      <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>app\n      <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /cache   // pod中的emptyDir路径\n          <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> cache<span class=\"token punctuation\">-</span>volume\n  <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> cache<span class=\"token punctuation\">-</span>volume\n      <span class=\"token key atrule\">emptyDir</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"hostpath（适合我的需求）\" style=\"position:relative;\"><a href=\"#hostpath%EF%BC%88%E9%80%82%E5%90%88%E6%88%91%E7%9A%84%E9%9C%80%E6%B1%82%EF%BC%89\" aria-label=\"hostpath（适合我的需求） permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hostPath（适合我的需求）</h3>\n<ol>\n<li>pod 中的文件夹与宿主机上的文件夹相互映射，如果宿主机没有则到 pod 映射，如果 pod 没有则到宿主机映射，如果都没有则默认空文件夹</li>\n<li>宿主机上映射的文件夹的修改会自动同步到 pod 中。</li>\n<li>pod 即使从节点上被删除了（比如：pod 重启），该卷还是会持久化在宿主机上。</li>\n</ol>\n<p>pod 示例：</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Pod\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>pod\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>app<span class=\"token punctuation\">-</span>image\n      <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>app<span class=\"token punctuation\">-</span>image\n      <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /opt/nginx/oem  // pod路径\n          <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> oem   // 映射宿主机的volume名称\n  <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> oem\n      <span class=\"token key atrule\">hostPath</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /data/oem    // 宿主机路径</code></pre></div>\n<p>但是还有一点问题，就是 pod 每次重启了，会重新创建 pod 中的 oem 文件夹，这里就是/opt/nginx/oem,那么宿主机上的文件夹/data/oem 也会随着 pod 的重启而替换，所以这需要在 pod 重启的容器中添加一个 command 指令<br /></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>app<span class=\"token punctuation\">-</span>image\n      <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>app<span class=\"token punctuation\">-</span>image\n      <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">[</span>\n          <span class=\"token string\">\"sh\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">\"-c\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">\"cp -r -n /opt/assets/public/oem /opt/nginx/ &amp;&amp; nginx -g 'daemon off;'\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span>\n      <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /opt/nginx/oem\n          <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> oem</code></pre></div>\n<ol>\n<li>/opt/assets/public/oem 是容器中的模版文件夹</li>\n<li><code class=\"language-text\">cp -r -n</code> 如果 pod 中存在/opt/nginx/oem 就不复制（保证每次重启 pod 都是用的宿主机上的 oem 文件夹），也就是初始化 pod 的时候会创建该文件夹</li>\n<li>镜像的 cp 命令升级：\n<code class=\"language-text\">RUN sed -i &#39;s/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g&#39; /etc/apk/repositories \\ &amp;&amp; apk add --no-cache coreutils</code>\n（如果 nginx:1.17-alpine 的版本太老，没办法 cp -n）</li>\n<li>至此，需求完成。</li>\n</ol>\n<h3 id=\"local-persistent-volume\" style=\"position:relative;\"><a href=\"#local-persistent-volume\" aria-label=\"local persistent volume permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Local Persistent Volume</h3>\n<p>指的就是利用机器上的磁盘来存放业务需要持久化的数据，和远端存储类似，此时数据依然独立于 Pod 的生命周期，即使业务 Pod 被删除，数据也不会丢失。</p>\n<h2 id=\"local-persistent-volume-和-hostpath-的区别\" style=\"position:relative;\"><a href=\"#local-persistent-volume-%E5%92%8C-hostpath-%E7%9A%84%E5%8C%BA%E5%88%AB\" aria-label=\"local persistent volume 和 hostpath 的区别 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Local Persistent Volume 和 hostPath 的区别</h2>\n<ol>\n<li>HostPath:调度程序可能会将引用 HostPath 卷的 pod 移至其他节点，从而导致数据丢失。</li>\n<li>Local Persistent: 调度程序可确保始终将使用本地持久卷的容器调度到同一节点。</li>\n</ol>\n<h2 id=\"图形化\" style=\"position:relative;\"><a href=\"#%E5%9B%BE%E5%BD%A2%E5%8C%96\" aria-label=\"图形化 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>图形化</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 638px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a8a1e63f4096f24083f3fc17f70493a2/41be6/volumes.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/klEQVQoz5WP/2sScRjH75+q/RDUMogIahT0YzHcFlswTBexqXO2iL79sB9i6c473SJkUJHBtDvNb0vnSueZuDZZ3cfpfU5y80tN0DvvvD4mGxP2Sw8vHt4PPC8eHqz/Lvg/NOCsbveSPn9uooCptOCCDqh04LwWdDMKXVQn0a9hB8wFh29fPcdjp0bZK1PghhlcnmSvm8BVA0B9wACuGdm+O+zpsR76xli0f0a7O/qieFHPYSYSmh1wdgnOLkKTnZuxd8IMWUDdSMApnJsmod7GGXDORPIoTBOckeQncV5P8FhbFmWpQ1sSa/XG2/XsPM3Me76+pBlXfCeT37P6GAuVsNIbFi+TZIuKIrVlAVmKLGKCKB5RPmg8eBcfIcL3nOtDePjxh2RoszBoDWhfxxC3LH4PwyptuSkI3X1MPFaVg+YjV2LYFtK8igzbgs9XmMgWHMID40ufEeqFgDeVQ/I/t1M9cq3efPg+cdu+en85NkKuPu3InBoP6pyxCWdscCFApcAJMpqklgjL9eXgFuH5tkilbe7Um/B2NM3h7pSDSiOsK0w0w8mSdOgeyg1BVJTWXLL0bK0UzZZd8XwkW7Fu7N+k4dqPP26Gp9NF73btyZdfR2d7LiuSmCnVP7LVUK7qBxXfzz3qe969mf+0UwrkqkFQ8edqMfi7dezNv2/b5msmRtbiAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"volumes\"\n        title=\"volumes\"\n        src=\"/static/a8a1e63f4096f24083f3fc17f70493a2/41be6/volumes.png\"\n        srcset=\"/static/a8a1e63f4096f24083f3fc17f70493a2/5a46d/volumes.png 300w,\n/static/a8a1e63f4096f24083f3fc17f70493a2/0a47e/volumes.png 600w,\n/static/a8a1e63f4096f24083f3fc17f70493a2/41be6/volumes.png 638w\"\n        sizes=\"(max-width: 638px) 100vw, 638px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"参考\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83\" aria-label=\"参考 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://segmentfault.com/a/1190000022860937\">Kubernetes 本地持久化方案</a></li>\n</ul>"},{"id":"c3fba612-e509-54bb-97b9-7c74d85de859","headings":[{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":2},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3}],"frontmatter":{"title":"Linux-基础命令","path":"/linux-basic","tags":["Linux"],"excerpt":"linux-基础命令，个人记录学习","created":"2021-02-21 15:00","createdPretty":"21 February, 2021","updated":"2021-04-11T00:00:00.000Z","updatedPretty":"21 February, 2021","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC4UlEQVQozx3La2/SUAAG4H7xN/h3/AF+0S/+AGfizBY1TtQNxmVe4iU6nSiDMgb0cgoU2h7ac2gPdKPAGHSyjbFxm24zRs28LDNGjR+0mjx58+ZNXgrKlw18Y4m4y6Xpcsn7j+krmwFracZa8lWtYGX5nmU6o9/Zl0s+s+g1S15ieDFyU5p6gxQ8JeItOgwfMfwOg/gMEtDJM6tm1urEbpWba7JuBFDB59Cw16GiaUqCrjya+s8NkUdB0zL2Q30OGRnTsuzWoG4Ptja3Dt5/e3/4NV98xkhuHvoBDAA4QyVzLg5OctDNKR5WmWYVf0K5I0C2aLbqq11NM5Zjp3eFk0f1c58/7H4+/mE2cCj1KJqbi0kvqGjqJp2epFNT0YyHznjpjCcqzmJiv9n7dPjp++wjj+sUVZg48S5Eva2cP/z65+ev33ElHM48TShhSoAuAK+z8jVGnmBkV1J2xeVboh6sNqu9/sfW+k7wcSB2+8xy8rRd4Trb+1+OjjvDzUXpCQODlIyvyvplqTAu4rEUGhfUcaBdYmQPK0Z0K10glc72wXZvb6M9tF/11ta7ne7+1nA9od5fkO5SWTwikxGJjOSMC6J+MYVHARoV0HUBX2Fys1CpxrI0K8X6O+863T29KlirtWZ7lZZ8UecclUZYbZTHYwBdA2iS13ysOsOpM0B7kFbTqpEfmzvLyIlytd1Y7yFLScg0QOm4wsYVgbrPPX0uBuflcFRZjCncopKJQymZh2xe5TWNgXnX/BiHsKjXcqQuYEvAVV6rALQCsE09AaVQrhyBlYV8PanaHGpxaAPgNo8204VuHDamFvzZYlckA5H0RTIUya4jW3yTJXtUOLORyO+wWp/T+jwa8GjIa/9wag+g15Hsipu+IxYOeG3Aq31e7bGwy8IdJxNSm3pIm3PJWoi3w8JaGDTnQTPEN16y9efJ6kum8TCWmwjeXMxsREAtItQjQs0pNFgJc5UXcfMvw0IRJ2WhivgAAAAASUVORK5CYII=","aspectRatio":1.5060240963855422,"src":"/static/203778e71300e5b2843da99252e9a12a/0853f/header.png","srcSet":"/static/203778e71300e5b2843da99252e9a12a/14156/header.png 125w,\n/static/203778e71300e5b2843da99252e9a12a/d6e47/header.png 250w,\n/static/203778e71300e5b2843da99252e9a12a/0853f/header.png 500w,\n/static/203778e71300e5b2843da99252e9a12a/ce627/header.png 750w,\n/static/203778e71300e5b2843da99252e9a12a/9dbcf/header.png 1000w,\n/static/203778e71300e5b2843da99252e9a12a/87046/header.png 1920w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<h2 id=\"创建多个嵌套目录\" style=\"position:relative;\"><a href=\"#%E5%88%9B%E5%BB%BA%E5%A4%9A%E4%B8%AA%E5%B5%8C%E5%A5%97%E7%9B%AE%E5%BD%95\" aria-label=\"创建多个嵌套目录 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>创建多个嵌套目录</h2>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">mkdir</span> -p a/b/c</code></pre></div>\n<h2 id=\"查看嵌套目录\" style=\"position:relative;\"><a href=\"#%E6%9F%A5%E7%9C%8B%E5%B5%8C%E5%A5%97%E7%9B%AE%E5%BD%95\" aria-label=\"查看嵌套目录 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>查看嵌套目录</h2>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"> <span class=\"token function\">ls</span> -R ./</code></pre></div>\n<h2 id=\"显示文件大小，单位-bkmg\" style=\"position:relative;\"><a href=\"#%E6%98%BE%E7%A4%BA%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F%EF%BC%8C%E5%8D%95%E4%BD%8D-bkmg\" aria-label=\"显示文件大小，单位 bkmg permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>显示文件大小，单位 B,K,M,G</h2>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"> <span class=\"token function\">ls</span> -h</code></pre></div>\n<h2 id=\"复制文件保留元信息（复制文件默认会修改文件的元信息\" style=\"position:relative;\"><a href=\"#%E5%A4%8D%E5%88%B6%E6%96%87%E4%BB%B6%E4%BF%9D%E7%95%99%E5%85%83%E4%BF%A1%E6%81%AF%EF%BC%88%E5%A4%8D%E5%88%B6%E6%96%87%E4%BB%B6%E9%BB%98%E8%AE%A4%E4%BC%9A%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E7%9A%84%E5%85%83%E4%BF%A1%E6%81%AF\" aria-label=\"复制文件保留元信息（复制文件默认会修改文件的元信息 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>复制文件保留元信息（复制文件默认会修改文件的元信息</h2>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"> <span class=\"token function\">cp</span> -a a b</code></pre></div>\n<h2 id=\"通配符，只匹配一个字符\" style=\"position:relative;\"><a href=\"#%E9%80%9A%E9%85%8D%E7%AC%A6%EF%BC%8C%E5%8F%AA%E5%8C%B9%E9%85%8D%E4%B8%80%E4%B8%AA%E5%AD%97%E7%AC%A6\" aria-label=\"通配符，只匹配一个字符 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>通配符，只匹配一个字符</h2>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"> <span class=\"token function\">ls</span> a?\n<span class=\"token comment\"># 会匹配 ab 不会匹配 abc</span></code></pre></div>\n<h2 id=\"打包文件，解包文件\" style=\"position:relative;\"><a href=\"#%E6%89%93%E5%8C%85%E6%96%87%E4%BB%B6%EF%BC%8C%E8%A7%A3%E5%8C%85%E6%96%87%E4%BB%B6\" aria-label=\"打包文件，解包文件 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>打包文件，解包文件</h2>\n<ul>\n<li>将 a 目录下的文件打包成 xxx.tar 文件，f 表示打包成文件</li>\n<li>tar 命令的参数是不带 - 的</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># 打包文件</span>\n<span class=\"token function\">tar</span> cf xxx.tar /a\n\n<span class=\"token comment\"># 解包文件</span>\n<span class=\"token function\">tar</span> xf xxx.tar -C /a</code></pre></div>\n<h2 id=\"压缩文件，解压文件\" style=\"position:relative;\"><a href=\"#%E5%8E%8B%E7%BC%A9%E6%96%87%E4%BB%B6%EF%BC%8C%E8%A7%A3%E5%8E%8B%E6%96%87%E4%BB%B6\" aria-label=\"压缩文件，解压文件 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>压缩文件，解压文件</h2>\n<ul>\n<li>bzip2 压缩的文件方式要比 gzip 小，压缩比例更高</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># gzip 压缩文件，打包文件加压缩</span>\n<span class=\"token function\">tar</span> czf xxx.tar.gz /a\n\n<span class=\"token comment\">#gzip 解压文件</span>\n<span class=\"token function\">tar</span> xzf xxx.tar.gz -C /a\n\n<span class=\"token comment\"># bzip2 压缩文件，打包文件加压缩</span>\n<span class=\"token function\">tar</span> cjf xxx.tar.bz2 /a\n\n<span class=\"token comment\">#bzip2解压文件</span>\n<span class=\"token function\">tar</span> xjf xx.tar.gz <span class=\"token punctuation\">\\</span>_v /a</code></pre></div>\n<h2 id=\"vim\" style=\"position:relative;\"><a href=\"#vim\" aria-label=\"vim permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>vim</h2>\n<h3 id=\"进入插入模式：\" style=\"position:relative;\"><a href=\"#%E8%BF%9B%E5%85%A5%E6%8F%92%E5%85%A5%E6%A8%A1%E5%BC%8F%EF%BC%9A\" aria-label=\"进入插入模式： permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>进入插入模式：</h3>\n<ul>\n<li><code class=\"language-text\">i</code>：当前位置进入插入模式</li>\n<li><code class=\"language-text\">I</code>：跳转到行前进入插入模式</li>\n<li><code class=\"language-text\">a</code>：跳转到下一个字符进入插入模式</li>\n<li><code class=\"language-text\">A</code>：跳转到行尾进入插入模式</li>\n<li><code class=\"language-text\">o</code>：下一行进入插入模式</li>\n<li><code class=\"language-text\">O</code>：上一行进入插入模式</li>\n</ul>\n<h3 id=\"命令行模式\" style=\"position:relative;\"><a href=\"#%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%A8%A1%E5%BC%8F\" aria-label=\"命令行模式 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>命令行模式</h3>\n<ul>\n<li><code class=\"language-text\">:!</code>：可以执行 Linux 命令</li>\n<li><code class=\"language-text\">:s/a/b</code>：对当前行进行替换</li>\n<li><code class=\"language-text\">:%s/a/b/g</code>：对所有符合条件的内容进行替换</li>\n<li><code class=\"language-text\">:10,25s/a/b/g</code>：对 10-25 行中的内容进行替换</li>\n<li><code class=\"language-text\">:.,+2s/a/b/g</code>：当前行.与接下来两行+2：</li>\n<li><code class=\"language-text\">/foo\\c</code>：在查找模式中加入\\c 表示大小写不敏感查找，\\C 表示大小写敏感查找</li>\n</ul>\n<h3 id=\"替换标志\" style=\"position:relative;\"><a href=\"#%E6%9B%BF%E6%8D%A2%E6%A0%87%E5%BF%97\" aria-label=\"替换标志 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>替换标志</h3>\n<ul>\n<li><code class=\"language-text\">c</code> 需要确认，例如:%s/foo/bar/gc 全局查找\"foo\"替换为\"bar\"并且需要确认</li>\n<li><code class=\"language-text\">i</code> 表示大小写不敏感查找,I 表示大小写敏感</li>\n<li><code class=\"language-text\">g</code> 表示全局 global 替换（即替换目标的所有出现)</li>\n</ul>\n<h3 id=\"可视模式\" style=\"position:relative;\"><a href=\"#%E5%8F%AF%E8%A7%86%E6%A8%A1%E5%BC%8F\" aria-label=\"可视模式 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>可视模式</h3>\n<ul>\n<li><code class=\"language-text\">v</code>：字符可视模式</li>\n<li><code class=\"language-text\">V</code>：行可视模式</li>\n<li><code class=\"language-text\">^+v</code>：块可视模式</li>\n<li><code class=\"language-text\">I</code>：可以在块模式下编辑多行，编辑完后按两下 esc 键，修改就会同步到其他行</li>\n<li><code class=\"language-text\">d</code>：在块模式下，删除多行选中的字符</li>\n</ul>\n<h3 id=\"复制\" style=\"position:relative;\"><a href=\"#%E5%A4%8D%E5%88%B6\" aria-label=\"复制 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>复制</h3>\n<ul>\n<li><code class=\"language-text\">yy</code>：复制正行</li>\n<li><code class=\"language-text\">n yy</code>：复制 n 行</li>\n<li><code class=\"language-text\">y\\$</code>：从当前字符复制到行尾</li>\n<li><code class=\"language-text\">p</code>：粘贴</li>\n</ul>\n<h3 id=\"剪切\" style=\"position:relative;\"><a href=\"#%E5%89%AA%E5%88%87\" aria-label=\"剪切 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>剪切</h3>\n<ul>\n<li><code class=\"language-text\">dd</code>：剪切整行</li>\n<li><code class=\"language-text\">n dd</code>：剪切 n 行</li>\n<li><code class=\"language-text\">d\\$</code>：剪切当前字符到行尾</li>\n</ul>\n<h3 id=\"撤销\" style=\"position:relative;\"><a href=\"#%E6%92%A4%E9%94%80\" aria-label=\"撤销 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>撤销</h3>\n<ul>\n<li><code class=\"language-text\">^+r</code>：反向撤销</li>\n<li><code class=\"language-text\">u</code>：撤销</li>\n</ul>\n<h3 id=\"替换\" style=\"position:relative;\"><a href=\"#%E6%9B%BF%E6%8D%A2\" aria-label=\"替换 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>替换</h3>\n<ul>\n<li><code class=\"language-text\">r</code>：替换单个字符</li>\n<li><code class=\"language-text\">x</code>：删除单个字符</li>\n</ul>\n<h3 id=\"跳转到指定行\" style=\"position:relative;\"><a href=\"#%E8%B7%B3%E8%BD%AC%E5%88%B0%E6%8C%87%E5%AE%9A%E8%A1%8C\" aria-label=\"跳转到指定行 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>跳转到指定行</h3>\n<ul>\n<li><code class=\"language-text\">n G</code>：跳转到第 n 行</li>\n<li><code class=\"language-text\">gg</code>：跳转到第一行</li>\n<li><code class=\"language-text\">G</code>：跳转到最后一行</li>\n<li><code class=\"language-text\">\\$</code>：跳转到该行的行尾</li>\n<li><code class=\"language-text\">^</code>：跳转到该行的行首</li>\n</ul>\n<h2 id=\"常用配置\" style=\"position:relative;\"><a href=\"#%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE\" aria-label=\"常用配置 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>常用配置</h2>\n<h3 id=\"设置默认进行大小写不敏感查找\" style=\"position:relative;\"><a href=\"#%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E8%BF%9B%E8%A1%8C%E5%A4%A7%E5%B0%8F%E5%86%99%E4%B8%8D%E6%95%8F%E6%84%9F%E6%9F%A5%E6%89%BE\" aria-label=\"设置默认进行大小写不敏感查找 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>设置默认进行大小写不敏感查找</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">:set ignorecase</code></pre></div>\n<h3 id=\"如果有一个大写字母，则切换到大小写敏感查找\" style=\"position:relative;\"><a href=\"#%E5%A6%82%E6%9E%9C%E6%9C%89%E4%B8%80%E4%B8%AA%E5%A4%A7%E5%86%99%E5%AD%97%E6%AF%8D%EF%BC%8C%E5%88%99%E5%88%87%E6%8D%A2%E5%88%B0%E5%A4%A7%E5%B0%8F%E5%86%99%E6%95%8F%E6%84%9F%E6%9F%A5%E6%89%BE\" aria-label=\"如果有一个大写字母，则切换到大小写敏感查找 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>如果有一个大写字母，则切换到大小写敏感查找</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">:set smartcase</code></pre></div>\n<h3 id=\"可以在敲键的同时搜索，按下回车把移动光标移动到匹配的词；-按下-esc-取消搜索。\" style=\"position:relative;\"><a href=\"#%E5%8F%AF%E4%BB%A5%E5%9C%A8%E6%95%B2%E9%94%AE%E7%9A%84%E5%90%8C%E6%97%B6%E6%90%9C%E7%B4%A2%EF%BC%8C%E6%8C%89%E4%B8%8B%E5%9B%9E%E8%BD%A6%E6%8A%8A%E7%A7%BB%E5%8A%A8%E5%85%89%E6%A0%87%E7%A7%BB%E5%8A%A8%E5%88%B0%E5%8C%B9%E9%85%8D%E7%9A%84%E8%AF%8D%EF%BC%9B-%E6%8C%89%E4%B8%8B-esc-%E5%8F%96%E6%B6%88%E6%90%9C%E7%B4%A2%E3%80%82\" aria-label=\"可以在敲键的同时搜索，按下回车把移动光标移动到匹配的词； 按下 esc 取消搜索。 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>可以在敲键的同时搜索，按下回车把移动光标移动到匹配的词； 按下 Esc 取消搜索。</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">:set incsearch</code></pre></div>\n<h3 id=\"用来设置到文件尾部后是否重新从文件头开始搜索。\" style=\"position:relative;\"><a href=\"#%E7%94%A8%E6%9D%A5%E8%AE%BE%E7%BD%AE%E5%88%B0%E6%96%87%E4%BB%B6%E5%B0%BE%E9%83%A8%E5%90%8E%E6%98%AF%E5%90%A6%E9%87%8D%E6%96%B0%E4%BB%8E%E6%96%87%E4%BB%B6%E5%A4%B4%E5%BC%80%E5%A7%8B%E6%90%9C%E7%B4%A2%E3%80%82\" aria-label=\"用来设置到文件尾部后是否重新从文件头开始搜索。 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>用来设置到文件尾部后是否重新从文件头开始搜索。</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">:set wrapscan</code></pre></div>\n<h3 id=\"禁用高亮\" style=\"position:relative;\"><a href=\"#%E7%A6%81%E7%94%A8%E9%AB%98%E4%BA%AE\" aria-label=\"禁用高亮 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>禁用高亮</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">:set nohlsearch</code></pre></div>\n<h3 id=\"启用高亮\" style=\"position:relative;\"><a href=\"#%E5%90%AF%E7%94%A8%E9%AB%98%E4%BA%AE\" aria-label=\"启用高亮 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>启用高亮</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">:set hlsearch</code></pre></div>"},{"id":"930e25a1-7f60-5290-844c-2605d687279f","headings":[{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"react 高亮显示关键词","path":"/gatsby-antd","tags":["React"],"excerpt":"react 高亮显示关键词，不用库，原生显示","created":"2021-02-20 21:45","createdPretty":"20 February, 2021","updated":"2021-04-11T00:00:00.000Z","updatedPretty":"20 February, 2021","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAADJElEQVQozwEZA+b8ACgTGkcuL15GQUItMjgkLUUvMjgjJ0MnKV06NXdUSJZzY6qMe6uRgpV2ZY1tXYNkWHBPRnJSSV8+Ol0/QAAxGR1DKihcQj41HyMuGyJELCxBJyhOMC5oRTyHZlmmh3ioi3i5oZGXeWaAXk5xUEdmRj9xUEdjQTtXNzYAOh8fPSIjPiEkNh4iOCImRCorOiAlVDUycEs9qYt70LmpqIt5ood3im1ce1pPakhBXj45Xz86YT86Ti8wADUZHkUkI0YlJTQbIT8lKE0vLzsgJlc2MoVeTMOol8arnKOEdpByZoFgU39cUGRCPFc3NFQ1NFM0Mlk3NAA8Gh9AHiJFIiU5HSJDJilPLy5CJShZNzKHY1bPtafMsaShhHmMal15U0d4UkdhPjdXNzNVNTNRLy9TMTIAPxofOxsfQSAjOB0iSSkqTSwsSSkrZUE7hmRZtJmRrpWPlXZqdlJIcExCdlFGWzg1SSstRyktRSYpVC0tAFIqKkAgIkEiIzogI08uLUQmKz4gJVw3L41qW7WbhLGYgo5rXWJAOWNAPGZAO1AtLzsfJjwhKD0gJ04mKAB6TDN9Tz52Sz5WMi1aOCdpRCpzUDuefW7Kp4a2m1m7oWWujXZ6WE1ZOTJIKyhKLCxQLzBIKi5KKi1RLy8AaEIuek8zfk8vek00fVpMsZJ55cOr17OTo4ZOn4ZFmIA+gmk5tZN5yKeTlnZiclI9SSwmSSspUTAvRCYoAFg1JG9HM6B1XdawmPneyP/m0uC8l8ymW9e0ZeLBceG/btO0Z7eWXtOvkvHKr9OrjqJ6ZYJYS1QwLysWHwCjd2LSpovsxqnyz7Hwx6jGnHqbdz20kknDn1POqljbtmDKpFSbfD1vUDCFYU+cc2GLZFhqSUdDKC8kER4AvI1zypx+v5FzsIJoh19LXD8nZkoqb1AxdlgxeFkwknE5nns8fV4wZEcrSi8lUjU1NiArLxsoXEBBhGNaAHlOQ5ZpVZFjUFs4MTUfGkYwIVQ6I0kxI0oyJEIqIz8pIE0zJFQ3JzIfICUXHhwQGi8bI4FeVaiAbp54Z2aDFUbWy7m4AAAAAElFTkSuQmCC","aspectRatio":1.5060240963855422,"src":"/static/133cf3c23846178c742207aa20a64dab/0853f/tree.png","srcSet":"/static/133cf3c23846178c742207aa20a64dab/14156/tree.png 125w,\n/static/133cf3c23846178c742207aa20a64dab/d6e47/tree.png 250w,\n/static/133cf3c23846178c742207aa20a64dab/0853f/tree.png 500w,\n/static/133cf3c23846178c742207aa20a64dab/ce627/tree.png 750w,\n/static/133cf3c23846178c742207aa20a64dab/9dbcf/tree.png 1000w,\n/static/133cf3c23846178c742207aa20a64dab/87046/tree.png 1920w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<h2 id=\"正则表达式转义，你会用到的\" style=\"position:relative;\"><a href=\"#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%BD%AC%E4%B9%89%EF%BC%8C%E4%BD%A0%E4%BC%9A%E7%94%A8%E5%88%B0%E7%9A%84\" aria-label=\"正则表达式转义，你会用到的 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>正则表达式转义，你会用到的</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 正则特殊字符转义</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> escapeRegexp <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>string <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token function\">String</span><span class=\"token punctuation\">(</span>string<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[\\\\^$*+?.()|[\\]{}]</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\\\\$&amp;\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"针对关键词进行高亮\" style=\"position:relative;\"><a href=\"#%E9%92%88%E5%AF%B9%E5%85%B3%E9%94%AE%E8%AF%8D%E8%BF%9B%E8%A1%8C%E9%AB%98%E4%BA%AE\" aria-label=\"针对关键词进行高亮 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>针对关键词进行高亮</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> escapeRegexp <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"Utils/string\"</span>\n\n<span class=\"token comment\">// 针对关键词进行高亮</span>\n<span class=\"token comment\">// 正则匹配有可能会涉及到特定字符</span>\n<span class=\"token comment\">// targetVal 要高亮的目标字符串</span>\n<span class=\"token comment\">// 高亮关键词</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">hightLight</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">targetVal<span class=\"token punctuation\">,</span> highLightValue</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> res <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span>\n  <span class=\"token keyword\">let</span> hasHighLight <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n  hasHighLight <span class=\"token operator\">=</span> highLightValue<span class=\"token punctuation\">.</span><span class=\"token function\">some</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> reg <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token function\">escapeRegexp</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"i\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 不区分大小写</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>reg<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>targetVal<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>hasHighLight<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    res <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;span style=\"color:black;background:#f6e58d\"></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>targetVal<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/span></span><span class=\"token template-punctuation string\">`</span></span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    res <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>targetVal<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/span></span><span class=\"token template-punctuation string\">`</span></span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> res\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"针对字符串进行高亮\" style=\"position:relative;\"><a href=\"#%E9%92%88%E5%AF%B9%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BF%9B%E8%A1%8C%E9%AB%98%E4%BA%AE\" aria-label=\"针对字符串进行高亮 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>针对字符串进行高亮</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 根据搜索条件替换字符串关键词高亮标签</span>\n<span class=\"token comment\">// 针对长字符串的高亮显示</span>\n<span class=\"token comment\">// 返回的数组可以用React.createElement('pre',null,stringReplaceMark(targetVal,highLighValue))</span>\n<span class=\"token function-variable function\">stringReplaceMark</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">targetVal<span class=\"token punctuation\">,</span> highLightValue</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> replaceVal <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Array<span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>highLightValue<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> highLightValue<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    highLightValue<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> reg <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token function\">escapeRegexp</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"i\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// 高亮替换的字符</span>\n      <span class=\"token keyword\">const</span> isReplaced <span class=\"token operator\">=</span> targetVal<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>reg<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> targetVal<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>reg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span>\n      <span class=\"token comment\">// 将字符串从高亮的位置切割成数组，好用上面的isReplaced插入到数组的分割空位中</span>\n      <span class=\"token keyword\">const</span> replaceArr <span class=\"token operator\">=</span> targetVal<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span>reg<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">const</span> length <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>replaceArr<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> replaceArr<span class=\"token punctuation\">.</span>length\n      replaceArr<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        replaceVal<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// 在空位插入高亮标签，不在最后插入</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">!==</span> length <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token operator\">&amp;&amp;</span> isReplaced<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          replaceVal<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>\n            <span class=\"token operator\">&lt;</span>span style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> color<span class=\"token operator\">:</span> <span class=\"token string\">\"black\"</span><span class=\"token punctuation\">,</span> background<span class=\"token operator\">:</span> <span class=\"token string\">\"#f6e58d\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n              <span class=\"token punctuation\">{</span>isReplaced<span class=\"token punctuation\">}</span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span>\n          <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    replaceVal<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>targetVal<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> replaceVal\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><br />推荐：<br /></p>\n<ul>\n<li><a href=\"https://github.com/benjamingr/RegExp.escape\">正则转义相关地址</a></li>\n</ul>"},{"id":"e5837e5a-27ad-52d2-8124-ef093d70df6e","headings":[{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"Gatsby配置antd","path":"/gatsby-antd","tags":["Gatsby"],"excerpt":"想试试Gatsby配置antd吗？.","created":"2021-02-20 21:45","createdPretty":"20 February, 2021","updated":"2021-04-11T00:00:00.000Z","updatedPretty":"20 February, 2021","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAADDklEQVQozyWS62/TZhSH/W9Amzixnfhuv3Ziv3ZSx04cN6FNaEsaVDEUiYIoUztpQ+rQAK2MbdyvgYAIEKCIcmnSbKTtUlqpodAVWjah0glpH4aQ+ALij5infTk60tHzO0dHD+LB0Xxv7sfRw/dL155O/fJ7o9Gq1Rcnq0+rk8v12uKjR6vTjddP5tZmp188/nXfrt3eAEZxAYL0ezAP4g9iI4O76zdvrcw0XjZn1540X80311vzK43HU+Xrrxdm7xTP//TdgbFv9w/v2SXKAKdwhgtiAV+b34MwLHn06/0PiqXntdqr2ZmNxYW/l1sf/lz954/62sLJd6ut8pljo1996diGFVMJGhfFoCpTfgLdhHoQWWJvHjlSPXe2euHc3I3y4vit1dq9jd/q7188/Lxx903zwVBhoCeT6rSNZBySDL7FBF3xkNts8rUjmsKN7By4c2xspnR6qVJcGS8tVS6uTZTWq9ffTFXeNipDX/QJIqVBXpZZIwIGt1m9jkrS2GYXjmmCj8QEwHU75nAhP37iwPrkpZd3T/1VPf926uy76WKz/EM+68gSk07AfLcxMuDk0zr9P2zrAs2SrMDQPAkkzojIM1cPfn5e/rh05dPy5Y/PipXjw3FDEQE9uL27Mw739tuFbASGSCKAIgbkePcqDaRsPZuKOpY6uqe3NfH93O1Dy7Wx989+PvpNvyiwLBfcmetKJyKDvbFCBnYolMDjiBpiXNi2lK6kFtHFWIdUyKXCiuTYZtzUcz1WX8ZSFMAJVCKmRnXZMUBPQqYY3Ed4ETeSE0io8kYUqCqXMMPZVAcPWC0SVjVZlLikFe1OW4JIh0O8DgFU2M4Y8Ad9ba4kKOEL0Lgc4t1UCIWIBhxT7cukdvRvSztGNm3mtjqddocImFBYVFUgySxUGH/At9nnQdoxbzvmISjMHUsyoyp8V1JPxqOWqSsQuNWORzNp04opiiLSHBmgCYLEvDj637ddy9r8XpRAXekoLggkxrFg3NQglEFIBDIfVsVU0kiYihzmXTfb/R4vgbqIu/lfBW8J6zAaKoIAAAAASUVORK5CYII=","aspectRatio":1.5060240963855422,"src":"/static/30f8dd521a640f8b2bb6aabf077ebb50/0853f/sweet.png","srcSet":"/static/30f8dd521a640f8b2bb6aabf077ebb50/14156/sweet.png 125w,\n/static/30f8dd521a640f8b2bb6aabf077ebb50/d6e47/sweet.png 250w,\n/static/30f8dd521a640f8b2bb6aabf077ebb50/0853f/sweet.png 500w,\n/static/30f8dd521a640f8b2bb6aabf077ebb50/ce627/sweet.png 750w,\n/static/30f8dd521a640f8b2bb6aabf077ebb50/9dbcf/sweet.png 1000w,\n/static/30f8dd521a640f8b2bb6aabf077ebb50/87046/sweet.png 1920w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<h2 id=\"前言\" style=\"position:relative;\"><a href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"前言 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>前言</h2>\n<blockquote>\n<p>相信国内的 react 用户都是 antd 的忠实爱好者，此教程实践可行</p>\n</blockquote>\n<h2 id=\"首先安装必须的-npm-包\" style=\"position:relative;\"><a href=\"#%E9%A6%96%E5%85%88%E5%AE%89%E8%A3%85%E5%BF%85%E9%A1%BB%E7%9A%84-npm-%E5%8C%85\" aria-label=\"首先安装必须的 npm 包 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>首先安装必须的 npm 包</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install --save gatsby-plugin-antd less less-loader babel-plugin-import</code></pre></div>\n<h2 id=\"将以下代码添加到-gatsby-nodejs-中\" style=\"position:relative;\"><a href=\"#%E5%B0%86%E4%BB%A5%E4%B8%8B%E4%BB%A3%E7%A0%81%E6%B7%BB%E5%8A%A0%E5%88%B0-gatsby-nodejs-%E4%B8%AD\" aria-label=\"将以下代码添加到 gatsby nodejs 中 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>将以下代码添加到 gatsby-node.js 中</h2>\n<ul>\n<li>babel-plugin-import 配置 antd 按需加载组件</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">exports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onCreateBabelConfig</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> actions <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  actions<span class=\"token punctuation\">.</span><span class=\"token function\">setBabelPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">\"babel-plugin-import\"</span><span class=\"token punctuation\">,</span>\n    options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      libraryName<span class=\"token operator\">:</span> <span class=\"token string\">\"antd\"</span><span class=\"token punctuation\">,</span>\n      style<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"将以下代码添加到-gatsby-configjs-的插件组中\" style=\"position:relative;\"><a href=\"#%E5%B0%86%E4%BB%A5%E4%B8%8B%E4%BB%A3%E7%A0%81%E6%B7%BB%E5%8A%A0%E5%88%B0-gatsby-configjs-%E7%9A%84%E6%8F%92%E4%BB%B6%E7%BB%84%E4%B8%AD\" aria-label=\"将以下代码添加到 gatsby configjs 的插件组中 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>将以下代码添加到 gatsby-config.js 的插件组中</h2>\n<ul>\n<li>modifyVars 可自行修改 antd 的样式</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{\n    resolve: &quot;gatsby-plugin-antd&quot;,\n    options: {\n      style: true,\n    },\n},\n{\n    resolve: `gatsby-plugin-less`,\n    options: {\n      modifyVars: {\n          &quot;primary-color&quot;: &quot;#da3043&quot;,\n          &quot;font-family&quot;: &quot;Arial&quot;,\n          &quot;layout-body-background&quot;: &quot;#66ff79&quot;,\n      },\n      lessOptions: {\n          javascriptEnabled: true,\n      },\n    },\n}</code></pre></div>\n<h2 id=\"-最后一起康康我的-packagejson-吧\" style=\"position:relative;\"><a href=\"#-%E6%9C%80%E5%90%8E%E4%B8%80%E8%B5%B7%E5%BA%B7%E5%BA%B7%E6%88%91%E7%9A%84-packagejson-%E5%90%A7\" aria-label=\" 最后一起康康我的 packagejson 吧 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤔 最后一起康康我的 package.json 吧</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  &quot;dependencies&quot;: {\n    &quot;antd&quot;: &quot;^4.12.3&quot;,\n    &quot;babel-plugin-import&quot;: &quot;^1.13.3&quot;,\n    &quot;gatsby&quot;: &quot;^2.32.3&quot;,\n    &quot;gatsby-image&quot;: &quot;^2.11.0&quot;,\n    &quot;gatsby-plugin-antd&quot;: &quot;^2.2.0&quot;,\n    &quot;gatsby-plugin-feed&quot;: &quot;^2.13.0&quot;,\n    &quot;gatsby-plugin-google-analytics&quot;: &quot;^2.11.0&quot;,\n    &quot;gatsby-plugin-less&quot;: &quot;^4.7.0&quot;,\n    &quot;gatsby-plugin-manifest&quot;: &quot;^2.12.0&quot;,\n    &quot;gatsby-plugin-offline&quot;: &quot;^3.10.0&quot;,\n    &quot;gatsby-plugin-react-helmet&quot;: &quot;^3.10.0&quot;,\n    &quot;gatsby-plugin-sharp&quot;: &quot;^2.14.1&quot;,\n    &quot;gatsby-remark-copy-linked-files&quot;: &quot;^2.10.0&quot;,\n    &quot;gatsby-remark-images&quot;: &quot;^3.11.0&quot;,\n    &quot;gatsby-remark-prismjs&quot;: &quot;^3.13.0&quot;,\n    &quot;gatsby-remark-responsive-iframe&quot;: &quot;^2.11.0&quot;,\n    &quot;gatsby-remark-smartypants&quot;: &quot;^2.10.0&quot;,\n    &quot;gatsby-source-filesystem&quot;: &quot;^2.11.0&quot;,\n    &quot;gatsby-transformer-remark&quot;: &quot;^2.16.0&quot;,\n    &quot;gatsby-transformer-sharp&quot;: &quot;^2.12.0&quot;,\n    &quot;less&quot;: &quot;^4.1.1&quot;,\n    &quot;less-loader&quot;: &quot;^8.0.0&quot;,\n    &quot;prismjs&quot;: &quot;^1.22.0&quot;,\n    &quot;react&quot;: &quot;^16.12.0&quot;,\n    &quot;react-dom&quot;: &quot;^16.12.0&quot;,\n    &quot;react-helmet&quot;: &quot;^5.2.1&quot;,\n    &quot;typeface-merriweather&quot;: &quot;0.0.72&quot;,\n    &quot;typeface-montserrat&quot;: &quot;0.0.75&quot;\n  },\n  &quot;devDependencies&quot;: {\n    &quot;gh-pages&quot;: &quot;^3.1.0&quot;,\n    &quot;prettier&quot;: &quot;2.2.1&quot;\n  },</code></pre></div>"},{"id":"6800558a-9d73-5926-b456-8a0a037ead02","headings":[{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"深入浅出HTTP","path":"/http","tags":["Network"],"excerpt":"http 重要知识点.","created":"2021-02-20 21:45","createdPretty":"20 February, 2021","updated":"2021-04-11T00:00:00.000Z","updatedPretty":"20 February, 2021","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAEEAwX/xAAWAQEBAQAAAAAAAAAAAAAAAAACAAH/2gAMAwEAAhADEAAAAdXwaDIkFn//xAAZEAEBAQEBAQAAAAAAAAAAAAABAhIDADH/2gAIAQEAAQUC2YonHShppy9Hz9//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAAQIf/aAAgBAgEBPwGn/8QAGxAAAgEFAAAAAAAAAAAAAAAAAAEQESExYZH/2gAIAQEABj8Cul2MFBLUf//EABkQAQADAQEAAAAAAAAAAAAAAAEAESExQf/aAAgBAQABPyGl8hsCblNIXOI4exW2XHnk2jj/2gAMAwEAAgADAAAAELTv/8QAFhEBAQEAAAAAAAAAAAAAAAAAABEh/9oACAEDAQE/EMR//8QAFREBAQAAAAAAAAAAAAAAAAAAERD/2gAIAQIBAT8QFP/EABsQAQACAwEBAAAAAAAAAAAAAAEAESExUUGh/9oACAEBAAE/EEIgEaM6+wnGPGlFMOOkHJWNEuR7L4YlONVFUz//2Q==","aspectRatio":1.5060240963855422,"src":"/static/a101ba1b43ab0f98316295a93ab9c5fb/ba9ae/fog.jpg","srcSet":"/static/a101ba1b43ab0f98316295a93ab9c5fb/86d0f/fog.jpg 125w,\n/static/a101ba1b43ab0f98316295a93ab9c5fb/520da/fog.jpg 250w,\n/static/a101ba1b43ab0f98316295a93ab9c5fb/ba9ae/fog.jpg 500w,\n/static/a101ba1b43ab0f98316295a93ab9c5fb/72227/fog.jpg 750w,\n/static/a101ba1b43ab0f98316295a93ab9c5fb/5c39c/fog.jpg 1000w,\n/static/a101ba1b43ab0f98316295a93ab9c5fb/b1e91/fog.jpg 1920w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<h2 id=\"首先让我们来了解一下-http-的请求报文和响应报文\" style=\"position:relative;\"><a href=\"#%E9%A6%96%E5%85%88%E8%AE%A9%E6%88%91%E4%BB%AC%E6%9D%A5%E4%BA%86%E8%A7%A3%E4%B8%80%E4%B8%8B-http-%E7%9A%84%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87%E5%92%8C%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87\" aria-label=\"首先让我们来了解一下 http 的请求报文和响应报文 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>首先让我们来了解一下 http 的请求报文和响应报文</h2>\n<p><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/da49442a0e71569330996cf2fcde50c1/a7a19/http.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAABAklEQVQY001PaY+DIBD1//+41iuKaxWwtYqAeIDnJu7b7pdNJpPhzbwDzy1u3dZlXcZp1L2a7bTtG5A/EIVhtjNWUknnrPsgwM1gvOM8dK+VVo8i94M740xIgcIp5HrTq141bRPHcckoaJAexgEdfG+apzAKSUYSkuBIdKKT3bt5+77/ql/Vk9/utyRN8kcOXV4xJOUVx8F+7B4EKKN4FGUhVQer8/uEQ5oSJIQJVq1opeyGwbjVXdeFD7RC/JIRm1cV45DllLGSUvSvPKeMf5gNpGGVEgJ1rXVvTEoy4CB61lkkH6cJ/f8wWzuMpn7XQRhGcRwEQRhFCfJkGf6vlIL0D9pJSG45vahuAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"http\"\n        title=\"http\"\n        src=\"/static/da49442a0e71569330996cf2fcde50c1/c1b63/http.png\"\n        srcset=\"/static/da49442a0e71569330996cf2fcde50c1/5a46d/http.png 300w,\n/static/da49442a0e71569330996cf2fcde50c1/0a47e/http.png 600w,\n/static/da49442a0e71569330996cf2fcde50c1/c1b63/http.png 1200w,\n/static/da49442a0e71569330996cf2fcde50c1/a7a19/http.png 1323w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br /></p>\n<p><a name=\"c76a254f\"></a></p>\n<h2 id=\"再向您献上一张-http-请求的流程图\" style=\"position:relative;\"><a href=\"#%E5%86%8D%E5%90%91%E6%82%A8%E7%8C%AE%E4%B8%8A%E4%B8%80%E5%BC%A0-http-%E8%AF%B7%E6%B1%82%E7%9A%84%E6%B5%81%E7%A8%8B%E5%9B%BE\" aria-label=\"再向您献上一张 http 请求的流程图 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>再向您献上一张 http 请求的流程图</h2>\n<p><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 748px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/226664588d9551f1dce70bbfeb894e83/f8915/httpRequest.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABBElEQVQY03VR2XKDMBDj/7+xnbZJmmDwAb69virDDE8po4H1SoLVMpVagNrqWxxs/Y+dpFIhhtYbcKpba+cR9cyYVPKUnoJLOcxCCutM710bbcwofPDLuu56LzXjzoWIKaLAW3pvZ6e2MezE5QakXJQ288pDTD5ExqX1IVHetNXOg4WGrYJKVbt5zgvIYWZc/b6WSFmo/ePrpl1wIf08XkpbF9P9yZ6Mg50XcXu8IpFQ2+f3TVs/zIlo5TxR6seFvBgbg+1a42isEUfmEbXhUXKhha/oozOBgPNaOFrDLIW2BhBSApRp7PLICWUk5Mjjy9caLzOWb60NMTrvjLUA5fz2L/4BgwvPrlvqCxAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"httpRequest\"\n        title=\"httpRequest\"\n        src=\"/static/226664588d9551f1dce70bbfeb894e83/f8915/httpRequest.png\"\n        srcset=\"/static/226664588d9551f1dce70bbfeb894e83/5a46d/httpRequest.png 300w,\n/static/226664588d9551f1dce70bbfeb894e83/0a47e/httpRequest.png 600w,\n/static/226664588d9551f1dce70bbfeb894e83/f8915/httpRequest.png 748w\"\n        sizes=\"(max-width: 748px) 100vw, 748px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br /></p>\n<p><a name=\"a8b0534a\"></a></p>\n<h2 id=\"redirect（资源重定向）的-http-响应头部\" style=\"position:relative;\"><a href=\"#redirect%EF%BC%88%E8%B5%84%E6%BA%90%E9%87%8D%E5%AE%9A%E5%90%91%EF%BC%89%E7%9A%84-http-%E5%93%8D%E5%BA%94%E5%A4%B4%E9%83%A8\" aria-label=\"redirect（资源重定向）的 http 响应头部 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Redirect（资源重定向）的 HTTP 响应头部</h2>\n<blockquote>\n<ul>\n<li>Location:''（后面接跳转的 URI 路径）</li>\n<li>通过 response.write(302,{ Location:'/new' })返回的 xhr.status>=300&#x26;&#x26;xhr.status&#x3C;400 才能进行重定向</li>\n</ul>\n</blockquote>\n<p><a name=\"94d0159f\"></a></p>\n<h2 id=\"cache-contorl-的含义和使用的-http-响应头部\" style=\"position:relative;\"><a href=\"#cache-contorl-%E7%9A%84%E5%90%AB%E4%B9%89%E5%92%8C%E4%BD%BF%E7%94%A8%E7%9A%84-http-%E5%93%8D%E5%BA%94%E5%A4%B4%E9%83%A8\" aria-label=\"cache contorl 的含义和使用的 http 响应头部 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cache-Contorl 的含义和使用的 HTTP 响应头部</h2>\n<blockquote>\n<ul>\n<li>可缓存性：<br />|<strong>public</strong>|http 经过的地方都能够进行缓存  |<br />|<strong>private</strong>|只有发起请求的浏览器才能够进行缓存|<br />|<strong>no-cache</strong>|本地可以缓存，但是需要在服务端验证过后才能使用|</li>\n<li>到期：<br />|<strong>max-age=<second></strong>| 浏览器缓存多长时间到期 |<br />|<strong>s-maxage=<second></strong>|代理服务器缓存的到期时间|<br />|  <strong>max-stale=<second></strong>| 在 max-age 到期之后，在 max-stale 期限之内还是可以取缓存 |</li>\n<li>重新验证：（使用较少）<br />|<strong>must-revalidate</strong>|   在 max-age 过期之后必须到原服务端发起请求来验证此缓存是否过期了，而不能直接使用本地的缓存|<br />|<strong>proxy-revalidate</strong>|使用在缓存服务器，在缓存过期之后到原服务端请求验证缓存是否过期了，而不能直接使用本地的缓存|</li>\n<li>其他：<br />|<strong>no-store</strong>|本地和代理服务器都不能缓存，永远只能到服务端拿取新的内容才能使用|<br />|<strong>no-transform</strong>|指定代理服务器不能修改服务端返回的内容|</li>\n</ul>\n</blockquote>\n<blockquote>\n<ul>\n<li>服务器缓存的验证更新机制：<br />| <strong>Last-Modified</strong> （上一次修改时间）| 在服务端返回 Last-Modified，浏览器在下一次请求的时候会带上<strong>If-Modified-Since</strong> 与服务器的 Last-Modified 对比，如果相等，那么资源没有被修改过，服务器则告诉浏览器直接使用缓存|<br />|<strong>Etag</strong>（数据签名：对静态资源进行 hash 计算的到唯一值的签名）|在服务器返回 Etag，浏览器在下一次请求的时候会带上<strong>If-None-Match</strong>与服务器的 Etag 进行对比，如果相等，那么资源没有被修改过，服务器告诉浏览器直接使用缓存|</li>\n</ul>\n</blockquote>\n<p><a name=\"5c13213b\"></a></p>\n<h2 id=\"cors-跨域请求的-http-响应头部\" style=\"position:relative;\"><a href=\"#cors-%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82%E7%9A%84-http-%E5%93%8D%E5%BA%94%E5%A4%B4%E9%83%A8\" aria-label=\"cors 跨域请求的 http 响应头部 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CORS 跨域请求的 HTTP 响应头部</h2>\n<p><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 748px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/157a5c1636af09bd03e30e5838a11366/f8915/cors.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA7ElEQVQoz5WR646EIAyFff9X1H8z3lEBQVDEmY+wO5lsZpNd0iic9rSnbXHGU69aSqm1DmeIV8QAV7OCZzvCkfEfViitRjFy5mXej/16XNnxeDsfmYlsN+u8U6ve3BZj/C3uM7kqS6lUVVbTNFEEwf8gG2v4LXL5K+27r6+eGQlkLn73rw5JysywnJ3UObvzlniaxZXIUsuu7/thABVCoB/fKIau6+q6xms2Y51lqMk3j03T3u53govzTFth1HTOSjAQ6sNPeZXkwpMtsEi+zntk5hUWKAGFnMWgvG0bijB8mDxfs4CJ8cw1QghP+LsK6h+JDWIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"cors\"\n        title=\"cors\"\n        src=\"/static/157a5c1636af09bd03e30e5838a11366/f8915/cors.png\"\n        srcset=\"/static/157a5c1636af09bd03e30e5838a11366/5a46d/cors.png 300w,\n/static/157a5c1636af09bd03e30e5838a11366/0a47e/cors.png 600w,\n/static/157a5c1636af09bd03e30e5838a11366/f8915/cors.png 748w\"\n        sizes=\"(max-width: 748px) 100vw, 748px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br /></p>\n<blockquote>\n<ul>\n<li><strong>Access-Control-Allow-Origin</strong>:支持跨域的 URI</li>\n<li><strong>Access-Control-Allow-Headers</strong>:跨域请求支持的请求头（由于 cors 跨域对请求头和请求方法存在限制，所以需要服务端来进行处理才能使用相应的请求头和请求方法）</li>\n<li><strong>Access-Control-Allow-Methods</strong>:跨域请求支持的请求方法（eg:'PUT,DELETE,POST'）</li>\n<li><strong>Access-Control-Max-Age</strong>:1000   意思是在 1000s 内的以上跨域（包括跨域支持的头部和请求方法）都不用发送 cors 预请求来验证，可以直接发送正式请求</li>\n<li><strong>注意</strong>：如果在 cors 跨域时，服务端不设定允许的请求头或者请求方法返回，浏览器虽然可以接收返回的信息，但是为了安全考虑，是不会显示内容的。</li>\n<li><strong>注意</strong>：由于浏览器会为了安全着想，在发送除了 PUT,HEAD,POST 方法，和 Content-Type 为 text-plian,multipart/form-data,application/x-www-form-urlencoded 类型以外的 cors 限制发送的请求时，会先在发送正式请求之前发送一个预请求（method 方法为 OPTION）来获取服务端允许的请求域，请求方法，请求头等信息。<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 584px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/eb6dc096a0510b40f77cfc659d047aeb/e05eb/res.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB0ElEQVQoz12S25KiQBBE/f/v2pjnEeXaIDTNTUBFBFFQ2IO4TuxoBVHQnZVZWbXKy9z1XNMyHeF0t26apuf4JMZpJD7JEp/TJVb90F+7q3CFihThB/4+35fHMk7iU3XKi3yfZ6EKkzTh1LKtc32myuP5eIEfQ9M23+tv3dDh52mZpvJlnMYyDEzbCKS8dl17bYlzXUP2w3zv77f7TdtoVIVWOM42MP6IryiMYNvnRd+fx2c7/fuN4/ifbErqxpbOAxnYjm1LR4/MNEmLsjhWp6JI0ky9YE+Qnypv8KW5INuwDG/nbbYbTdOiUFV1dTgeZChtIeI0adsGDtxpXgkQgKthGPq+3/k77mX7DKmIxypoyZMswTOqqFiF0Wyb8ITrCWiosuKMDD+jJIriuU/EK6VmjdOEt9eurZsLCTrfbb9mhuErZgsPQwYDGH4K+9KH53g6UhQvUFRfam4TA/9XMvfMC3isZkjCdZgWsr2daznW4j+66P/D+dttRmXZJszcY7bVuQKTZimBEGZJ4FDb4VWDhGXz3sx82upbtLFbPMtDCYzm8QwjWSw+snBLOfKl4Z8lYT03+oZuaR61a20NjFpSSVQsKzl3+5i7ZTqgeP0LFD3ReIVXndUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"res\"\n        title=\"res\"\n        src=\"/static/eb6dc096a0510b40f77cfc659d047aeb/e05eb/res.png\"\n        srcset=\"/static/eb6dc096a0510b40f77cfc659d047aeb/5a46d/res.png 300w,\n/static/eb6dc096a0510b40f77cfc659d047aeb/e05eb/res.png 584w\"\n        sizes=\"(max-width: 584px) 100vw, 584px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></li>\n</ul>\n</blockquote>\n<p><a name=\"9e50c3f6\"></a></p>\n<h2 id=\"cookie-的-http-响应头部\" style=\"position:relative;\"><a href=\"#cookie-%E7%9A%84-http-%E5%93%8D%E5%BA%94%E5%A4%B4%E9%83%A8\" aria-label=\"cookie 的 http 响应头部 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cookie 的 HTTP 响应头部</h2>\n<blockquote>\n<ul>\n<li>服务端通过在响应头中设置<strong>set-Cookie</strong>，设置 Cookie</li>\n<li>键值对，可以通过'[]'设置多个 cookie</li>\n<li>浏览器的下一次请求的时候会带上</li>\n<li>同域才能发送 cookie</li>\n<li>cookie 的属性：<br />|<strong>max-age</strong>和<strong>expires</strong>| 设置过期时间 |<br />|<strong>Secure</strong>|只能通过 https 发送|<br />|  <strong>HttpOnly</strong>|无法通过 document.cookie 或者其他脚本程序访问，防止 xrs 攻击  |</li>\n</ul>\n</blockquote>\n<p><a name=\"2bb7644c\"></a></p>\n<h2 id=\"connection（tcp-连接）的-http-响应头部\" style=\"position:relative;\"><a href=\"#connection%EF%BC%88tcp-%E8%BF%9E%E6%8E%A5%EF%BC%89%E7%9A%84-http-%E5%93%8D%E5%BA%94%E5%A4%B4%E9%83%A8\" aria-label=\"connection（tcp 连接）的 http 响应头部 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Connection（TCP 连接）的 HTTP 响应头部</h2>\n<blockquote>\n<ul>\n<li><strong>HTTP1.1</strong>一般只有 6 个 TCP 的并发链接,其他的连接会阻塞</li>\n<li><strong>Connection:'close'</strong>   没有长连接，在每一次请求完毕之后关闭 TCP 连接，有新请求时创建一个新的 TCP 连接</li>\n<li><strong>Connection:'keep-alive'</strong>   有长连接，在六个 TCP 连接中如果有一个连接完成数据传输，则将那个 TCP 连接给下一个请求用</li>\n</ul>\n</blockquote>\n<p><a name=\"8c43a26b\"></a></p>\n<h2 id=\"csp（-content-security-policy）的-http-响应头部\" style=\"position:relative;\"><a href=\"#csp%EF%BC%88-content-security-policy%EF%BC%89%E7%9A%84-http-%E5%93%8D%E5%BA%94%E5%A4%B4%E9%83%A8\" aria-label=\"csp（ content security policy）的 http 响应头部 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSP（ Content-Security-Policy:）的 HTTP 响应头部</h2>\n<blockquote>\n<p>作用：</p>\n<ol>\n<li>限制网页资源的获取（从哪里获取，请求发到什么地方）</li>\n<li>限制报告资源获取越权（当获取到不应该获取的资源时候，给网页一些报告）</li>\n</ol>\n</blockquote>\n<blockquote>\n<p>限制方式：</p>\n<ul>\n<li>defalut-src:(限制全局)<br />| http |   只能通过 http 进行加载|<br />|http https|只能通过 http 或者 https 进行加载|<br />| 'self' | 只能通过本域名的进行加载 |<br />|http.baidu.com|可以限定制定的网站进行加载|</li>\n<li>制定资源类型:<br />1.connet-src:请求发现的目标进行限制<br />2.img-src:图片可以从哪些网址加载<br />3.font-src:字体从哪里加载<br />4.script-src:脚本资源从哪里进行加载<br />..................网页可以从外部加载的都可以进行资源的限制</li>\n<li>.form-action   '\\self':对 form 表单提交的 action 进行限制</li>\n<li>report-uri  + 服务器的路径（可以向服务区提交加载错误的信息）</li>\n<li>Content-Security-Policy-Report-Only:（虽然检测到资源不想加载，但还是可以加载）<br />................</li>\n</ul>\n</blockquote>\n<p><a name=\"5a32a534\"></a></p>\n<h2 id=\"数据协商：客户端和服务端协商声明所需要的数据类型（以下是-http-请求头部）\" style=\"position:relative;\"><a href=\"#%E6%95%B0%E6%8D%AE%E5%8D%8F%E5%95%86%EF%BC%9A%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%92%8C%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%8D%8F%E5%95%86%E5%A3%B0%E6%98%8E%E6%89%80%E9%9C%80%E8%A6%81%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%88%E4%BB%A5%E4%B8%8B%E6%98%AF-http-%E8%AF%B7%E6%B1%82%E5%A4%B4%E9%83%A8%EF%BC%89\" aria-label=\"数据协商：客户端和服务端协商声明所需要的数据类型（以下是 http 请求头部） permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>数据协商：客户端和服务端协商声明所需要的数据类型（以下是 HTTP 请求头部）</h2>\n<blockquote>\n<ul>\n<li>Accept:浏览器能够处理的 MIME 类型</li>\n<li>Accept-Charset:浏览器能够显示的字符编码</li>\n<li>Accept-Encoding:浏览器能够处理的压缩编码</li>\n<li>Accept-Language:浏览器当前设置的语言</li>\n<li>Connection:浏览器与服务器之间连接的类型</li>\n<li>Cookie:当前页面设置的任何 cookie</li>\n<li>Host:发出请求页面所在的域</li>\n<li>Referer:发出请求页面的 URI</li>\n<li>User-Agent:浏览器的用户代理字符串</li>\n</ul>\n</blockquote>\n<p><br />延伸阅读：<br />CSP 扩展：<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CSP\">CSP 内容安全策略</a><br />HTTPS（图解 HTTPS，写的挺好的博客）：<a href=\"https://blog.csdn.net/forezp/article/details/89666603\">HTPPS</a><br />HTTP2：<a href=\"https://juejin.im/post/5b88a4f56fb9a01a0b31a67e\">HTTP2 网络质和量的提升</a></p>"},{"id":"1d58f57f-1d9f-596b-ad1f-9f1e410012a8","headings":[{"depth":2},{"depth":2},{"depth":2},{"depth":3},{"depth":3},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"前端大屏可视化","path":"/visualization","tags":["Echarts"],"excerpt":"从零开始的基于echarts的可视化大屏开发.","created":"2021-02-20 21:45","createdPretty":"20 February, 2021","updated":"2021-04-11T00:00:00.000Z","updatedPretty":"20 February, 2021","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBAwT/xAAWAQEBAQAAAAAAAAAAAAAAAAABAgP/2gAMAwEAAhADEAAAAciUTlDCi//EABkQAAEFAAAAAAAAAAAAAAAAAAEAAhARMf/aAAgBAQABBQINFI7P/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGhAAAQUBAAAAAAAAAAAAAAAAAQARICIxMv/aAAgBAQAGPwIXGOuo/wD/xAAbEAACAgMBAAAAAAAAAAAAAAAAAREhEDFRYf/aAAgBAQABPyF5ltng0uCsJnL2f//aAAwDAQACAAMAAAAQ3w//xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQMBAT8QTZv/xAAXEQADAQAAAAAAAAAAAAAAAAABEBEh/9oACAECAQE/EJpX/8QAGxABAAMAAwEAAAAAAAAAAAAAAQARQSExcdH/2gAIAQEAAT8QABcI6M9+QI09AlGxXDg0h1MnZP/Z","aspectRatio":2.232142857142857,"src":"/static/b57b22b6622b0c15a7547a6516702a5b/ba9ae/echarts.jpg","srcSet":"/static/b57b22b6622b0c15a7547a6516702a5b/86d0f/echarts.jpg 125w,\n/static/b57b22b6622b0c15a7547a6516702a5b/520da/echarts.jpg 250w,\n/static/b57b22b6622b0c15a7547a6516702a5b/ba9ae/echarts.jpg 500w,\n/static/b57b22b6622b0c15a7547a6516702a5b/72227/echarts.jpg 750w,\n/static/b57b22b6622b0c15a7547a6516702a5b/5c39c/echarts.jpg 1000w,\n/static/b57b22b6622b0c15a7547a6516702a5b/e2de3/echarts.jpg 1280w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<h2 id=\"技术栈\" style=\"position:relative;\"><a href=\"#%E6%8A%80%E6%9C%AF%E6%A0%88\" aria-label=\"技术栈 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>技术栈</h2>\n<blockquote>\n<p>可视化技术栈：react，echarts，react-for-echarts，sass</p>\n</blockquote>\n<p><a name=\"3gFyR\"></a></p>\n<h2 id=\"开始布局啦！\" style=\"position:relative;\"><a href=\"#%E5%BC%80%E5%A7%8B%E5%B8%83%E5%B1%80%E5%95%A6%EF%BC%81\" aria-label=\"开始布局啦！ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>开始布局啦！</h2>\n<hr>\n<ol>\n<li>设置项目的最小宽度 min-width,确保项目不会过于小导致布局混乱</li>\n<li>横向自适应宽度：采用 ant-design 的栅栏布局</li>\n<li>\n<p>纵向自适应高度，我一开始采用的是 rem 的适应方案，可是发现有如下问题</p>\n<ul>\n<li>rem 方案使用的是<a href=\"https://www.njleonzhang.com/2018/08/15/flexible-pc-full-screen.html\">这篇文章的方案</a>，大家可以看看工程运用那里，我关于 rem 的计算方案并不是采用的该文章的方法，如果你使用的是 vscode，那有款 cssrem 的插件很适合你</li>\n<li>会修改根元素的 font-size，容易导致项目的其他页面字体大小有问题（可通过修改 document.body.fontSize 来解决）</li>\n<li>如果放在大屏上，比如分辨率为 1920*1080 以上，屏幕下方会留白（对 rem 方案的不熟练）</li>\n</ul>\n</li>\n<li>于是，我采用的是 vh 的方案，查看<a href=\"https://caniuse.com/?search=vh\">caniuse</a>，发现兼容性还不错</li>\n</ol>\n<p><a name=\"IF4ph\"></a></p>\n<h2 id=\"可视化组件的背景图片\" style=\"position:relative;\"><a href=\"#%E5%8F%AF%E8%A7%86%E5%8C%96%E7%BB%84%E4%BB%B6%E7%9A%84%E8%83%8C%E6%99%AF%E5%9B%BE%E7%89%87\" aria-label=\"可视化组件的背景图片 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>可视化组件的背景图片</h2>\n<hr>\n<h3 id=\"svg-作为背景图片带来的坑\" style=\"position:relative;\"><a href=\"#svg-%E4%BD%9C%E4%B8%BA%E8%83%8C%E6%99%AF%E5%9B%BE%E7%89%87%E5%B8%A6%E6%9D%A5%E7%9A%84%E5%9D%91\" aria-label=\"svg 作为背景图片带来的坑 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>svg 作为背景图片带来的坑</h3>\n<p>一开始 ued 给我的切的 svg，也没做过可视化，不太懂，也是欣然接受并使用的 svg 作为背景图片，可是发现调整屏幕的分辨率，组件自适应了，但是背景图却有问题，<b>高度和宽度一致是按照一定比例来缩放的。后来发现原来这是 svg 的特性，怪不得很适合用来做 icon。</p>\n<h3 id=\"于是改变背景图方案\" style=\"position:relative;\"><a href=\"#%E4%BA%8E%E6%98%AF%E6%94%B9%E5%8F%98%E8%83%8C%E6%99%AF%E5%9B%BE%E6%96%B9%E6%A1%88\" aria-label=\"于是改变背景图方案 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>于是改变背景图方案</h3>\n<p>使用了<a href=\"https://cloudconvert.com/svg-to-png\">svg-to-png</a>，采用 png 来设置背景图片，并通过调整 css 来实现背景图片覆盖整个组件,完美的实现了背景图跟随组件自适应。</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token atrule\"><span class=\"token rule\">@mixin</span> <span class=\"token function\">background</span><span class=\"token punctuation\">(</span>$urlImg<span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background-image</span><span class=\"token punctuation\">:</span> <span class=\"token url\"><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>$urlImg<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-size</span><span class=\"token punctuation\">:</span> 100% 100%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-repeat</span><span class=\"token punctuation\">:</span> no-repeat<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a name=\"z2ibq\"></a></p>\n<h2 id=\"世界地图并实现地图下钻\" style=\"position:relative;\"><a href=\"#%E4%B8%96%E7%95%8C%E5%9C%B0%E5%9B%BE%E5%B9%B6%E5%AE%9E%E7%8E%B0%E5%9C%B0%E5%9B%BE%E4%B8%8B%E9%92%BB\" aria-label=\"世界地图并实现地图下钻 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>世界地图并实现地图下钻</h2>\n<hr>\n<ol>\n<li>\n<p>首先得把世界地图和各个国家的地图找到，这是一个很庞大的工作。而且以前的地图和现在的地图并非一致，请合理使用（毕竟地球的板块是在不断的运动中的）。</p>\n<ul>\n<li><a href=\"http://datav.aliyun.com/tools/atlas/#&#x26;lat=30.332329214580188&#x26;lng=106.72278672066881&#x26;zoom=3.5\">中国->国、省、市地图 Json</a>（由于有 datav 官方维护，地图数据新）</li>\n<li><a href=\"https://hxkj.vip/demo/echartsMap/\">中国->省、市、区/县地图 Json</a>（地图数据新）</li>\n<li><a href=\"https://github.com/pissang/starbucks/tree/gh-pages/json\">世界->各个国家的地图 Json（包括世界地图）</a>(地图数据旧)</li>\n<li><a href=\"https://geojson-maps.ash.ms/\">世界->各个国家的地图 Json（不包括世界地图）</a>（地图数据较新）</li>\n<li><a href=\"https://img.hcharts.cn/mapdata/\">全世界地图数据集</a>（只更新到了 2015 年的数据）</li>\n<li><a href=\"http://geojson.io/#map=2/20.0/0.0\">当你找到 json 的地图，放上来看看是否一致</a>（权威地图，地图数据新）</li>\n<li>如果不懂 geoJson 规范，可看<a href=\"https://www.oschina.net/translate/geojson-spec\">GeoJSON 格式规范说明</a></li>\n</ul>\n</li>\n<li>找到了地图 json，下钻实现</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 获取地图json注册地图</span>\n<span class=\"token comment\">// map为json所对应的名称（比如：世界地图为world,中国地图为China）</span>\n<span class=\"token function-variable function\">registerMap</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token parameter\">map</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 由于json是存在静态资源中的</span>\n  <span class=\"token keyword\">const</span> path_env <span class=\"token operator\">=</span>\n    process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"development\"</span>\n      <span class=\"token operator\">?</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/public/json/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>map<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.json</span><span class=\"token template-punctuation string\">`</span></span>\n      <span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/assets/public/json/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>map<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.json</span><span class=\"token template-punctuation string\">`</span></span>\n  <span class=\"token keyword\">await</span> <span class=\"token function\">axios</span><span class=\"token punctuation\">(</span>path_env<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      echarts<span class=\"token punctuation\">.</span><span class=\"token function\">registerMap</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"world\"</span><span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">finally</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 使用的是echarts-for-react，this.echartsReact获取到的是该图表实例</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>echartsReact<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchAction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        type<span class=\"token operator\">:</span> <span class=\"token string\">\"restore\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a name=\"OmSJq\"></a></p>\n<h2 id=\"词云\" style=\"position:relative;\"><a href=\"#%E8%AF%8D%E4%BA%91\" aria-label=\"词云 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>词云</h2>\n<blockquote>\n<p>我采用的库是<a href=\"https://github.com/mcc108/TagCloud#readme\">TagCloud</a>,同事推荐的一个小巧，可定制的库，挺好用的。</p>\n</blockquote>\n<p><a name=\"vtI9Q\"></a></p>\n<h2 id=\"自定义一个时钟\" style=\"position:relative;\"><a href=\"#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E6%97%B6%E9%92%9F\" aria-label=\"自定义一个时钟 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>自定义一个时钟</h2>\n<blockquote>\n<ol>\n<li>使用一个组件来显示时钟，保证时钟的渲染在该组件内进行，不影响其他组件</li>\n<li>字体样式采用免费可商用的<a href=\"https://www.uisdc.com/uisdc-first-free-font\">「优设标题黑」</a></li>\n</ol>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> PureComponent <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> dayjs <span class=\"token keyword\">from</span> <span class=\"token string\">\"dayjs\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DataVisual</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">PureComponent</span> <span class=\"token punctuation\">{</span>\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    time<span class=\"token operator\">:</span> <span class=\"token function\">dayjs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"YYYY.MM.DD HH:mm:ss\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n\n  timer <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span>\n\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>timer <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        time<span class=\"token operator\">:</span> <span class=\"token function\">dayjs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"YYYY.MM.DD HH:mm:ss\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>timer<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> display<span class=\"token operator\">:</span> <span class=\"token string\">\"inline-block\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a name=\"2QaXU\"></a></p>\n<h2 id=\"使用font-face\" style=\"position:relative;\"><a href=\"#%E4%BD%BF%E7%94%A8font-face\" aria-label=\"使用font face permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使用@font-face</h2>\n<blockquote>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/@font-face\">MDN</a></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token atrule\"><span class=\"token rule\">@font-face</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">font-family</span><span class=\"token punctuation\">:</span> electronicNumber<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">src</span><span class=\"token punctuation\">:</span> <span class=\"token url\"><span class=\"token function\">url</span><span class=\"token punctuation\">(</span><span class=\"token string url\">\"./font/DS-DIGI-1.ttf\"</span><span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">,</span> <span class=\"token url\"><span class=\"token function\">url</span><span class=\"token punctuation\">(</span><span class=\"token string url\">\"./font//DS-DIGIB-2.ttf\"</span><span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token url\"><span class=\"token function\">url</span><span class=\"token punctuation\">(</span><span class=\"token string url\">\"./font//DS-DIGII-3.ttf\"</span><span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">,</span> <span class=\"token url\"><span class=\"token function\">url</span><span class=\"token punctuation\">(</span><span class=\"token string url\">\"./font/DS-DIGIT-4.ttf\"</span><span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.myFontFace</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">font-family</span><span class=\"token punctuation\">:</span> electronicNumber<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a name=\"suEmG\"></a></p>\n<h2 id=\"使用media（设置响应式）\" style=\"position:relative;\"><a href=\"#%E4%BD%BF%E7%94%A8media%EF%BC%88%E8%AE%BE%E7%BD%AE%E5%93%8D%E5%BA%94%E5%BC%8F%EF%BC%89\" aria-label=\"使用media（设置响应式） permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使用@media（设置响应式）</h2>\n<blockquote>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/CSS/@media\">MDN</a></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token atrule\"><span class=\"token rule\">@mixin</span> <span class=\"token function\">screenMedia</span><span class=\"token punctuation\">(</span>$fontSize<span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">{</span>\n  // 如果小于1440px，则font-size生效\n  // <span class=\"token property\">同理min-width</span><span class=\"token punctuation\">:</span>1440px，如果大于1440px，则font-size生效\n  <span class=\"token atrule\"><span class=\"token rule\">@media</span> screen <span class=\"token keyword\">and</span> <span class=\"token punctuation\">(</span><span class=\"token property\">max-width</span><span class=\"token punctuation\">:</span> 1440px<span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> $fontSize<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.mymMedia</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token atrule\"><span class=\"token rule\">@include</span> <span class=\"token function\">screenMedia</span><span class=\"token punctuation\">(</span>20px<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"最后\" style=\"position:relative;\"><a href=\"#%E6%9C%80%E5%90%8E\" aria-label=\"最后 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>最后</h2>\n<blockquote>\n<p>文章针对前端可视化的大屏展示，根据需求来完善文章，欢迎各位大佬评论哦。<br/>\n如果有需要修改文章的内容，我会改进。<br/>\n附上一张性能图片，没做这方面的优化。<br/> > <a href=\"https://juejin.im/post/6844903552070975495\">使用 chrome performance 查看页面性能</a> <br> > <a href=\"https://web.dev/rail/#goals-and-guidelines\">著名的 RAIL model</a></p>\n</blockquote>"},{"id":"b7b05ae4-f8d0-56db-ad71-47d36764786f","headings":[{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"通过a标签同源和跨域下载服务器文件","path":"/download","tags":["Download"],"excerpt":"通过a标签同源和跨域下载服务器文件.","created":"2021-02-20 21:45","createdPretty":"20 February, 2021","updated":"2021-04-11T00:00:00.000Z","updatedPretty":"20 February, 2021","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAADmklEQVQozw3N2VMadwDA8d/CIoiCyqGJUdQk6lBtm2Smk2nsGKNJvAJRUaygMYJFQAW5bzYCsosgqJwSWREFNFbJ2VGZTNpJm+ShM+lD+//Ut+/T5wuSSGPGXbuPteeCd7fdzSnPtby/7VWw6X2UcbZZ8quPlkLYQUPtppmZc5aeotQvG1V/R5pO0bZztA24lq571JxsRP7144fDyFjY2VA8DhciXVmMtYexMr6rKXd71N6acNSc+0s/r1P/SdR8jTWco83v0BZgVlQbZ9nH+LMvxXfFoxBm4Lx9kX6Dy/ZDnUns2+deLu65ueX8JmFl/obBfwXB72s1xVXuWw/3bLURGFUtiGUo4hW/L2T/PC1kYsaDvXR+L5PP4NntcG6tA3dfizkbAhoybiacLINdCzVnaz5xcl+v1IO5aYbTzMsmPa9zyY9v8me4/Y/oyMmmMhxNZbawE/+VI5S942ZGjXDGQswipIvY1rF3DY3bpjowOUYd5QOHnnt+jAfMw+ticCiB/rWCT6Gu9MrNIzd45aflvJW4g5oyV+w46XEbJa5nhBZY/gU6EPLLBPxSiYiy4XlkXRgYuw3U96n56ZL/EFAI3DmMaXMJJBvTx+2MqPly0lEdtVJCWuaynGaXwQBTfWdT3tAruAszbP+zJ4I+bm87MPbCRTWhsCkPBhPoim89sPbc9xDVMzBTlXORYldUmOaYS0/J4KVvcN/Tv2K4Y1C0nh6lXuxsScd+lHbT4rPlqaA+Ho2v+VD/sjaAdOvmYYuaqp2jG2Rso6xONc0GBaz3YHUgifboFU1Dg5fSYenLzLrXykuHtHjItBsL5LfjeNiDGG8syYFDRzKpyrUKtkrCkAhZwDbb5FC1uqzXh3llo4/L5ZILnuXWlfgdHfiGPoQIN1xjWwG5U9tsWqRgDorLSrdpOepfasf5FUA0ShULaQIBsauTrJTUz4jLHfOkHQfRNANU0mpkqcWuarQuVNlUdS4DO+SmYQgd0V/SSDniISYYH4EG+uD7PdS+HopIUNl9FxL0A83PxCkepJikhqycLFZ+gBK8Ojqiq3RbYYsONskZmsnLU48vzvyye53EH24ReL0E4RD0qBe+10HquA3d+h7wHpAjFtZnHP6UAH4tUSMnLiogmRRSTVNko7ThhyQg6KNMjJC7foIFfEijJC3r6ufFVyZ4ZNFQyeADWDkO8nYoZyGoRQT5FDQ/R1DIoaciaGKYMNhP+B/mm1rnL6s4ygAAAABJRU5ErkJggg==","aspectRatio":1.3297872340425532,"src":"/static/24ad03741385d8cca4ad09d32942ecd9/0853f/download.png","srcSet":"/static/24ad03741385d8cca4ad09d32942ecd9/14156/download.png 125w,\n/static/24ad03741385d8cca4ad09d32942ecd9/d6e47/download.png 250w,\n/static/24ad03741385d8cca4ad09d32942ecd9/0853f/download.png 500w,\n/static/24ad03741385d8cca4ad09d32942ecd9/ce627/download.png 750w,\n/static/24ad03741385d8cca4ad09d32942ecd9/9dbcf/download.png 1000w,\n/static/24ad03741385d8cca4ad09d32942ecd9/87046/download.png 1920w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<h2 id=\"同源下载推荐\" style=\"position:relative;\"><a href=\"#%E5%90%8C%E6%BA%90%E4%B8%8B%E8%BD%BD%E6%8E%A8%E8%8D%90\" aria-label=\"同源下载推荐 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>同源下载(推荐)</h2>\n<ul>\n<li>优点是：通过浏览器的默认行为下载，不会阻塞</li>\n<li>缺点是：必须是同源下载，不过现在都是 webpack 和 nignx 代理，所以推荐这种下载方式</li>\n<li>简单说说：如果响应头添加 <code class=\"language-text\">Content-Disposition</code>，可不使用 <code class=\"language-text\">download</code>，两者都可以阻止浏览器默认打开文件，而不是下载文件的行为，但是前者优先级比后者高</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">/**\n * @description: 从远程url下载文件(同源)\n * @param {string} url -远程的url和参数\n * @param {string} filename -下载到本地的文件名\n */</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">downLoadFile</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">url<span class=\"token operator\">:</span> string<span class=\"token punctuation\">,</span> filename<span class=\"token operator\">:</span> string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> origin <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/api/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>url<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n  <span class=\"token keyword\">const</span> aLink <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">)</span>\n  aLink<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>display <span class=\"token operator\">=</span> <span class=\"token string\">\"none\"</span>\n  aLink<span class=\"token punctuation\">.</span>href <span class=\"token operator\">=</span> origin\n  aLink<span class=\"token punctuation\">.</span>download <span class=\"token operator\">=</span> filename\n  aLink<span class=\"token punctuation\">.</span>target <span class=\"token operator\">=</span> <span class=\"token string\">\"_black\"</span>\n  aLink<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">\"application/octet-stream\"</span> <span class=\"token comment\">// 让浏览器知道是二进制</span>\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>aLink<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 如果不挂载到body上，火狐浏览器会失效</span>\n  aLink<span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">removeChild</span><span class=\"token punctuation\">(</span>aLink<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"跨域下载\" style=\"position:relative;\"><a href=\"#%E8%B7%A8%E5%9F%9F%E4%B8%8B%E8%BD%BD\" aria-label=\"跨域下载 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>跨域下载</h2>\n<ul>\n<li>缺点是：要等 blob 封装完成才能下载，如果想实现前端流式下载，可参考<a href=\"https://segmentfault.com/a/1190000021367378\">fetch 方法</a></li>\n<li>优点是：可以携带 Cookie 和请求体 实现动态下载</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">/**\n * @description: 获取 blob\n * @param {string} url -目标文件地址\n */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">getBlob</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">url<span class=\"token operator\">:</span> string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> xhr <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    xhr<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GET\"</span><span class=\"token punctuation\">,</span> url<span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n    xhr<span class=\"token punctuation\">.</span>responseType <span class=\"token operator\">=</span> <span class=\"token string\">\"blob\"</span>\n    xhr<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>xhr<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>xhr<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    xhr<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">/**\n * @description: 下载blob工具函数\n * @param {string} blob -文件流\n * @param {string} filename -下载的文件名\n */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">saveAs</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">blob<span class=\"token operator\">:</span> Blob<span class=\"token punctuation\">,</span> filename<span class=\"token operator\">:</span> string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>navigator<span class=\"token punctuation\">.</span>msSaveOrOpenBlob<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    navigator<span class=\"token punctuation\">.</span><span class=\"token function\">msSaveBlob</span><span class=\"token punctuation\">(</span>blob<span class=\"token punctuation\">,</span> filename<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> anchor <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> body <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"body\"</span><span class=\"token punctuation\">)</span>\n    anchor<span class=\"token punctuation\">.</span>href <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span><span class=\"token constant\">URL</span><span class=\"token punctuation\">.</span><span class=\"token function\">createObjectURL</span><span class=\"token punctuation\">(</span>blob<span class=\"token punctuation\">)</span>\n    anchor<span class=\"token punctuation\">.</span>download <span class=\"token operator\">=</span> filename\n\n    anchor<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>display <span class=\"token operator\">=</span> <span class=\"token string\">\"none\"</span>\n    body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>anchor<span class=\"token punctuation\">)</span>\n\n    anchor<span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    body<span class=\"token punctuation\">.</span><span class=\"token function\">removeChild</span><span class=\"token punctuation\">(</span>anchor<span class=\"token punctuation\">)</span>\n\n    window<span class=\"token punctuation\">.</span><span class=\"token constant\">URL</span><span class=\"token punctuation\">.</span><span class=\"token function\">revokeObjectURL</span><span class=\"token punctuation\">(</span>anchor<span class=\"token punctuation\">.</span>href<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">/**\n * @description: 用户调用的下载函数\n * @param {string} url -目标文件地址（跨域）\n * @param {string} newFilename -想要保存的文件名称\n */</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">download</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">url<span class=\"token operator\">:</span> string<span class=\"token punctuation\">,</span> newFilename<span class=\"token operator\">:</span> string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> blob<span class=\"token operator\">:</span> Blob <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">getBlob</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span>\n  <span class=\"token function\">saveAs</span><span class=\"token punctuation\">(</span>blob<span class=\"token punctuation\">,</span> newFilename<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"参考\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83\" aria-label=\"参考 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://juejin.im/post/6844903763359039501\">一个很全面的实现前端文件下载的博客</a></li>\n<li><a href=\"https://juejin.im/post/6844904069958467592\">前端下载文件的 5 中方法对比</a></li>\n<li><a href=\"https://www.npmjs.com/package/jszip\">前端 zip 压缩文件/文件夹并下载到本地</a></li>\n</ul>"},{"id":"aaa8f48a-6c34-557c-8451-f912955a9165","headings":[{"depth":2},{"depth":3},{"depth":3},{"depth":2},{"depth":3},{"depth":2}],"frontmatter":{"title":"在React项目中，如何优雅的优化长列表","path":"/virtual-list","tags":["React"],"excerpt":"react的长列表的优化方案-react-virtualized","created":"2021-02-20 21:45","createdPretty":"20 February, 2021","updated":"2021-04-11T00:00:00.000Z","updatedPretty":"20 February, 2021","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAADJElEQVQozwEZA+b8AE1ST3N9daWvpq+3sLzCvtbZ1sjMyLm+ur/Ev8/SztbX1MXJxauyrqOsqba9u7e+u7a8upylonF6dkdMSwBzenWLlIyyubK3vLa6v7vFysa1u7arsa2xtrLa3Nnp6ujR1NG2vLeqsa3M0M2+xMGVoJyUn5uVoJ1gaWYAwMa/xcrEys7Jx8rF0dPQ2t3a0NPQ3N7b4uThiIWBiISA4eLf0tXSyc7Jub66uL68lJ6amaOfprCugo2MAMrPyd/i3uPl4dXX09DTzubn5uzs6+3u7NfX1FVSSkxIP7m6tNPV0MzOyra7uK21s6mxrqatq5+pp3J8ewDBxsDV19Pa3Nnc3tnb3dng4d7n5+Tu7+3T09Bub2ZydGqztbC+w76prqqqsa6Sm5iRnJqYo6OMl5htd3cAsrexvsK9xsjF0dPQ3+De3+De1NfU4ePg5ebjhod+gYJ619jUzdDNoqqmnKakq7a3rrq8j5ydbHp7eoiIAJyjm6itqK6zr7vAvdTW1OHi39LU0c3QzLq8t4KCen5/d7W4s9ba17e9u7S+vq25u7K9v6SsrJihn5iinwB9g32oraXFyMHZ3NfQ1M/KzsjJzcfDxsKlqKGGhn6DhHx6fXbAwr/m6efU2NbS1tXg4+Hh4+DZ29bM0MgARElJVl1beoF8i4+Ki42Hf4F6mp6XqKymsrewm5yUnZ6Yj4+FqqykrK6ns7ezwMO+nJ2Wf4B5l5uSeoF6AEtRTFRcVjM1LSsrJDU0KTo3LDY1LlZXTnt4bXh1aoJ8a2FdUElHPjgxI1BJO1dPQUM6Kz82KEtDNzo2LQAoKSQtLihBPzM6OTAyMy09OS48OzA3Ni1jV0IzMCc0MCc2MykdGxYsKyYxLSVBOS1PRDdFPTErKCEiIBwAJCQgIyQfKSkjMzApTEQ3R0E1WVA+YFZDW1JCYlVBb19Igm1PgGxOfGhMYFM/RT4xPDcsOzguKCgkGxwbACcoIjg2K0tGNl1SP25dRXxpT4FvVHlpT3BiSm1gSW9hSHJgRnxmSIpyUI92U4JsTG5dQ1xRPT05LicnIdMWtzE9/lFiAAAAAElFTkSuQmCC","aspectRatio":1.5060240963855422,"src":"/static/f9f9b2a1795030300fd5b848021e67e9/0853f/land.png","srcSet":"/static/f9f9b2a1795030300fd5b848021e67e9/14156/land.png 125w,\n/static/f9f9b2a1795030300fd5b848021e67e9/d6e47/land.png 250w,\n/static/f9f9b2a1795030300fd5b848021e67e9/0853f/land.png 500w,\n/static/f9f9b2a1795030300fd5b848021e67e9/ce627/land.png 750w,\n/static/f9f9b2a1795030300fd5b848021e67e9/9dbcf/land.png 1000w,\n/static/f9f9b2a1795030300fd5b848021e67e9/87046/land.png 1920w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<h2 id=\"一、虚拟列表优化长列表的原理\" style=\"position:relative;\"><a href=\"#%E4%B8%80%E3%80%81%E8%99%9A%E6%8B%9F%E5%88%97%E8%A1%A8%E4%BC%98%E5%8C%96%E9%95%BF%E5%88%97%E8%A1%A8%E7%9A%84%E5%8E%9F%E7%90%86\" aria-label=\"一、虚拟列表优化长列表的原理 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>一、虚拟列表优化长列表的原理</h2>\n<h3 id=\"优化长列表的原理很简单，基本原理可以一句话概括\" style=\"position:relative;\"><a href=\"#%E4%BC%98%E5%8C%96%E9%95%BF%E5%88%97%E8%A1%A8%E7%9A%84%E5%8E%9F%E7%90%86%E5%BE%88%E7%AE%80%E5%8D%95%EF%BC%8C%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86%E5%8F%AF%E4%BB%A5%E4%B8%80%E5%8F%A5%E8%AF%9D%E6%A6%82%E6%8B%AC\" aria-label=\"优化长列表的原理很简单，基本原理可以一句话概括 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>优化长列表的原理很简单，基本原理可以一句话概括</h3>\n<blockquote>\n<p>用数组保存所有列表元素的位置，只渲染可视区内的列表元素，当可视区滚动时，根据滚动的 offset 大小以及所有列表元素的位置，计算在可视区应该渲染哪些元素。</p>\n</blockquote>\n<h3 id=\"具体实现步骤如下所示\" style=\"position:relative;\"><a href=\"#%E5%85%B7%E4%BD%93%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4%E5%A6%82%E4%B8%8B%E6%89%80%E7%A4%BA\" aria-label=\"具体实现步骤如下所示 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>具体实现步骤如下所示</h3>\n<ol>\n<li>首先确定长列表所在父元素的大小，父元素的大小决定了可视区的宽和高</li>\n<li>确定长列表每一个列表元素的宽和高，同时初始的条件下计算好长列表每一个元素相对于父元素的位置，并用一个数组来保存所有列表元素的位置信息</li>\n<li>首次渲染时，只展示相对于父元素可视区内的子列表元素，在滚动时，根据父元素的滚动的 offset 重新计算应该在可视区内的子列表元素。这样保证了无论如何滚动，真实渲染出的 dom 节点只有可视区内的列表元素。</li>\n<li>假设可视区内能展示 5 个子列表元素，及时长列表总共有 1000 个元素，但是每时每刻，真实渲染出来的 dom 节点只有 5 个。</li>\n<li>补充说明，这种情况下，父元素一般使用 position：relative，子元素的定位一般使用：position：absolute 或 sticky</li>\n</ol>\n<p><a name=\"PXTg1\"></a></p>\n<h2 id=\"二、通过-react-virtualized-来优化长列表\" style=\"position:relative;\"><a href=\"#%E4%BA%8C%E3%80%81%E9%80%9A%E8%BF%87-react-virtualized-%E6%9D%A5%E4%BC%98%E5%8C%96%E9%95%BF%E5%88%97%E8%A1%A8\" aria-label=\"二、通过 react virtualized 来优化长列表 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>二、通过 react-virtualized 来优化长列表</h2>\n<h3 id=\"react-virtualized-的基础组件包含：\" style=\"position:relative;\"><a href=\"#react-virtualized-%E7%9A%84%E5%9F%BA%E7%A1%80%E7%BB%84%E4%BB%B6%E5%8C%85%E5%90%AB%EF%BC%9A\" aria-label=\"react virtualized 的基础组件包含： permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>react-virtualized 的基础组件包含：</h3>\n<ul>\n<li>Grid：用于优化构建任意网状的结构，传入一个二维的数组，渲染出类似棋盘的结构。</li>\n<li>List：List 是基于 Grid 来实现的，但是是一个维的列表，而不是网状。</li>\n<li>Table：Table 也是基于 Grid 来实现，表格具有固定的头部，并且可以在垂直方向上滚动</li>\n<li>Masonry：同样可以在水平方向，也可以在垂直方向滚动，不同于 Grid 的是可以自定义每个元素的大小，或者子元素的大小也可以是动态变化的</li>\n<li>Collection：类似于瀑布流的形式，同样可以水平和垂直方向滚动。</li>\n</ul>\n<p><br />值得注意的是这些基础组件都是继承于 React 中的 PureComponent，因此当 state 变化的时候，只会做一个浅比较来确定重新渲染与否 。<br />\n<br />除了这几个基础组件外，react-virtualized 还提供了几个高阶组件，比如 ArrowKeyStepper 、AutoSizer、CellMeasurer、InfiniteLoader 等，本文具体介绍常用的 AutoSizer、CellMeasurer 和 InfiniteLoader。<br /></p>\n<ul>\n<li>AutoSizer：使用于一个子元素的情况，通过 AutoSizer 包含的子元素会根据父元素 Resize 的变化，自动调节该子元素的可视区的宽度和高度，同时调节的还有该子元素可视区真实渲染的 dom 元素的数目。(子元素会随父元素的长、宽自适应)</li>\n<li>CellMeasurer：这个高阶组件可以动态的改变子元素的高度，适用于提前不知道长列表中每一个子元素高度的情况。（会损耗性能，不建议使用）</li>\n<li>InfiniteLoader：这个高阶组件用于 Table 或者 List 的无限滚动，适用于滚动时异步请求等情况。（滚动加载）</li>\n</ul>\n<p><br />作者：yuxiaoliang<br />链接：<a href=\"https://juejin.cn/post/6844903729460674567\">https://juejin.cn/post/6844903729460674567</a><br />来源：掘金<br />著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。<br />\n<br /></p>\n<p><a name=\"t7LD9\"></a></p>\n<h2 id=\"三、vlist-的实际使用\" style=\"position:relative;\"><a href=\"#%E4%B8%89%E3%80%81vlist-%E7%9A%84%E5%AE%9E%E9%99%85%E4%BD%BF%E7%94%A8\" aria-label=\"三、vlist 的实际使用 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>三、Vlist 的实际使用</h2>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">List</span></span> <span class=\"token attr-name\">loading</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>loading<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">bordered</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token punctuation\">{</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n  // antd的List组件\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> height<span class=\"token operator\">:</span> <span class=\"token number\">420</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token punctuation\">{</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    // vlist父元素的高度\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">AutoSizer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      // 可根据父元素的高度动态计算出列表项的高度\n      </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> width<span class=\"token punctuation\">,</span> height <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>VList\n          width<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>width<span class=\"token punctuation\">}</span> <span class=\"token comment\">// 列表的宽度</span>\n          height<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>height<span class=\"token punctuation\">}</span> <span class=\"token comment\">// 列表的高度</span>\n          rowCount<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>pocList<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">}</span> <span class=\"token comment\">// 列表项数</span>\n          overscanRowCount<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">7</span><span class=\"token punctuation\">}</span> <span class=\"token comment\">// 不在视窗范围上下现实的列表项数</span>\n          rowHeight<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">60</span><span class=\"token punctuation\">}</span> <span class=\"token comment\">// 列表项的高</span>\n          rowRenderer<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>renderItem<span class=\"token punctuation\">}</span> <span class=\"token comment\">// 列表项渲染方式</span>\n          noRowsRenderer<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n            <span class=\"token comment\">// 空数据的渲染方式</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Empty</span></span>\n              <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n                position<span class=\"token operator\">:</span> <span class=\"token string\">\"absolute\"</span><span class=\"token punctuation\">,</span>\n                top<span class=\"token operator\">:</span> <span class=\"token string\">\"50%\"</span><span class=\"token punctuation\">,</span>\n                left<span class=\"token operator\">:</span> <span class=\"token string\">\"50%\"</span><span class=\"token punctuation\">,</span>\n                transform<span class=\"token operator\">:</span> <span class=\"token string\">\"translate(-60%,-50%)\"</span><span class=\"token punctuation\">,</span>\n              <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n            <span class=\"token punctuation\">/></span></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">AutoSizer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">List</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// key：数组行中的唯一值</span>\n<span class=\"token comment\">// style: vlist的列表项的定位样式和默认样式</span>\n<span class=\"token comment\">// parent: 参考父级Grid元素（使用CellMeasurer组件要注意：该组件会不断估算每个</span>\n<span class=\"token comment\">// 列表项的最佳高度，所以会带来一定的性能损耗，个人建议不要使用该组件，可以像我一样将</span>\n<span class=\"token comment\">// 列表项的高度rowHeight写死）</span>\n<span class=\"token comment\">// index: 被渲染数据的index索引</span>\n<span class=\"token function-variable function\">renderItem</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> index<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">,</span> style<span class=\"token operator\">:</span> styles <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> pocList <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state\n  <span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> pocList<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">||</span> <span class=\"token string\">\"\"</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">List.Item</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Tooltip</span></span> <span class=\"token attr-name\">title</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Checkbox</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>pocList<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>poc_id<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token punctuation\">{</span>React<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string\">\"span\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n            <span class=\"token operator\">...</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">highLightValue</span><span class=\"token punctuation\">(</span><span class=\"token function\">ellipsis</span><span class=\"token punctuation\">(</span>pocList<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span> <span class=\"token number\">46</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Checkbox</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Tooltip</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">List.Item</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><br />其他优秀的社区库：</p>\n<ol>\n<li><a href=\"https://ali-react-table.js.org/docs/\">阿里的 ant-table 的丰富 api 虚拟表格</a></li>\n<li><a href=\"https://github.com/ctq123/ant-virtual-table\">兼容性比较好的虚拟表格</a></li>\n</ol>"},{"id":"18de3d03-69d1-503d-8043-6f22ade61d64","headings":[{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":3},{"depth":2}],"frontmatter":{"title":"react性能优化之代码分割","path":"/code-spliting","tags":["React"],"excerpt":"react性能优化之代码分割动态导入","created":"2021-02-20 21:45","createdPretty":"20 February, 2021","updated":"2021-04-11T00:00:00.000Z","updatedPretty":"20 February, 2021","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAADJElEQVQozwEZA+b8AEl3lk5+oWqUtpCrxp6wyKO0yaS2zIupx3qgwmSRt0uCqlSFq6a4zpOpwouhvZGiwEhvmStagyhUeihNbwBCbY1Hd5lPfqBqkLCWrMOywtS3yduDqMlxm79jkrdWhqtylrWZrMStucuirsSOoL1jgalNcZtJaY9MaY4AKUdeOF59a4ypi6W9k63CeZ25aZa4VIuxVYitWoirZIipb4yqnau8s7jGeIqnXnaaVXGXU3GXSWeMNVFyAERbcFRuh4ietbG/zai4x3STrFmDokl3lk12lGaFno6crqSosLOztqakp4aJlYqQnqCfq3V4iWJqgVlgdQCSo7Oyu8fJztTV2dzS1trO09jFzNO5wMekrLaVnqaho6e4s67a0cjr4djm29Lr49z07enbz8jDta7Kv7sAn6mwsbi9wMPFycvM09PT397b4N/b393Z3dzZ19TP0svF08rCw7mxwriu0MfBx7uxyruwyryzsqeitq2qAE5ZYlpodXGCkn6OnIWUooaXpYSYqISWpnmFkH2FjoCDiXt6fGNhZFJTVVtbXV9gX2xpZ11bXVNXXEdJTgAnMThBUF1KV2NXYWpnbHNlcn1icoFpe45bbIBNV2Y2OkFFSU9ZX2dYXWRLU1pHTVNNUVg3O0EsLjI7QUgAKzU8PUhRNz0/QUhKS05PR0hIU15jSFBWX216ZnaKNTpBMzc8Q0hNVl1jV1xhRktRNTc5GhobFxcXFRYVACAmKy02PUlUXGFudltoblJcYGZxd2Vrb11gYFxka1lhaEJFRjk6OVlbXmtucVJXXFBVW0JHTTc9RS0zOAAaHSAoLzQzO0I6Q0tGT1RgaXB2f4ZweoBye4F7goaFiY1MS00uMDQ+QUQ8QEVIS09oam9dYGhIUFo5Q00AHSAjICUqKS81QkZOXF9lbGxyY2JpYmRpaGpvdnd8b21xSElNU1VaY2RpW1pef3p7rqejmZKRcW5xTk1UABgZHBocIBweISEiJDU1OTs6PkxKUE1MUFFPU1hUWFxaXV5dYWxrboB/gYaDhJOPjpCNjYiCg3NtcVpUWyR3cmNMxJPGAAAAAElFTkSuQmCC","aspectRatio":1.5060240963855422,"src":"/static/194ac1e7e3b229f5476b4f73c92ffbdf/0853f/sea.png","srcSet":"/static/194ac1e7e3b229f5476b4f73c92ffbdf/14156/sea.png 125w,\n/static/194ac1e7e3b229f5476b4f73c92ffbdf/d6e47/sea.png 250w,\n/static/194ac1e7e3b229f5476b4f73c92ffbdf/0853f/sea.png 500w,\n/static/194ac1e7e3b229f5476b4f73c92ffbdf/ce627/sea.png 750w,\n/static/194ac1e7e3b229f5476b4f73c92ffbdf/9dbcf/sea.png 1000w,\n/static/194ac1e7e3b229f5476b4f73c92ffbdf/87046/sea.png 1920w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<h2 id=\"引言\" style=\"position:relative;\"><a href=\"#%E5%BC%95%E8%A8%80\" aria-label=\"引言 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>引言</h2>\n<blockquote>\n<p>衡量网站的性能的指标有很多，其中有项重要的指标就是网站的首屏时间，而代码分割却是优化首屏时间最通用的方法</p>\n</blockquote>\n<h2 id=\"三种通用的代码拆分方法（基于-webpack）\" style=\"position:relative;\"><a href=\"#%E4%B8%89%E7%A7%8D%E9%80%9A%E7%94%A8%E7%9A%84%E4%BB%A3%E7%A0%81%E6%8B%86%E5%88%86%E6%96%B9%E6%B3%95%EF%BC%88%E5%9F%BA%E4%BA%8E-webpack%EF%BC%89\" aria-label=\"三种通用的代码拆分方法（基于 webpack） permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>三种通用的代码拆分方法（基于 webpack）</h2>\n<ol>\n<li>入口点：使用<a href=\"https://webpack.js.org/configuration/entry-context\"><code class=\"language-text\">entry</code></a>配置手动拆分代码</li>\n<li>防止重复：使用<a href=\"https://webpack.js.org/plugins/split-chunks-plugin/\"><code class=\"language-text\">SplitChunksPlugin</code></a>重复数据删除和拆分块</li>\n<li>动态导入：通过模块内的内联函数调用拆分代码</li>\n</ol>\n<h2 id=\"动态导入（react-loadable）有以下概念\" style=\"position:relative;\"><a href=\"#%E5%8A%A8%E6%80%81%E5%AF%BC%E5%85%A5%EF%BC%88react-loadable%EF%BC%89%E6%9C%89%E4%BB%A5%E4%B8%8B%E6%A6%82%E5%BF%B5\" aria-label=\"动态导入（react loadable）有以下概念 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>动态导入（<strong>react-loadable</strong>）有以下概念</h2>\n<blockquote>\n<ol>\n<li>动态导入的组件自动进行性能优异的代码分割</li>\n<li><strong>所支持的是组件的动态导入，而不是路由的动态导入</strong></li>\n<li>基本思想是组件的按需加载</li>\n<li>注意：要在 react 中使用 import()，需要安装@babel/plugin-syntax-dynamic-import 插件，并在 babel 配置中引入</li>\n<li>注意：import 的路径是相对路径，不能添加绝对路径</li>\n<li>注意：要使用魔法注释需要配置（webpack 的 SplitChunkPlugin 插件，webpack 默认已配置，开箱即用）</li>\n<li>react 中的动态导入还有：react 原生 React.lazy（v16.6），原生 Suspense，库 Loadable Component</li>\n</ol>\n</blockquote>\n<p><a name=\"xRYgO\"></a></p>\n<h2 id=\"实现\" style=\"position:relative;\"><a href=\"#%E5%AE%9E%E7%8E%B0\" aria-label=\"实现 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>实现</h2>\n<h3 id=\"配合-react-router-dom-实现-react-的路由组件按需加载\" style=\"position:relative;\"><a href=\"#%E9%85%8D%E5%90%88-react-router-dom-%E5%AE%9E%E7%8E%B0-react-%E7%9A%84%E8%B7%AF%E7%94%B1%E7%BB%84%E4%BB%B6%E6%8C%89%E9%9C%80%E5%8A%A0%E8%BD%BD\" aria-label=\"配合 react router dom 实现 react 的路由组件按需加载 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>配合 react-router-dom 实现 react 的路由组件按需加载</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> Loadable <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-loadable\"</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// 懒加载路由</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">AsyncComponent</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">component</span> <span class=\"token operator\">=></span>\n  <span class=\"token function\">Loadable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    loader<span class=\"token operator\">:</span> lazyLoad<span class=\"token punctuation\">[</span>component<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 加载promise来加载组件</span>\n    loading<span class=\"token operator\">:</span> MyLoadingComponent<span class=\"token punctuation\">,</span> <span class=\"token comment\">// 当加载进行中或者错误时加载的组件</span>\n    delay<span class=\"token operator\">:</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 加载loading组件之前的延迟，防止闪屏</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> lazyLoad <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">home</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n    <span class=\"token comment\">// webpackChunkName（代码分割后的代码块名）</span>\n  \t<span class=\"token comment\">// 添加webpackPrefetch：（未来可能需要的资源）</span>\n  \t<span class=\"token comment\">//   这将导致将&lt;link rel=\"prefetch\" href=\"home.js\">其附加在页面的开头</span>\n    <span class=\"token comment\">//   这将指示浏览器在空闲时间预取home.js文件</span>\n    <span class=\"token comment\">// 不配置预加载和预取提取则按需加载</span>\n    <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token comment\">/* webpackChunkName: \"home\" */</span> <span class=\"token comment\">/* webpackPrefetch: true */</span> <span class=\"token string\">'./home'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">detail</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  \t<span class=\"token comment\">// webpackPreload（当前导航期间可能需要的资源）</span>\n    <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token comment\">/* webpackChunkName: \"detail\" /* webpackPreload: true */</span>  <span class=\"token operator\">*</span><span class=\"token operator\">/</span> <span class=\"token string\">'./detail'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Switch</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/app/home<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">AsyncComponent</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"home\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/app/detail<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">AsyncComponent</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"detail\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Switch</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h2 id=\"参考\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83\" aria-label=\"参考 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://webpack.js.org/guides/code-splitting/\">webpack 代码分割官网</a></li>\n<li><a href=\"https://github.com/jamiebuilds/react-loadable#preloading\">react-loadable 仓库</a></li>\n<li><a href=\"https://webpack.js.org/api/module-methods/#import-1\">import()文档</a></li>\n<li><a href=\"https://zh-hans.reactjs.org/docs/code-splitting.html\">react 的 lazy 代码分割</a></li>\n</ul>"},{"id":"a9aa73bc-bcc9-5ce3-b59d-b2310cd8d916","headings":[{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"深入浅出nginx","path":"/nginx","tags":["Kubernetes"],"excerpt":"极客时间的nignx核心，个人学习笔记","created":"2021-02-20 21:45","createdPretty":"20 February, 2021","updated":"2021-04-11T00:00:00.000Z","updatedPretty":"20 February, 2021","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAADGElEQVQozw3S609ScQDG8fOftDYLOedwfufyOzfO4cABuYZBmJioIAiKFmlXzFyiYJGlpM2KWelsNnNlWStrWZlbs5VdzGzrslrpuqz1pllb7+J59X31vPogAOhwHKVJHUsTOh0GSB1JEhzEICTMqlK0cWMxhgEKCBKn2mTVYRJNCifxvJ4XJQa5nbdv8ThQjUZkAIlj64u0IgslnnUozES6rqLcG/GU7A17DFZJdRhls1GxqrJZlRVBURhk6XLZwoOsxEGOAVV+a+5IPJeNRcPOaG1pf8x9Jhlr87uG2usjtVuiQXdlhUswiIxAywbGpPLIowtNfz/PPJ7puzXZkx8InR2sPtkXiIT0namy3KFYc6V3oH3nnoS/LuyOx7wenyUWqz50YM/x7gMTJ+qQldmDv798/Pvxzr/Vdw+n07ub7Tu2+8I1UqSaS4TV+oC3tdHf0VpVUbOpvzd17lTf1NjZ4Xxudfnl4rUk8mHSu7bybG1l9dfrJz/fzX57Mz918WRNFUzU821xYzIcHMqkBw4HurprJ0Zy7+fuLcxM92ePnc5m2nfFkRej7h9P8i+u9C7eGF779Gr50c2e7vj4SLaxQe1pc+0PWAa7Ws6fD27f5QqFfMPdnddPZ2ZHk/UBO0GjyNyF5vlB9v6g8+n4jrmR0MJ0/uuHN9/fL6dbtzZFqESD6veDnUlhk89EMzIkQchjyyQ8zZHSQLkbWbp79dqJxFgqsDBaeqmLaImri/Mzfz4tv72ZWro3/vz+lH+b3uTaIEgUQ4ssR0ABLTHLwUp3pc+JtAQ2D6cahvbqp3vF/n10uUcTDcKxnobO6NbD+3ZnOlpYETIcWjBQ4MRAQAAcxYspVksyWqTWDc90+INexiJjEq+1mNjGmMvnpQUBiPw6Tih22EWnTQ8LF5AAFEVBFlCFIHiWQJxmnivAxLW4DqMILceSiSbn0XRVmZezlOhsVuC2806rXpShpIiqkdMbaE7CCqJJgCGQRDkapwBm0lMmiS7SaLT4BlHUmlUMxVDIErYSUpJpyVAwSKmKYDCykC9GC8PQ/2GFKYYlhDnDAAAAAElFTkSuQmCC","aspectRatio":1.5060240963855422,"src":"/static/6c11eac41632db7b79638d863740f3ab/0853f/easter.png","srcSet":"/static/6c11eac41632db7b79638d863740f3ab/14156/easter.png 125w,\n/static/6c11eac41632db7b79638d863740f3ab/d6e47/easter.png 250w,\n/static/6c11eac41632db7b79638d863740f3ab/0853f/easter.png 500w,\n/static/6c11eac41632db7b79638d863740f3ab/ce627/easter.png 750w,\n/static/6c11eac41632db7b79638d863740f3ab/9dbcf/easter.png 1000w,\n/static/6c11eac41632db7b79638d863740f3ab/87046/easter.png 1920w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<p><a name=\"a64a14c8\"></a></p>\n<h2 id=\"1-热部署：升级-nginx-到新的版本\" style=\"position:relative;\"><a href=\"#1-%E7%83%AD%E9%83%A8%E7%BD%B2%EF%BC%9A%E5%8D%87%E7%BA%A7-nginx-%E5%88%B0%E6%96%B0%E7%9A%84%E7%89%88%E6%9C%AC\" aria-label=\"1 热部署：升级 nginx 到新的版本 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 热部署：升级 nginx 到新的版本</h2>\n<ul>\n<li>也就是用新的 nginx 命令替换老的 nginx 命令即可，注意做好备份</li>\n<li>kill -RSR2  pid(nginx 的进程号) :发送消息给老的 master 进程，让后面的接口平滑的过渡到新的 nginx 进程中</li>\n<li>kill -WINCH pid :请优雅的关闭老的 woker 进程</li>\n<li>老的 master 进程会保留，可以重新 reload，保证可以版本回退</li>\n</ul>\n<p><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 748px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9533848abd9c6a4f1c74c652c3cce59a/2551b/nginx1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABAACBv/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAWvG45OxH//EABYQAQEBAAAAAAAAAAAAAAAAAAQ0AP/aAAgBAQABBQIk+fUObNo//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGBAAAgMAAAAAAAAAAAAAAAAAAAEDEHH/2gAIAQEABj8CjymR5TP/xAAdEAAABQUAAAAAAAAAAAAAAAAAARFRsRAhYYHw/9oACAEBAAE/IdpcgjcJssUDkzV//9oADAMBAAIAAwAAABCwD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAQABAwUAAAAAAAAAAAAAAAEAESGhQVGBsfH/2gAIAQEAAT8QsU9SXwS8xquE04zvabTAJ//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"nginx1\"\n        title=\"nginx1\"\n        src=\"/static/9533848abd9c6a4f1c74c652c3cce59a/2551b/nginx1.jpg\"\n        srcset=\"/static/9533848abd9c6a4f1c74c652c3cce59a/f93b5/nginx1.jpg 300w,\n/static/9533848abd9c6a4f1c74c652c3cce59a/b4294/nginx1.jpg 600w,\n/static/9533848abd9c6a4f1c74c652c3cce59a/2551b/nginx1.jpg 748w\"\n        sizes=\"(max-width: 748px) 100vw, 748px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br /></p>\n<p><a name=\"fea20a4b\"></a></p>\n<h2 id=\"2-root-和-alias-的区别：\" style=\"position:relative;\"><a href=\"#2-root-%E5%92%8C-alias-%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9A\" aria-label=\"2 root 和 alias 的区别： permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. root 和 alias 的区别：</h2>\n<ul>\n<li>root 会受 location 后面的字符串所影响，访问 location 路径会将 location 的路径添加到 root 后返回结合的路径资源给用户，</li>\n<li>而 alias 是不受字符串的影响，访问 location 就是访问的 alias 路径的资源</li>\n</ul>\n<p><a name=\"d1415702\"></a></p>\n<h2 id=\"3-nginx-的进程间是通过信号的方式进行通信\" style=\"position:relative;\"><a href=\"#3-nginx-%E7%9A%84%E8%BF%9B%E7%A8%8B%E9%97%B4%E6%98%AF%E9%80%9A%E8%BF%87%E4%BF%A1%E5%8F%B7%E7%9A%84%E6%96%B9%E5%BC%8F%E8%BF%9B%E8%A1%8C%E9%80%9A%E4%BF%A1\" aria-label=\"3 nginx 的进程间是通过信号的方式进行通信 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Nginx 的进程间是通过信号的方式进行通信</h2>\n<p><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 748px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/246a2bbf354ead9127689634cf59c462/2551b/nginx2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABAACBv/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAWtO05GzH//EABkQAAMAAwAAAAAAAAAAAAAAAAAENAIREv/aAAgBAQABBQJXHa/A/SnKO0f/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAbEAABBAMAAAAAAAAAAAAAAAAAAQIDcRAxkf/aAAgBAQAGPwKOjbui0R1hT//EAB0QAAEEAgMAAAAAAAAAAAAAAAEAESFhEDGBsfD/2gAIAQEAAT8hf5J5WtFGRF4dL0Xl/wD/2gAMAwEAAgADAAAAEJgP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8Qp//EABsQAQEAAgMBAAAAAAAAAAAAAAERAKEQITGx/9oACAEBAAE/ECFYPog9ZQDdwAYAbbYM3n1xoGf/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"nginx2\"\n        title=\"nginx2\"\n        src=\"/static/246a2bbf354ead9127689634cf59c462/2551b/nginx2.jpg\"\n        srcset=\"/static/246a2bbf354ead9127689634cf59c462/f93b5/nginx2.jpg 300w,\n/static/246a2bbf354ead9127689634cf59c462/b4294/nginx2.jpg 600w,\n/static/246a2bbf354ead9127689634cf59c462/2551b/nginx2.jpg 748w\"\n        sizes=\"(max-width: 748px) 100vw, 748px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br /></p>\n<p><a name=\"910b6c3b\"></a></p>\n<h2 id=\"4指令合并规则\" style=\"position:relative;\"><a href=\"#4%E6%8C%87%E4%BB%A4%E5%90%88%E5%B9%B6%E8%A7%84%E5%88%99\" aria-label=\"4指令合并规则 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.指令合并规则</h2>\n<p><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 748px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f4f04e57b8c51921875c3c40d8f432c4/2551b/nginx3.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEBv/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAb6U0GWFh//EABwQAAEDBQAAAAAAAAAAAAAAAAQAATQCAxEkM//aAAgBAQABBQIRtWnLo+SHFtovt//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EAB0QAAICAQUAAAAAAAAAAAAAAAABAhFxAzFRcoH/2gAIAQEABj8C08DuT3HXBDA+zPD/xAAeEAEAAQMFAQAAAAAAAAAAAAABABExYSFBUXHwsf/aAAgBAQABPyGqgo8O5mgNohdCUW6nuzLPTWfBP//aAAwDAQACAAMAAAAQiw//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAdEAACAgEFAAAAAAAAAAAAAAABEQAhMRBBUaGx/9oACAEBAAE/EFWog0u3IiWDHQwBraH4FJJiOy9a8d//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"nginx3\"\n        title=\"nginx3\"\n        src=\"/static/f4f04e57b8c51921875c3c40d8f432c4/2551b/nginx3.jpg\"\n        srcset=\"/static/f4f04e57b8c51921875c3c40d8f432c4/f93b5/nginx3.jpg 300w,\n/static/f4f04e57b8c51921875c3c40d8f432c4/b4294/nginx3.jpg 600w,\n/static/f4f04e57b8c51921875c3c40d8f432c4/2551b/nginx3.jpg 748w\"\n        sizes=\"(max-width: 748px) 100vw, 748px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br /></p>\n<p><a name=\"b64cd4bf\"></a></p>\n<h2 id=\"5nginx-11-个阶段：\" style=\"position:relative;\"><a href=\"#5nginx-11-%E4%B8%AA%E9%98%B6%E6%AE%B5%EF%BC%9A\" aria-label=\"5nginx 11 个阶段： permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.Nginx 11 个阶段：</h2>\n<ul>\n<li>除了 http 过滤模块和提供变量的模块外，其余模块必须经过这 11 个阶段</li>\n<li>一个阶段如果不把请求向下传递，下面的阶段是不会执行的</li>\n<li>前一个阶段的模块可以传递给他下下个阶段模块进行处理，那么下个阶段模块也就没法执行</li>\n</ul>\n<blockquote>\n<ul>\n<li>post_read:在读取了 http 头部后，在加工头部前</li>\n<li>server_rewrite:</li>\n<li>find_config:进行 location 的匹配</li>\n<li>post_rewrite:在 rewrite 之后</li>\n<li>pre_access:在访问到请求之前做连接或者请求数量的限制</li>\n<li>access:在访问时，比如说身份验证</li>\n<li>post_access:</li>\n<li>pre_content:发送响应之前执行的操作,比如让一个请求产生多个子请求</li>\n<li>content:响应阶段，比如反向代理</li>\n<li>log:日志记录阶段</li>\n</ul>\n</blockquote>\n<p><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 748px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d6ff5f16b0b18f1efabb4b1775b60e00/2551b/nginx4.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGgAAAQUBAAAAAAAAAAAAAAAAAAECAwQFBv/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAFIdm6nFjhf/8QAHBAAAQMFAAAAAAAAAAAAAAAAAQIDBAASIzM0/9oACAEBAAEFAmlYVOu3ySSuHy1L3f/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABYRAAMAAAAAAAAAAAAAAAAAAAEQIf/aAAgBAgEBPwERf//EAB8QAAIBAgcAAAAAAAAAAAAAAAABAgMQERIhMTJxgf/aAAgBAQAGPwKOr4jwlITe+VFPq3h//8QAHBAAAwABBQAAAAAAAAAAAAAAAAERgRAhYbHw/9oACAEBAAE/IYLnNkyLoSVGO1qPB7OdOof/2gAMAwEAAgADAAAAENTP/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAh/9oACAEDAQE/EDV//8QAFxEBAAMAAAAAAAAAAAAAAAAAARAhMf/aAAgBAgEBPxC5dj//xAAeEAABBAEFAAAAAAAAAAAAAAABABEhMXEQUWGhsf/aAAgBAQABPxAsWQg9r4J5fEDOEQgZEsncu49aWq//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"nginx4\"\n        title=\"nginx4\"\n        src=\"/static/d6ff5f16b0b18f1efabb4b1775b60e00/2551b/nginx4.jpg\"\n        srcset=\"/static/d6ff5f16b0b18f1efabb4b1775b60e00/f93b5/nginx4.jpg 300w,\n/static/d6ff5f16b0b18f1efabb4b1775b60e00/b4294/nginx4.jpg 600w,\n/static/d6ff5f16b0b18f1efabb4b1775b60e00/2551b/nginx4.jpg 748w\"\n        sizes=\"(max-width: 748px) 100vw, 748px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br />\n<br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 748px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/77ca5acb74ec4696397323dd0b9730ce/2551b/nginx5.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQDBQb/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAFqwUfMkRh//8QAGRABAAIDAAAAAAAAAAAAAAAABDM0ADFB/9oACAEBAAEFAjVt4+yODq5v/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGxAAAgEFAAAAAAAAAAAAAAAAAHEBAgMQIYH/2gAIAQEABj8Cto0SihY4f//EAB8QAQACAAYDAAAAAAAAAAAAAAEAESExQWFxscHh8P/aAAgBAQABPyFFFX7RwGqIWESmXE+/eeE6E//aAAwDAQACAAMAAAAQuM//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAcEAEAAgIDAQAAAAAAAAAAAAABABEhYRAxobH/2gAIAQEAAT8Qcs0t1tGmV2zTqIqFKrHCe/8AfN3/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"nginx5\"\n        title=\"nginx5\"\n        src=\"/static/77ca5acb74ec4696397323dd0b9730ce/2551b/nginx5.jpg\"\n        srcset=\"/static/77ca5acb74ec4696397323dd0b9730ce/f93b5/nginx5.jpg 300w,\n/static/77ca5acb74ec4696397323dd0b9730ce/b4294/nginx5.jpg 600w,\n/static/77ca5acb74ec4696397323dd0b9730ce/2551b/nginx5.jpg 748w\"\n        sizes=\"(max-width: 748px) 100vw, 748px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br /></p>\n<p><a name=\"0cd0d167\"></a></p>\n<h2 id=\"6-error_page-和-rewrite-阶段的-return-指令的区别：\" style=\"position:relative;\"><a href=\"#6-error_page-%E5%92%8C-rewrite-%E9%98%B6%E6%AE%B5%E7%9A%84-return-%E6%8C%87%E4%BB%A4%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9A\" aria-label=\"6 error_page 和 rewrite 阶段的 return 指令的区别： permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. error_page 和 rewrite 阶段的 return 指令的区别：</h2>\n<ul>\n<li>return ：返回相应的状态码和注释</li>\n<li>error_page：根据相应的状态码返回相应的页面</li>\n<li>return 指令执行了 error_page 指令就不会执行<br />\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 722px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2b1bbf028a2078505765b4f690042eb4/d44c9/nginx6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABdElEQVQoz4VSXUvDMBTd/xdffBFx+OKDMBH8ANEHXwRhwvYo+2B07bp17dqmbdo0aZKmHjc/Npx4uYTkJveec89NqyiY4648Px5N5g9P/Sim3jJeLKNubzAYu03TGGOajW02mR/aI8t20jRtlWWZUZYXZRRnlu0XjNOcIeIuwjDOamO0rpttU6JiQGRSyhbnvNm1DRQrRfv8sXP9fHx2f3X30uyzlhD8i5HZvqgq2e0NX/tjrNNZsD8ZyHVt8BT0wDMmlCSUC4lSSvIk8cKIoqnvlvckp1mhtbZsz7KXaF4pjSClRZIky4BAiEqqP5EBKHAvdVWpGue1TnDGRLAijhugaLBK5G6Jz2SS5JxXeAqd4VJqA+SckZS6ixUiQkgAoPT28Pao/TMUpYuCu/MQY0uzHPOPSeb50dTxgfdPMtjneWnP/LehA86D8WxieRHJFj45PDi6vOh8fBLQUEqZ32quwaEFZi4rhRUORRA/PWnfXt+8A/nvc7aMFnjSAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"nginx6\"\n        title=\"nginx6\"\n        src=\"/static/2b1bbf028a2078505765b4f690042eb4/d44c9/nginx6.png\"\n        srcset=\"/static/2b1bbf028a2078505765b4f690042eb4/5a46d/nginx6.png 300w,\n/static/2b1bbf028a2078505765b4f690042eb4/0a47e/nginx6.png 600w,\n/static/2b1bbf028a2078505765b4f690042eb4/d44c9/nginx6.png 722w\"\n        sizes=\"(max-width: 722px) 100vw, 722px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 722px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/600b6b3317b75ca09bc12d8268700df0/d44c9/nginx7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABfklEQVQoz32S7U6DMBSGuXUTE2/DzOgFmOwW/LEf/jBz6KbuQ7YBBfrdUgrMF5hmajJy2pQe3p7nvDQwxmS5KKgI55uHSaiUTTNGMj55nE/DVZZzxhUXmmSsbdsDHkXYdhltd4LzwBhbUIn4WMXTcK1NmRAK/etbNJ0tn2bL1SZZvO+ewzVOYcLyNI0/t+vN3lobYBz+PUOROCleFlHdNDVGPyOqukGOMuV9fU6MdkCLI6Id2cc54NFU2zZIgaITA7s/sq4q7ypf+RrhnEepvODwgjJZIGjnC1JD40ex1oZxqXSptKVclc5rowRPnKvROQompJDSgBN2HD07qdwlgIScMSXAtLFSyaZp4aItnSsriEtXCWmsdX/FYPY9akfuqn7usAEspBZCA3jY+akMRnx2NOx785dhEFvbt0Ml0PpXB4OQ5dL4ujnnNsk5Lgk0We8cIs95SljB1Oj6bnw/DqyB+y3I25PqwxpN4j8hUlyblA7rJC3g4OXF1e3o5gs9E3NTgGmgaAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"nginx7\"\n        title=\"nginx7\"\n        src=\"/static/600b6b3317b75ca09bc12d8268700df0/d44c9/nginx7.png\"\n        srcset=\"/static/600b6b3317b75ca09bc12d8268700df0/5a46d/nginx7.png 300w,\n/static/600b6b3317b75ca09bc12d8268700df0/0a47e/nginx7.png 600w,\n/static/600b6b3317b75ca09bc12d8268700df0/d44c9/nginx7.png 722w\"\n        sizes=\"(max-width: 722px) 100vw, 722px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></li>\n</ul>\n<p><a name=\"E3z7U\"></a></p>\n<h2 id=\"7if-语句1602255750004jpg\" style=\"position:relative;\"><a href=\"#7if-%E8%AF%AD%E5%8F%A51602255750004jpg\" aria-label=\"7if 语句1602255750004jpg permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7.if 语句<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 748px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIDBAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHXZ4ksAD//xAAZEAACAwEAAAAAAAAAAAAAAAAQMQABAhH/2gAIAQEAAQUCcro2h//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAEFAAAAAAAAAAAAAAAAABEAASAiMf/aAAgBAQAGPwJ6gLY//8QAGhABAAMAAwAAAAAAAAAAAAAAAQARMSFBUf/aAAgBAQABPyFpnkWpssmjyYQO4FT/2gAMAwEAAgADAAAAEJQP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBABAAMAAgMAAAAAAAAAAAAAAQARITFRYXGx/9oACAEBAAE/EK0xCYMvDGtJBw0l3IXtILDy/GCAFEcqUKtfbP/Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1602255750004.jpg\"\n        title=\"1602255750004.jpg\"\n        src=\"/static/81b5d8729748e5f3d6340c99eaac4e5f/2551b/nginx8.jpg\"\n        srcset=\"/static/81b5d8729748e5f3d6340c99eaac4e5f/f93b5/nginx8.jpg 300w,\n/static/81b5d8729748e5f3d6340c99eaac4e5f/b4294/nginx8.jpg 600w,\n/static/81b5d8729748e5f3d6340c99eaac4e5f/2551b/nginx8.jpg 748w\"\n        sizes=\"(max-width: 748px) 100vw, 748px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></h2>\n<p><a name=\"OaqOp\"></a></p>\n<h2 id=\"8反向代理和负载均衡：\" style=\"position:relative;\"><a href=\"#8%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E5%92%8C%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%EF%BC%9A\" aria-label=\"8反向代理和负载均衡： permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>8.反向代理和负载均衡：</h2>\n<p><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 748px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/26df677e65cb88cdfb9ce480c797d52c/2551b/nginx9.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIDBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB2yRUYrC//8QAGhAAAQUBAAAAAAAAAAAAAAAAAQACEBESQf/aAAgBAQABBQI0tT1xOv/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABgQAAIDAAAAAAAAAAAAAAAAAAAxASAy/9oACAEBAAY/AkZmjP/EABsQAAICAwEAAAAAAAAAAAAAAAERAFEQMZHR/9oACAEBAAE/IRA7l1AnjEKycIuz/9oADAMBAAIAAwAAABDMD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAECAQE/EKf/xAAdEAEAAgICAwAAAAAAAAAAAAABABEhQRAxYcHw/9oACAEBAAE/EBTuml+5QAoDHxnicD01CGExgRon/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"nginx9\"\n        title=\"nginx9\"\n        src=\"/static/26df677e65cb88cdfb9ce480c797d52c/2551b/nginx9.jpg\"\n        srcset=\"/static/26df677e65cb88cdfb9ce480c797d52c/f93b5/nginx9.jpg 300w,\n/static/26df677e65cb88cdfb9ce480c797d52c/b4294/nginx9.jpg 600w,\n/static/26df677e65cb88cdfb9ce480c797d52c/2551b/nginx9.jpg 748w\"\n        sizes=\"(max-width: 748px) 100vw, 748px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 748px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1098ea92b7653cf7947e088499ad2a64/2551b/nginx10.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAEEAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHstxJSZA//xAAbEAEAAgIDAAAAAAAAAAAAAAABAAMEERIxMv/aAAgBAQABBQI2qMCyWeMTu1ef/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHRAAAgIBBQAAAAAAAAAAAAAAAAECESEiMXGBkf/aAAgBAQAGPwJ3CjThmXHwlwT6N2f/xAAcEAEAAwACAwAAAAAAAAAAAAABABEhMUFRYaH/2gAIAQEAAT8hYtQ4b5lBz5Emq1H1IlsV9mGwGdM//9oADAMBAAIAAwAAABA3L//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABYRAQEBAAAAAAAAAAAAAAAAABEQIf/aAAgBAgEBPxAxn//EABsQAQADAQADAAAAAAAAAAAAAAEAESFBYXHw/9oACAEBAAE/EBsu1D3yGJJoMHmGLReJx9cSMKJoeoMiGLGsZRjKYoT/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"nginx10\"\n        title=\"nginx10\"\n        src=\"/static/1098ea92b7653cf7947e088499ad2a64/2551b/nginx10.jpg\"\n        srcset=\"/static/1098ea92b7653cf7947e088499ad2a64/f93b5/nginx10.jpg 300w,\n/static/1098ea92b7653cf7947e088499ad2a64/b4294/nginx10.jpg 600w,\n/static/1098ea92b7653cf7947e088499ad2a64/2551b/nginx10.jpg 748w\"\n        sizes=\"(max-width: 748px) 100vw, 748px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 748px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/17aacf7ac0c4be8ffd0ce1f8a423f445/2551b/nginx11.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAMBAgQF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB6jKSjjOD/8QAGRABAQEAAwAAAAAAAAAAAAAAAQIAAyEz/9oACAEBAAEFAnurxr9eRdCp/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGhAAAgMBAQAAAAAAAAAAAAAAAAIBEUEhgf/aAAgBAQAGPwLRbmjPBBTsn//EABoQAQADAQEBAAAAAAAAAAAAAAEAESFBUTH/2gAIAQEAAT8hvjS3uRU3Uvsum9wRygmnYyU++z//2gAMAwEAAgADAAAAEBfv/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFREBAQAAAAAAAAAAAAAAAAAAAAH/2gAIAQIBAT8QV//EAB0QAQACAgIDAAAAAAAAAAAAAAEAESExQXHB0fH/2gAIAQEAAT8QRgAlDE9WY8zSBFUz7l6lZUqz7FBCu3qXsMm8DyRBlx2OCf/Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"nginx11\"\n        title=\"nginx11\"\n        src=\"/static/17aacf7ac0c4be8ffd0ce1f8a423f445/2551b/nginx11.jpg\"\n        srcset=\"/static/17aacf7ac0c4be8ffd0ce1f8a423f445/f93b5/nginx11.jpg 300w,\n/static/17aacf7ac0c4be8ffd0ce1f8a423f445/b4294/nginx11.jpg 600w,\n/static/17aacf7ac0c4be8ffd0ce1f8a423f445/2551b/nginx11.jpg 748w\"\n        sizes=\"(max-width: 748px) 100vw, 748px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 748px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c9a1b88c27176e8a441210635568fdf7/2551b/nginx12.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBBAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHYiwChIf/EABkQAQEAAwEAAAAAAAAAAAAAAAIBEBITIf/aAAgBAQABBQJeSNcxdjhqxf/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABsQAAICAwEAAAAAAAAAAAAAAAESABECEDFR/9oACAEBAAY/AiUuMhvyWcV32f/EABsQAQACAgMAAAAAAAAAAAAAAAEAERAhMVFh/9oACAEBAAE/IXTNHBrctaY83HuC6cpQQT//2gAMAwEAAgADAAAAEIsv/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8Qp//EABsQAAMAAwEBAAAAAAAAAAAAAAERIQBBcRCx/9oACAEBAAE/ENHllXq/cLIcEzLq4InwkTfZ6IUEgODP/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"nginx12\"\n        title=\"nginx12\"\n        src=\"/static/c9a1b88c27176e8a441210635568fdf7/2551b/nginx12.jpg\"\n        srcset=\"/static/c9a1b88c27176e8a441210635568fdf7/f93b5/nginx12.jpg 300w,\n/static/c9a1b88c27176e8a441210635568fdf7/b4294/nginx12.jpg 600w,\n/static/c9a1b88c27176e8a441210635568fdf7/2551b/nginx12.jpg 748w\"\n        sizes=\"(max-width: 748px) 100vw, 748px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>"},{"id":"105be800-38a2-5005-b9ff-07160e3e8d4e","headings":[{"depth":2},{"depth":2},{"depth":3},{"depth":3},{"depth":2},{"depth":2}],"frontmatter":{"title":"nginx 部署 react 项目","path":"/nginx-deployment","tags":["React"],"excerpt":"nginx部署react单页面应用并实现静态文件下载","created":"2021-02-20 21:45","createdPretty":"20 February, 2021","updated":"2021-04-11T00:00:00.000Z","updatedPretty":"20 February, 2021","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVQozxXSS2/aBgAAYP+TaUsNfmEMBowxYGyMzcsmYCB1iGMgTeYIQsOrYaUkS2m2pU3TCW1LQpN02tZuU5s+tEp7tGqbNt1hrTQtx6mbpqpTD71Uk3bYbZv0/YQPeHLrzMPP6offdp9enfyk4S2GIYODdRY2Qkjea1U9cJFDSzxiSrZJHpNsI4PFxs6yWY44FBcKvP7zyatfb/92sHbjQ7UYtuQYJEPBWQoS4JES55iLUgUv2lCw2ZhNY8BmQb4+PDc4zm80ghvzQeD5Lzf/evX7H4/Xhh02Rx8ZdYFZt7USR+ujxFmdKbixwBvgDI91NbKaxI0o8/EJeX9LvbYirZteYH+n+OLny69fHj77cfPW+ezlvnJjNfFot/DTp9pJhYyCIPcmeCyE/7AeuVAN7Pak7wfSxRa9OE4YHArs75YfDrMvDq/+8/fL54/6T7+cvD/MPdhSr/QkjURTGJSAIRG0fGBQt8+F7wySdy7Ev+j6O3kiTcLAwbZ2dyAfbI8/e7B6b0vbOeHf7nDfrccvLUSLjENGobQdjYDWEuf56kzym+XUXjt8qcsNZqmTmgO42AxsN33np8kri/znPeFaP7K3Iuy9H9/s5FtZdk5mjo8GaqlARfF3J4WeIa1VgxvvcO9VvB3NDpQ4eD4JL6jYZtXz9buRYTO4OuVemRbKkn8i5Dpdlk7pQkfjSwI1E6NrGWY561niHXXJbaZdQNJuKbNQMWCtiMhywd5I2cocumSEa2m+lhFO6WIrH2qP8RXZPxPzzsfIRRI3bVjNR6xOs0AAtIw6LWnSMu6DWil0XkbbKtmfEvvHEj0j2siwVYWpq2xDZWcTdDGE626sHSI+iruXxpyAGcNLHGKw0DgDmSJSDEF61FaOuqpJ2kz4ZuP0/2RfSaRyNG4INs2P6TikU2ghhAKnJ5x1xbaQwd8WUDOC1FO2WpqMELDswTWWnBIpnXcdpZ0KirFW8L98RwPIBIekPZDqgYA5hVCcUCNFnJ12tTJ4WyWaOTJHIR7wyNgIUsPtERwRISj6ljUIgiJqSTmhAoPkaThBWP8Fw/saak00bPoAAAAASUVORK5CYII=","aspectRatio":1.5060240963855422,"src":"/static/073fbe2ee018008edad106e739f88045/0853f/easter.png","srcSet":"/static/073fbe2ee018008edad106e739f88045/14156/easter.png 125w,\n/static/073fbe2ee018008edad106e739f88045/d6e47/easter.png 250w,\n/static/073fbe2ee018008edad106e739f88045/0853f/easter.png 500w,\n/static/073fbe2ee018008edad106e739f88045/ce627/easter.png 750w,\n/static/073fbe2ee018008edad106e739f88045/9dbcf/easter.png 1000w,\n/static/073fbe2ee018008edad106e739f88045/87046/easter.png 1920w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<h2 id=\"前言\" style=\"position:relative;\"><a href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"前言 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>前言</h2>\n<blockquote>\n<p>我用的是 create-react-app 在 nginx 上部署的前端项目，并使用 nginx 实现了下载文件的功能</p>\n</blockquote>\n<h2 id=\"nginx-的根目录是usrshare\" style=\"position:relative;\"><a href=\"#nginx-%E7%9A%84%E6%A0%B9%E7%9B%AE%E5%BD%95%E6%98%AFusrshare\" aria-label=\"nginx 的根目录是usrshare permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>nginx 的根目录是/usr/share</h2>\n<div class=\"gatsby-highlight\" data-language=\"nginx\"><pre class=\"language-nginx\"><code class=\"language-nginx\"><span class=\"token keyword\">location</span> <span class=\"token operator\">/</span>pkg<span class=\"token operator\">/</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token operator\">-</span>f <span class=\"token variable\">$request_filename</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">404</span> <span class=\"token string\">'文件不存在'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">location</span> <span class=\"token operator\">/</span>upgrade <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try_files</span> <span class=\"token variable\">$uri</span> <span class=\"token variable\">$uri</span><span class=\"token operator\">/</span> <span class=\"token operator\">/</span>upgrade<span class=\"token operator\">/</span><span class=\"token keyword\">index</span><span class=\"token punctuation\">.</span>html<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a name=\"k0wDy\"></a></p>\n<h3 id=\"可以看到，下载升级包的页面路径是upgrade，项目部署上线结果白屏了，找了找原因\" style=\"position:relative;\"><a href=\"#%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%EF%BC%8C%E4%B8%8B%E8%BD%BD%E5%8D%87%E7%BA%A7%E5%8C%85%E7%9A%84%E9%A1%B5%E9%9D%A2%E8%B7%AF%E5%BE%84%E6%98%AFupgrade%EF%BC%8C%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E4%B8%8A%E7%BA%BF%E7%BB%93%E6%9E%9C%E7%99%BD%E5%B1%8F%E4%BA%86%EF%BC%8C%E6%89%BE%E4%BA%86%E6%89%BE%E5%8E%9F%E5%9B%A0\" aria-label=\"可以看到，下载升级包的页面路径是upgrade，项目部署上线结果白屏了，找了找原因 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>可以看到，下载升级包的页面路径是/upgrade，项目部署上线结果白屏了，找了找原因</h3>\n<ol>\n<li>react 项目配置页面路由的 basename(前端路由的/等于 nginx 的根目录/use/share)</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Router</span></span> <span class=\"token attr-name\">basename</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/upgrade<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Switch</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">exact</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Main</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">exact</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/404<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">NotFoundPage</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">NotFoundPage</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Switch</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"2\">\n<li>pakage.json 中配置</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">  <span class=\"token property\">\"homepage\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/upgrade\"</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>如果是 webpack 而不是脚手架 create-react-app,则配置 publicPath,目的是让 html 中引用的 js,css 文件的路径是以/upgrade 开头的，那么路由就可以找到他们了，homepage 只会影响项目中引用的静态资源的路径</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/upgrade/static/js/2.c8c300b5.chunk.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/upgrade/static/js/main.529d8b95.chunk.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><a name=\"ztjd1\"></a></p>\n<h3 id=\"前端实现下载文件，如果文件不存在则使用-react-router-跳转到-404-页面\" style=\"position:relative;\"><a href=\"#%E5%89%8D%E7%AB%AF%E5%AE%9E%E7%8E%B0%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%96%87%E4%BB%B6%E4%B8%8D%E5%AD%98%E5%9C%A8%E5%88%99%E4%BD%BF%E7%94%A8-react-router-%E8%B7%B3%E8%BD%AC%E5%88%B0-404-%E9%A1%B5%E9%9D%A2\" aria-label=\"前端实现下载文件，如果文件不存在则使用 react router 跳转到 404 页面 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>前端实现下载文件，如果文件不存在则使用 react-router 跳转到 404 页面</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// head请求文件是否存在，如果存在才创建a标签触发浏览器的下载行为</span>\naxios<span class=\"token punctuation\">.</span><span class=\"token function\">head</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">validateStatus</span><span class=\"token operator\">:</span> <span class=\"token parameter\">status</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>status <span class=\"token operator\">>=</span> <span class=\"token number\">200</span> <span class=\"token operator\">&amp;&amp;</span> status <span class=\"token operator\">&lt;</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> a <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">)</span>\n      a<span class=\"token punctuation\">.</span>href <span class=\"token operator\">=</span> path\n      a<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>display <span class=\"token operator\">=</span> <span class=\"token string\">\"none\"</span>\n      a<span class=\"token punctuation\">.</span>rel <span class=\"token operator\">=</span> <span class=\"token string\">\"noopener noreferrer\"</span>\n      a<span class=\"token punctuation\">.</span>target <span class=\"token operator\">=</span> <span class=\"token string\">\"_blank\"</span>\n      a<span class=\"token punctuation\">.</span>download <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.pkg</span><span class=\"token template-punctuation string\">`</span></span>\n      a<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">\"application/octet-stream\"</span>\n      document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span>\n      a<span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">removeChild</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>status <span class=\"token operator\">===</span> <span class=\"token number\">404</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      props<span class=\"token punctuation\">.</span>history<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/404\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><a name=\"YM84e\"></a></p>\n<h2 id=\"为什么使用-head-先请求一次？\" style=\"position:relative;\"><a href=\"#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8-head-%E5%85%88%E8%AF%B7%E6%B1%82%E4%B8%80%E6%AC%A1%EF%BC%9F\" aria-label=\"为什么使用 head 先请求一次？ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>为什么使用 head 先请求一次？</h2>\n<p><strong>HTTP <code class=\"language-text\">HEAD</code> 方法</strong> 请求资源的头部信息, 并且这些头部与 HTTP <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods/GET\"><code class=\"language-text\">GET</code></a> 方法请求时返回的一致. 该请求方法的一个使用场景是在下载一个大文件前先获取其大小再决定是否要下载, 以此可以节约带宽资源.</p>\n<p><a name=\"hzhvb\"></a></p>\n<h2 id=\"参考\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83\" aria-label=\"参考 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://blog.csdn.net/jingtian678/article/details/90239919\">HashRouter 和 BrowserRouter 的区别</a></li>\n<li><a href=\"https://www.thinktxt.com/react/2017/02/26/react-router-browserHistory-refresh-404-solution.html\">React-Router browserHistory 浏览器刷新出现页面 404 解决方案</a></li>\n<li><a href=\"https://segmentfault.com/a/1190000023327242\">create-react-app 一些常用的自定义配置</a></li>\n</ul>"},{"id":"1e9b8fee-8af7-5925-9b78-a1e2c476d997","headings":[{"depth":2},{"depth":2}],"frontmatter":{"title":"前端性能优化之回流和重绘","path":"/redraw","tags":["JavaScript"],"excerpt":"前端性能优化之回流和重绘","created":"2021-02-20 21:45","createdPretty":"20 February, 2021","updated":"2021-04-11T00:00:00.000Z","updatedPretty":"20 February, 2021","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAADJElEQVQozwEZA+b8AGVDL3ZQP4lhTJtvWah7Z6yAa76Re82fh9mpkOa+qNmyl9W/pvb697u8rp6YhqSejqqikL2wm7qrlbiqlABRLx5uRTKGWEWZalakc1+yg27JmIHdrJLltpvqwqvsybHs2MH9///Iy8Ccl4WknY2popG+s568rZW6rJUASSgZYjgne0o2j1xIonFct4hz1aWN6Lmg7sKq8Mu08dS/9ObZ////19rQnJeFoZqKq6SUwrajva6YvKyWAEQnGkklGWc4KnhDNYZPQZZdTsSJd+m6o/DJs/PUv/Tbyfft4////+Tm35+ciqCYiKukk8G2o76wmb2ulwCnb1pmHBxjBQtwCg95CxF8CA9zBw21Vlj20r/12sr24NL48ev////u8Oulo5GblIKnoZG9sqHBspy+r5gAklFCTQsJQQABRQYKUgsQZQ4TgQAM0j5N98668tS/68qt9+/l////9/j0raybl497o5yMu7Kjw7Wgvq+YAJJcSU8PDDYBBD0DBVIDBGQJDLUYKfhSY+S4oa2ajdS6qv78+v////v9+7a2p5WNep6Xhbu0o8W4o7+wmQCmb1ldKyFVCgxJAwVlCw2QDhWpDhjtR1jUoJHetKHw2Mv////////+//6+vrGTjHmknYvGv63GvKW+sJgAi1RFUxUSnCMlIA8PXhETnR0hgDIrqko/t4Ft57+t8dXI/v79////////xci+lI15oJiGvbalxbumvbCYADoGCjoGCkgCBk8FB1cKB2YoG5tkTap4XKppUOSvlPXXx/39/P///////8/Ty5aQfpWNeqihkMO6pruvlwA4HBQ5GRMzEQxCFg9TJRV9SzSdZ1CzgGi9hWvYnoDv1sL6/Pz////////Z3NWXkoGSiXaemIbCuKW7rpcAPy8YSSwcTy0dVjEiYzQhf044nGpTsX5lwo5y1p6C4sm09Pf0////////4ePcmJSEj4d0mJF/vrWjuq6XADgmE0EqF1k6KW5JN3FELo5dRqNuV7qDaNmihOeujuDIr+3w7P///////+Xn4JqXiI2FcpGKeLiwnrqulaUlv3RaB75BAAAAAElFTkSuQmCC","aspectRatio":1.5060240963855422,"src":"/static/87fda446656eadb4e66da3852be9cdc0/0853f/child.png","srcSet":"/static/87fda446656eadb4e66da3852be9cdc0/14156/child.png 125w,\n/static/87fda446656eadb4e66da3852be9cdc0/d6e47/child.png 250w,\n/static/87fda446656eadb4e66da3852be9cdc0/0853f/child.png 500w,\n/static/87fda446656eadb4e66da3852be9cdc0/ce627/child.png 750w,\n/static/87fda446656eadb4e66da3852be9cdc0/9dbcf/child.png 1000w,\n/static/87fda446656eadb4e66da3852be9cdc0/87046/child.png 1920w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<h2 id=\"回流和重绘优化\" style=\"position:relative;\"><a href=\"#%E5%9B%9E%E6%B5%81%E5%92%8C%E9%87%8D%E7%BB%98%E4%BC%98%E5%8C%96\" aria-label=\"回流和重绘优化 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>回流和重绘优化</h2>\n<ol>\n<li>translate 替代 top 改变</li>\n<li>opacity 替代 visibility</li>\n<li>不要一条一条的修改 DOM 的样式，预先定义好 class，然后修改 DOM 的 className</li>\n<li>把 DOM 离线后修改，比如：先把 DOM 给 display:none（有一次 reflow），然后你修改 100 次，然后再把它显示出来</li>\n<li>不要把 DOM 节点的属性值放在一个循环里面当成循环里的变量</li>\n<li>不要使用 table 布局，可能一个很小的改动都会造成整个 table 的布局</li>\n<li>动画实现的速度选择</li>\n<li>对于动画新建图层</li>\n<li>启用 GPU 硬件加速</li>\n</ol>\n<h2 id=\"chrome-创建图层的的条件\" style=\"position:relative;\"><a href=\"#chrome-%E5%88%9B%E5%BB%BA%E5%9B%BE%E5%B1%82%E7%9A%84%E7%9A%84%E6%9D%A1%E4%BB%B6\" aria-label=\"chrome 创建图层的的条件 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Chrome 创建图层的的条件</h2>\n<blockquote>\n<p>图层的作用是让回流和重绘都在一个区域里进行，也就是硬件加速</p>\n</blockquote>\n<ol>\n<li>3D 或透视变换（prespective transform）CSS 属性</li>\n<li>使用加速视频解码的<code class=\"language-text\">&lt;video&gt;</code>节点</li>\n<li>拥有 3D（webGL）上下文或加速的 2D 上下文的<code class=\"language-text\">&lt;canvas&gt;</code>节点</li>\n<li>混合插件（如：flash）</li>\n<li>对自己的 opacity 做 CSS 动画或使用动画 webkit 变换的元素</li>\n<li>拥有加速 CSS 过滤器的元素</li>\n<li>元素有一个包含复合层的后代节点（一个元素拥有一个子元素，该子元素在自己的层里）</li>\n<li>元素有 z-index 较低且包含一个复合层的兄弟元素（换句话说就是该元素在复合层上面渲染）</li>\n</ol>"},{"id":"e30b3bae-9435-5fd0-a971-c4a1829986c7","headings":[{"depth":2},{"depth":2}],"frontmatter":{"title":"sass常用指令和常用函数","path":"/sass","tags":["Sass"],"excerpt":"sass常用指令和常用函数,方便快速查找","created":"2021-02-20 21:45","createdPretty":"20 February, 2021","updated":"2021-04-11T00:00:00.000Z","updatedPretty":"20 February, 2021","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAC4jAAAuIwF4pT92AAADGElEQVQozxWQeVMSARyG93M01WRTdgAqkBzLsofAEraKCMjCLiAscuqQRpwCiqJoBYZXpFlJljqVdozllJWpXc5kkzVh9WHaZp4/3n+ed97fD3gyaNwsUnv3/b9eZH6/m/y7fefvZqmynv22GNyetq+PkI9S+nJEO3ORGO/UXPOpc258gFGlHIq4FQPWhgyfSrbvjy5VXl39vT3/58Pyn52Fyuv8/sPwl1uujWvkalp/L9w8E7xQ9KuveFTDLmXGqUjaG2I0AjzNtG5NWPYWu36u5w62Fg62lg62Fytvp3+sxjbG6Zc540pKNx8iSl2aMR8+6lZmGUVfe0OCRqMWGHic0r4ptO2WPZ+Woz83pn5tliubt/ZfDO2W/c9HDKv9uqVY8+2exumAuuBR5lwNgw4sbUMTNBwxy4HF6IW1bOvb6+SrKfu3lcj3tczX1d4vC50fStaVjI6tfhAmZoPqyQDOyiMubKAd/S9TcJiEgLs955cixMNk07Mh3c4N6+c55uNM+84U9T7ftpwglqJE+ZKm1IUXvcpRF5p1IP02JEkjMTN02SQDbgfVcVJigDk9elGSBgMtQk+TcCKgvNGpGnUi035Fya+Y9CoLbsWVDnTQgaStcMIiD5tkISMI5F1Ik+TU6WOH+NVHZLwq0ZljdScOO/CaRnE1t+pQzCS+2a2O6OuLPizHwCxZO9xHy5NmKNwGAlm7LGESJUnxgEVacMrHO+AxRl5goJsBtOSH14e1D9LN3S38gg+jMM6YCxmgwbSFRRZj5bRZMmQD8wzEOsUOmA0TbnjcDeds4KBVMsJA3Vq+F+d5NLWC6qO9JBgzSUMGiZeot+F8QMytktUcR/knMMHJ/whPnhedMsg5OtlprbQ6apL0WsCgVpg0S9tVNSkK7GwSehsFdlWdDuIABoRDK3hOFc+rqb3YLAi1COL6c/2kaJiW5p1QziGPm8RdWkGMlMRJcY++3onXUCiXwrgWjAe0QmeM8FkLyqFQjkPJ9WlqO3Aeg/PYtew5OfYLAcVchJi9TMz36uZCjRPehqtOpI+SRYySf6GtRT927de7AAAAAElFTkSuQmCC","aspectRatio":1.5060240963855422,"src":"/static/76b9aa0a66019806b9383b473f9fd1d5/0853f/ocean.png","srcSet":"/static/76b9aa0a66019806b9383b473f9fd1d5/14156/ocean.png 125w,\n/static/76b9aa0a66019806b9383b473f9fd1d5/d6e47/ocean.png 250w,\n/static/76b9aa0a66019806b9383b473f9fd1d5/0853f/ocean.png 500w,\n/static/76b9aa0a66019806b9383b473f9fd1d5/ce627/ocean.png 750w,\n/static/76b9aa0a66019806b9383b473f9fd1d5/9dbcf/ocean.png 1000w,\n/static/76b9aa0a66019806b9383b473f9fd1d5/87046/ocean.png 1920w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<p><a name=\"3e525057\"></a></p>\n<h2 id=\"scss-常用指令\" style=\"position:relative;\"><a href=\"#scss-%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4\" aria-label=\"scss 常用指令 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>scss 常用指令</h2>\n<blockquote>\n<p>注意：scss 与 sass 的区别</p>\n</blockquote>\n<ul>\n<li>混合样式：<code class=\"language-text\">@mixin 名字(参数1，参数2...){...}</code></li>\n<li>取用混合样式：<code class=\"language-text\">@include 名字（@mixin的名字）</code></li>\n<li>继承样式：<code class=\"language-text\">@extend 需要继承的类、ID名、自定义的混合样式等的名字</code></li>\n<li>导入 scss 样式：<code class=\"language-text\">@import &quot;scss文件名&quot;</code></li>\n<li>条件控制指令：<code class=\"language-text\">@if 条件{...}</code></li>\n<li>循环控制指令：<br /><code class=\"language-text\">@for $var from &lt;开始值&gt; through &lt;结束值&gt; -----------包括结束值</code><br /><code class=\"language-text\">@for $var from &lt;开始值&gt; to &lt;结束值&gt; ------------不包括结束值</code></li>\n<li>循环 List 项目的控制指令：<code class=\"language-text\">@each $var in $List{}</code></li>\n<li>条件判断循环：<code class=\"language-text\">@while 条件{...}</code></li>\n<li>用户自定义的函数：<code class=\"language-text\">@function 名称(参数1，参数2...){...}</code></li>\n<li>警告和错误的提示：<br /><code class=\"language-text\">@warn &quot;...&quot;------------------------在终端输出警告</code><br /><code class=\"language-text\">@error &quot;...&quot;----------------在.css文件和终端输出错误</code></li>\n</ul>\n<p><a name=\"b468e5e2\"></a></p>\n<h2 id=\"scss-常用函数\" style=\"position:relative;\"><a href=\"#scss-%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0\" aria-label=\"scss 常用函数 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>scss 常用函数</h2>\n<ul>\n<li>数字函数 ：</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$theNumber:4.5;</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  percentage($theNumber)：将一个不带单位的数转换成百分比值；  //450%\n\n  round($theNumber)：将数值四舍五入，转换成一个最接近的整数；  //5\n\n  ceil($theNumber)：将大于自己的小数转换成下一位整数；   //5\n\n  floor($theNumber)：将一个数去除他的小数部分；  //4\n\n  abs($theNumber)：返回一个数的绝对值；//4.5\n\n  min($numbers…)：找出几个数值之间的最小值； //min(1,2,3) =1\n\n  max($numbers…)：找出几个数值之间的最大值； //max(1,2,3)=3\n\n  random(): 获取随机数   //随机数</code></pre></div>\n<ul>\n<li>字符串函数：</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$theString:&quot;Hello World&quot;;</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">to-upper-case($theString)：输出$theString的大写                 //HELLO WORLD\n\nto-lower-case($theString)：输出$theString的小写                 //hello world\n\nstr-length($theString):输出$theString的长度                     //11\n\nstr-index($theString,&quot;Hello&quot;):输出$theString第二个参数的开始索引          //1\n\nstr-insert($theString,&quot;.com&quot;,12):在索引为12的地方为$theString插入&quot;.com&quot; //&quot;Hello World.com&quot;</code></pre></div>\n<ul>\n<li>颜色函数</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&gt; 调整色相h的值\n\n$base-color-hsl:hsl(0,100,50%);  //\tred\n$base-color:#ff0000;  //red\n\nadjust-hue($base-color-hsl,137deg);        //#00ff48\nadjust-hue($base-color,137deg);          //#00ff48</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&gt; 调整亮度l的值\n\n$base-color:hsl(222,100%,50%);             //#004cff\n\n$light-color:lighten($base-color,30%);        //#99b8ff（变亮）\n$dark-color:darken($base-color,20%);         //#002e99（变暗）</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&gt; 调整饱和度s的值\n\n$base-color:hsl(221,50%,50%);            //#4068bf\n\n$saturate-color:saturate($color:$base-color,$amount:50%);          //#0051ff  (更饱和)\n$desaturate-color:desatudate($color:$base-color,$amount:30%);        //667699 (更不饱和)</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&gt; 调整透明度a的值\n\n$base-color:hsla(222,100%,50%,0.5);  //rgba(0, 77, 255, 0.5)\n\n$fade-in-color:opacify($color: $primary-color, $amount: 0.3);  //rgba(0, 77, 255, 0.8)\n$fase-out-color:transparentize($color: $primary-color, $amount: 0.2);  //rgba(0, 77, 255, 0.3)</code></pre></div>\n<ul>\n<li>列表函数（1px solid black：这样称为一个列表有三个项）</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">length(5px 10px)：列表长度     //2\nlength(5px 10px 0px 2px)  列表长度      //4\n\nnth(5px 10px,1)：列表第一项   //5px\nnth(5px 10px,2)：列表第二项   //10px\n\nindex(1px solid red,solid)：列表solid的项目索引  //2\n\nappend(5px 10px,5px)：列表中插入项目  //5px 10px 5px\n\njoin(5px 10px,5px 10px):列表之间连接   //5px 10px 5px 10px\njoin(5px 10px,5px 10px,参数)：列表之间条件连接  //参数为comma=5px,10px,5px,10px ---------参数为space=5px 10px 5px 10px</code></pre></div>\n<ul>\n<li>Map 函数(Map 为带有键值对的列表)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$colors:(light:#ffffff,dark:#000000);   //定义map</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">length($colors)：map的长度  //2\n\nmap-get($colors,dark):取得键值为dark的值     //#000000\n\nmap-keys($colors)：取得所有键      //(&quot;light&quot;,&quot;dark&quot;)\n\nmap-values($colors) ：取得所有值      //(#ffffff,#000000)\n\nmap-has-key($colors,light)：map是否有light键       //true\n\nmap-merge($colors,(color-red:#ff0000)) ：插入键值对到map   //(light:#ffffff,dark:#000000,color-red:#ff0000)\n\nmap-remove($colors,light,dark) :从map删除键值对      //(color-red:#ff0000)</code></pre></div>"},{"id":"a7f73dea-14ee-5cac-9068-59922ca9821a","headings":[{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"计算机网络-子网划分","path":"/subnet","tags":["Network"],"excerpt":"子网划分的原理和知识点，来源慕课网","created":"2021-02-20 21:45","createdPretty":"20 February, 2021","updated":"2021-04-11T00:00:00.000Z","updatedPretty":"20 February, 2021","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAACt0lEQVQoz0WS2U8TURTGZ7kz03am7cyUWegybYepNAJlWmmBUCy0YlgFJQpoJVEQUo1ADERigJjI5hOLiIkoJmgE5IFojGCiicHlgfBkJPEfkWdvB8TzdO93zu/ck3M/xERgPtYcdrEpTUxqksiY2krUG4ngxYhS4eVrg1K5wodlm55r87EWxW5iaQrgGI5hKIoiLtZc7GRrTkjJgJgIyJLd0qh702XawJnC6qCzKi+nO+ZN666kJkb8ko810RRBAAwGimGIbDO7eFoTrGHFkch3ujn6cnXkVnPF0vWqkabwYF3RYDI/E9e6UkU1JcG8HIahCIrAMSMQF0eHvGIkT46qUms04BNss/d6Fx/0z/RdetxTN5eunLyanBu+9nSiv7ej4aSTc/E22kQe0ohX4oJuoSEazDTF26si+Yr8/NHk548b7zaWnk0Prs6Pbm0uv12dn7rdMdzV3BIPOTkmSxuPI35njsTSBYpcXx5pTcVPl5f++L6z//vX7u7XnZ0PP/f3vmyvvh7vnbySWH8yljlfpTkYj8AZO0MRj+xgzITEMnrAVxEqKNFDb9bW/hwcrLx8MTTU19PdWaYHF++0b071fFqfHWiIxVVZFTkKYASEfW7JTpsoAugBb7QgYLVQC3MzW9tbLedqlxemcQDOlha2VYdfTdzcWxl52BxO+QUvzwg0ReEYEvaJfolFECSkuipDKjyUxWJ3+zOqR0631rsloVjzhPy578c7D74t3G85VavyKk/DNZtJgLgdVjMBIGOmSIm3YhiOopgnV1BEHroAWgGmFI4Za9RHL0Sddpq3kBIDJ8WzJsENEjWKstWQhrNiqM1CwnZQggpcD8xCkSQAAXAS3g09W43+C3D0+Rh0EQNRgCOGnuUBbIkfNjpGEBz/Dx/r8BshSwJwrAMcFhqWzvryCPkL+peGZ9ZH8rgAAAAASUVORK5CYII=","aspectRatio":1.5060240963855422,"src":"/static/3e9e92a8658157f3de441075de8873a5/0853f/concert.png","srcSet":"/static/3e9e92a8658157f3de441075de8873a5/14156/concert.png 125w,\n/static/3e9e92a8658157f3de441075de8873a5/d6e47/concert.png 250w,\n/static/3e9e92a8658157f3de441075de8873a5/0853f/concert.png 500w,\n/static/3e9e92a8658157f3de441075de8873a5/ce627/concert.png 750w,\n/static/3e9e92a8658157f3de441075de8873a5/9dbcf/concert.png 1000w,\n/static/3e9e92a8658157f3de441075de8873a5/87046/concert.png 1920w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<h2 id=\"网络部分：划分子网\" style=\"position:relative;\"><a href=\"#%E7%BD%91%E7%BB%9C%E9%83%A8%E5%88%86%EF%BC%9A%E5%88%92%E5%88%86%E5%AD%90%E7%BD%91\" aria-label=\"网络部分：划分子网 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>网络部分：划分子网</h2>\n<p><a name=\"Nh8DI\"></a></p>\n<h2 id=\"主机部分：可以分配给-pc-的-ip-地址\" style=\"position:relative;\"><a href=\"#%E4%B8%BB%E6%9C%BA%E9%83%A8%E5%88%86%EF%BC%9A%E5%8F%AF%E4%BB%A5%E5%88%86%E9%85%8D%E7%BB%99-pc-%E7%9A%84-ip-%E5%9C%B0%E5%9D%80\" aria-label=\"主机部分：可以分配给 pc 的 ip 地址 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>主机部分：可以分配给 pc 的 ip 地址</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 748px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/215ccbbc8fb7c5b1779799a7ec27f210/f8915/net1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACI0lEQVQoz41T227TQBDNxyI+hE9AAoknnnmJeKmohIpI47QpIaU0pY3jxIlvqRO7ie+XtXcPY+fWhhdGOt6xvHM8c2amIY9GCJdLqG0JU+kC6vdzTM6+YdruQLvqQev+gNqS6jPwPIRRhCRJkKYZ4jhBGIYv0DAMA5WxMEK+WoMFAZjvEwIUcYzc2/iMLu/MpQQsiqt+cGwNXdNqR+D/LExy9NUlrmcuRk6CmS+g+SVYyWuWhq7r9UVelhCcQwixARd7f//DosDHpoS3n/v4+QScDFe4WQG/XI6s4NsMt4TPbUeys5L0ytceRBRipDu4MFM0bx7x+v0phqTE3UocCCsNheDQplOYho40juoPSZqDkeiMiFgQglN2NTmhM/Nxcq3hXHbRm2fo2/mB0CTCkO7e2SFu5z4Uj+G3FeHNhy/o9eWNHLuSSZKMGCXFwdlAR+t+jo7i4nLiIi/FllDX4FFEc+Cg+1hgQI27WpT4+meBIM5w3DGxBd+iIK0LftC6YVGZ1CS8endKuswxjoFbIjXSg56MsT1Kal6WZeTnyPP8H+0bc9OAHXF8koZoXspoyw5aqod7dxOg6waUkYLxeAJ5KEOdqBgrY5imVfvV6dE87sjrDNeMyiSh+0aAnu6jS766LuqMHu4f6sA4iuHTgPs06DENfLUt1VltR5qkdeYvxqYkHfhzjehREVqWhTVtkE/b4ywd2LaNJW3Kwl7U78cl/wXXmY1J9kutRAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/215ccbbc8fb7c5b1779799a7ec27f210/f8915/net1.png\"\n        srcset=\"/static/215ccbbc8fb7c5b1779799a7ec27f210/5a46d/net1.png 300w,\n/static/215ccbbc8fb7c5b1779799a7ec27f210/0a47e/net1.png 600w,\n/static/215ccbbc8fb7c5b1779799a7ec27f210/f8915/net1.png 748w\"\n        sizes=\"(max-width: 748px) 100vw, 748px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br /></p>\n<p><a name=\"lNg98\"></a></p>\n<h2 id=\"掩码的作用主要是划分子网：\" style=\"position:relative;\"><a href=\"#%E6%8E%A9%E7%A0%81%E7%9A%84%E4%BD%9C%E7%94%A8%E4%B8%BB%E8%A6%81%E6%98%AF%E5%88%92%E5%88%86%E5%AD%90%E7%BD%91%EF%BC%9A\" aria-label=\"掩码的作用主要是划分子网： permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>掩码的作用主要是划分子网：</h2>\n<p><a name=\"E3IS8\"></a></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">例如：192.168.1.1 的子网掩码是：255.255.255.0\n\n子网缺省表示：192.168.1.1/24(24 表示有 24 位网络位，如果划分了子网，该 c 类地址的网络位不为 24)</code></pre></div>\n<br />\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 748px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3f856c9a2c6ca3004d17aba275333e21/f8915/net2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVQ4y41TiW7aUBDk//+nUqVKrao2PYBADC0x+MQX2MjG2H42Pqe7D0KlKG3ypGHN4je7M7uMYs+HO7mHP3tAoCxhfPgI7d172F++ocgLiFJAiAuKongVo6FtUaUnQoqaElWcoDocICh2XSfRX+NbzqgrS1i2jfvZHLphwAsC7KIImq5DfVShKAtoGw2e6+F8PqOqKjRN8yLZMAwYNVkOyzAxI0K+uFbXWEiSDQwqsFlvsFws4ZM1yoOCyXiC1Wol5bWsjgpkWXZTQB1W+LVcYjqZyo6YbE7k459j3H29kwVUVYWzdeC6LhzHkbBMC0mSwPM82QgXkIT8IQqB4/F4qxbH8Q0H8pOlvuVIyUwSkWcpDeV0OiHwA4n9bo8wDBHuQyl3a29hmqaM7KelG7DJKtdxYVs2dsHu0iGvg+/7iMJISuALDJbIRByfwDL5MpNYugmbsL3mb4Q2TdikSjpNNacB8e6lxxQl2dDUDfJTJvMVeX0m5FmBkiwQuUByiJHQuwmtGNt28/D56foew3N/rrEmT+NPn1FsXeSajuP3H2hF+ddDubTkY0dVu3Mtn3t+pm46evGSo+91jZ7WpKcdbOiPwCS8ci0pGK4rIwlbWuycDBbkS2E7yNQNMs1A9vsR6XQOQbmCvBKujyo8/HfC/5T82mq8hKff/gD2ztt/biv08AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/3f856c9a2c6ca3004d17aba275333e21/f8915/net2.png\"\n        srcset=\"/static/3f856c9a2c6ca3004d17aba275333e21/5a46d/net2.png 300w,\n/static/3f856c9a2c6ca3004d17aba275333e21/0a47e/net2.png 600w,\n/static/3f856c9a2c6ca3004d17aba275333e21/f8915/net2.png 748w\"\n        sizes=\"(max-width: 748px) 100vw, 748px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><a name=\"FN3Xs\"></a></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">单播：点对点通信，一个发送者，一个接收者。\n\n&lt;a name=&quot;Qr4R3&quot;&gt;&lt;/a&gt;\n\n广播：路由器隔绝广播的传播。接收到的包的 mac 地址全是 f,ip 地址全是 1 的为广播通信。全网广播\n\n&lt;a name=&quot;aE4RA&quot;&gt;&lt;/a&gt;\n\n组播：一个组播源，多个组播接受者，组播的包只会发送到组播接受者去。充分利用了带宽。iptv</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 748px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c056dbc19313c4ac6aa0a5300e25b6fa/f8915/net3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB1UlEQVQ4y51T32+TUBjlX/fBxFcT3/TBqA8mLnN7WVysRru17lcnKe3KbEthTu4tAaSDwuVy6RHawIDuQb3JlxDO9517ON9B0r7LUNvHUL+0cX3cgXrUgdZXMLcsEEJAKf2nkmLHxVI34PQHcAdXcJUhlibB/x4p8n1oug7RAFar1YP10Kni0tJ2cDWZIgiCNZim6QZsNObvC5zzBKkQCFmMGXVrpFL4ywRtfQb3gxLI2Qo1TWUv9zrYOTxHyiOMtFs8ftOqKZVExMAzz9Ik2VJVJfv0bYTL/hgs5oi4KAkCz8WqSvg3RoeOg/3WOWT5Go45x+IuRBKG8Lw79CakrhC5iswXY/4bUeajv/BB7QVYsESUDdmWCzrTy6G3B2d4/+EUzKJQRxM82+sWbPcKozjBo1ct3Iw1GGMdL959BdF0TNQpnjw/wK1hrmdEvpBEZLVZUJ5V+eKiXGhJyDnHUBmAZ5vLbyLTWamIZcPWzU8wx22GBTzzM45jCCHqhHkUPG+xbpoRB0932puGIipZ4+vdI3RPFAibYvfjGQ570+JL79ORB7sZVjfzsDccl7krcPmHCcO0188nl0N0e8pWrEqF239CpalCWqi1KMGcmGCM1S7Nzx/lFOPCF8LACAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/c056dbc19313c4ac6aa0a5300e25b6fa/f8915/net3.png\"\n        srcset=\"/static/c056dbc19313c4ac6aa0a5300e25b6fa/5a46d/net3.png 300w,\n/static/c056dbc19313c4ac6aa0a5300e25b6fa/0a47e/net3.png 600w,\n/static/c056dbc19313c4ac6aa0a5300e25b6fa/f8915/net3.png 748w\"\n        sizes=\"(max-width: 748px) 100vw, 748px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br /></p>\n<p><a name=\"M3wO9\"></a></p>\n<h2 id=\"ip-地址的类型：\" style=\"position:relative;\"><a href=\"#ip-%E5%9C%B0%E5%9D%80%E7%9A%84%E7%B1%BB%E5%9E%8B%EF%BC%9A\" aria-label=\"ip 地址的类型： permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IP 地址的类型：</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 748px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ad1493ce9aa03715447a9fcd663601e7/f8915/net4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACEElEQVQ4y6VTi27aQBDk/z+pUdUicABTGmwKIdjYGPw6P84GAsYYe7J3IW1plEpVTxr2nuOZ3aXF0xTOtxGMdgfL7j2WSg9Zlv0VeZ5/eNYCjWr/jIMX4BgyFFGE/xmtpqqQxwmy/R4xqQ2JMCL4no/F0wK6pkPXdUynU2y3W7k2DEOeGQsDs+kM7saVZE3TvCo8lyVSIjscDjgej1L6+XxGXde4XC4SYi4eVLQv90hIdYU4uyHc7XZQugrW6zUsy8agr4LznC7XKMszoZKxrpsPrQoyaVn8MMqdOlAxouJY5hOS2EfEPNjWguzYci5iwkLw/gAZWc3HGnbaBBW5koRXlZJQ2J3oE8znTzDNHjZuD56vSvj+EJ6nYuV06UNrMGcD13GwZRHq4vROpSTkKZfJFgm2LQdhECHwGRUmJDC5djcB8ozSwBhKcnTmGQrbRuF5Mpac/1Lo+z7aX9tke4gg0JAk30nNA2EsI0812lcRRyus+kMYyj0iw8SS3piUglWni5I65SehqCyjLwuEoUtFiqlFYmQ8pCaOsJPzAEVxuLF4IYsXivWflj3Xw92nOygdhSzPaD0n1QuMRm3qtwdSZ8JaamBRAJ/uuFRA5/MXZMMR5bF4XxTRsKZpYmU7RPQDSTolzMCzR6R8RkV7JOVjusewf37t05ze1NdWaX6LrbfF2zidqn/4ozU3ZGK8AA8+1pmpYnvmAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/ad1493ce9aa03715447a9fcd663601e7/f8915/net4.png\"\n        srcset=\"/static/ad1493ce9aa03715447a9fcd663601e7/5a46d/net4.png 300w,\n/static/ad1493ce9aa03715447a9fcd663601e7/0a47e/net4.png 600w,\n/static/ad1493ce9aa03715447a9fcd663601e7/f8915/net4.png 748w\"\n        sizes=\"(max-width: 748px) 100vw, 748px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br /></p>\n<p><a name=\"4O3qn\"></a></p>\n<h2 id=\"如何进行划分子网：向主机位借位\" style=\"position:relative;\"><a href=\"#%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8C%E5%88%92%E5%88%86%E5%AD%90%E7%BD%91%EF%BC%9A%E5%90%91%E4%B8%BB%E6%9C%BA%E4%BD%8D%E5%80%9F%E4%BD%8D\" aria-label=\"如何进行划分子网：向主机位借位 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>如何进行划分子网：向主机位借位</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 748px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/34bb128a794908b4110562fbdbf8b9d2/f8915/net5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB7klEQVQoz52SDW+aUBSG/f+/ZkuWZUmna+PatSoitlWr8ilYKehAQBDQZ9fbbEu6Jt12kif3HMh9733vOQ3zoo1+1sK6vMJTNZE3Mb9eEQUBuzwny7J/olGlGWWSUKUpdV5Q7XbUu5z/jcbLD6UQ3scxpThNxvH4i+Nf0Die9gjqLCWZTHA+fMR5955ls0V9OHAQ/37yMl4V7Og+HT3EsCfMjRmak6DZ3xkYa4bulttlimpHqM4WP0rJxc3ruqYsy1cPaJx9/kL7/AJDH2OZCo6lMhldShb2AMtQuNNa6NYd/fspg77KeDSm2+nieZ4U3u/3EvmGivmEakXYj3foXlfcxGC4mD/j6gzsGbfunNHTkuVmS5ps2aw3hGFIFEWsw7WsT0jBGzvm2kywVzpW6KOuQHELuosCzT8y9E91SU+wijKKfCetVVUl1z+63Gydc9luY1lTQQ93MUBTmyi9T3iuhm0p3A+FZefZsiYsT0Tzbq5vmD5MpXAhxi0XM3t620Z3vkTRA6zlLXO3I+wLq85MWBY4U1RzLJr0wP3KxVvHJGKkTvZ835eW4ygmDEJZF0Uhuty3+TZ4xDD7zIwRSgTqWrB5Xrt9j940pifyqDi8PdhBlBPEe7bphjiNCLKaMCt/E+eESSHzoqrfHPAfFjOHxWbtQX0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/34bb128a794908b4110562fbdbf8b9d2/f8915/net5.png\"\n        srcset=\"/static/34bb128a794908b4110562fbdbf8b9d2/5a46d/net5.png 300w,\n/static/34bb128a794908b4110562fbdbf8b9d2/0a47e/net5.png 600w,\n/static/34bb128a794908b4110562fbdbf8b9d2/f8915/net5.png 748w\"\n        sizes=\"(max-width: 748px) 100vw, 748px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 485px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7409c8b4318879dd58a2531833213ad8/44c61/net6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABxUlEQVQ4y52TbU/iQBSF+f8/Qr9pyC6igrUYEUSaAglCqwlgtesq4mLbbF/se6fHmTESFd3ATnLbSef2zJNzZgqu58GcPuCmdYbrxin0loRxRYDWPMXv/jlupQ60owa0eh3XrTZ0ScbdQIVt23AcZ6kKoCM0LfyqHECvCrgVjzHZKuK+2cK8P4ChXuKh2cbVjxK0nyW+/tjrg2QZ+xV5nn+oAnv87/gstiSY0V2jKEIcx0jTlBfJCMIg5N/fer8SWgiyhvjZR56kGI1GKJfKqB2K2N/bR0fuQGpLKG4XURNrfMM3wW8JFwsk5xTGkwHTNDH/M+fGu46L6f0Us9nsg9B34zUU20VCKRlhtVLFbnkXO6UdnNOUe90elKGCxkkDSZKsJpjRxpx6xWI3DAOWZUHXdU7J5sxTz/VACFlNMPaeKWEARVEgHAi4UC/Q7XQhCiLGo/FSsv8aXJCkGfWQwHVdTuX7PqIw4l6y+fsAViN0PKSUcEi9EoXDRbr14zpURV0SXI2QHgmPXkOWsmM7vJ7YnPq6tmD416GEPgbDIT9/2pUGWZaxubGJyWTCG1kgaxESeiuCIIBF7zV7M++Yh8zLdQhfAEvVKmsELF0zAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/7409c8b4318879dd58a2531833213ad8/44c61/net6.png\"\n        srcset=\"/static/7409c8b4318879dd58a2531833213ad8/5a46d/net6.png 300w,\n/static/7409c8b4318879dd58a2531833213ad8/44c61/net6.png 485w\"\n        sizes=\"(max-width: 485px) 100vw, 485px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 748px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/47984ba61d2bc1a635cae0cdf992b15d/f8915/net7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB1UlEQVQ4y51Ti27aMBTl/39kWrdvmFgZlNFq2kahARqaF6E8EpOHY+d5du0CAoFUrZaOfJ3rXB+fc93azEx4/QGYt0DR1JB5TpCQQkBK+d9olZxDhgxFkqISEmrdVBU+OlrZeoOQWIZTE9HcwnZsQO4inWya5iqujUOudfxwmnyHhfqxruszHA5qQSXLEikXWP8Zwv50A2a5WLsLOLYL+8XWcC0HNsFxXLCAIY1TJFFynIui2BekUZNmmSyw/fUbO7q+WG1gjcbo9froEwZk2v3Pewzat3j41sZqsYTIJHjCNVLS/6ygoivI1fXrCvZkBns8QUJGXbkrUNWo6EZ5XugiB6hr64KnIpfkcp5lyHmGijZdGPKOvkdTVKB6iAchRJxAZkIzKIsShWKyh1rnMj/Gh7Wg/dW+1bQp6lTm+TA/f8GStLJuvuJlOEL3Rw/dThd33Tv0KFaz0vO23UHn+xumxhSCvz2CMw05MYuIoUKw8PHqL+G5HnyKfTpMzaHKU48G2wAb6l+FHdtphiXpelZQUXYcB4+PI8yeTTyNn2AYBibGBMO/Q8zNuS6WJAnJkV9od6GhcimlzWEYIiNj1BXiONYMoigCpyfJGNOx6ojT13Fa9B8V/+WonK8/GAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/47984ba61d2bc1a635cae0cdf992b15d/f8915/net7.png\"\n        srcset=\"/static/47984ba61d2bc1a635cae0cdf992b15d/5a46d/net7.png 300w,\n/static/47984ba61d2bc1a635cae0cdf992b15d/0a47e/net7.png 600w,\n/static/47984ba61d2bc1a635cae0cdf992b15d/f8915/net7.png 748w\"\n        sizes=\"(max-width: 748px) 100vw, 748px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br /></p>\n<p><a name=\"p36om\"></a></p>\n<h2 id=\"私有-ip-地址：\" style=\"position:relative;\"><a href=\"#%E7%A7%81%E6%9C%89-ip-%E5%9C%B0%E5%9D%80%EF%BC%9A\" aria-label=\"私有 ip 地址： permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>私有 IP 地址：</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 748px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2bb98d87e8c495d1dc60ad4be131cbf5/f8915/net8.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABUUlEQVQoz51S226CQBD1/z+rTVq8IHJZraCCEusiNLZahIXo6c4YDLbxwU4ymZ3Lnp05sx1oqQ7fyLcpjtkHjtqWn1/4r3RwPiPf7TBbhJiHIYL5AokGJTnrHOnpdGLblt9+E+s0iW2yxViM8TaeYBlF8H0fnuvBHtl4fnrGyBoh8AN0jS4c24HwBIQQnJ8FM+z3+0uHDWAiE1hDC8arAc/zEK9iBiTg6dTnSwTkOA4Wegq5kZjox6kmCAJkWXYLWJYlpJScSPXISqmH+eOR23yQjcII63iN/JBjs97wmEQFdUPnRuW7hCoU6qq+cn3tsHGKooBru7AtWwMvsYpWEK6A2TdhvBgcp7w5MJnDNElvmrlsueXQ2ER+v9tnoHipeXQ89ntGD0PTYtBBb8DLoBpVqvuAZCtVMX9VVaGua7bkt5Vqmjh9qT+A9/7VI8to5AdLx/hFIWLurwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/2bb98d87e8c495d1dc60ad4be131cbf5/f8915/net8.png\"\n        srcset=\"/static/2bb98d87e8c495d1dc60ad4be131cbf5/5a46d/net8.png 300w,\n/static/2bb98d87e8c495d1dc60ad4be131cbf5/0a47e/net8.png 600w,\n/static/2bb98d87e8c495d1dc60ad4be131cbf5/f8915/net8.png 748w\"\n        sizes=\"(max-width: 748px) 100vw, 748px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 485px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7409c8b4318879dd58a2531833213ad8/44c61/net9.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABxUlEQVQ4y52TbU/iQBSF+f8/Qr9pyC6igrUYEUSaAglCqwlgtesq4mLbbF/se6fHmTESFd3ATnLbSef2zJNzZgqu58GcPuCmdYbrxin0loRxRYDWPMXv/jlupQ60owa0eh3XrTZ0ScbdQIVt23AcZ6kKoCM0LfyqHECvCrgVjzHZKuK+2cK8P4ChXuKh2cbVjxK0nyW+/tjrg2QZ+xV5nn+oAnv87/gstiSY0V2jKEIcx0jTlBfJCMIg5N/fer8SWgiyhvjZR56kGI1GKJfKqB2K2N/bR0fuQGpLKG4XURNrfMM3wW8JFwsk5xTGkwHTNDH/M+fGu46L6f0Us9nsg9B34zUU20VCKRlhtVLFbnkXO6UdnNOUe90elKGCxkkDSZKsJpjRxpx6xWI3DAOWZUHXdU7J5sxTz/VACFlNMPaeKWEARVEgHAi4UC/Q7XQhCiLGo/FSsv8aXJCkGfWQwHVdTuX7PqIw4l6y+fsAViN0PKSUcEi9EoXDRbr14zpURV0SXI2QHgmPXkOWsmM7vJ7YnPq6tmD416GEPgbDIT9/2pUGWZaxubGJyWTCG1kgaxESeiuCIIBF7zV7M++Yh8zLdQhfAEvVKmsELF0zAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/7409c8b4318879dd58a2531833213ad8/44c61/net9.png\"\n        srcset=\"/static/7409c8b4318879dd58a2531833213ad8/5a46d/net9.png 300w,\n/static/7409c8b4318879dd58a2531833213ad8/44c61/net9.png 485w\"\n        sizes=\"(max-width: 485px) 100vw, 485px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>"},{"id":"544ca156-d750-5f5b-ab90-326ad1bfb1ad","headings":[{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"TCP服务端和浏览器端的三次握手和四次分手","path":"/tcp","tags":["Network"],"excerpt":"TCP服务端和浏览器端的三次握手和四次分手","created":"2021-02-20 21:45","createdPretty":"20 February, 2021","updated":"2021-04-11T00:00:00.000Z","updatedPretty":"20 February, 2021","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC3klEQVQozxXQ+U/TABQH8P4LEmVXt64dTA4vHBhAMgkTGfFABAyoQdQEVMADPH4y/ED8BQUThIRIBFFuI45zAyZsZaO03cqOHqNd143ThN/8CyzffPJ+ee/98B7w8UNXX2/f6OCQbWxi8bdtdcGOOle9Lg/mxXHMR/kCfsJP4WQAJ3wYseYlVlHMvuKZW3ZP251AR09f99cfA+NTU/OOpRXUs47LYzwvfO7uzr2QU3KleHRkJB6TOJqOsnSUDm0FKNqPB3Av7nEBnYPDX37aRu3Oaff6Mk6hVAgLMmExXnarIi//ormw8ElT887fQzoiMLzIbPFhltsMhUnKv45jwI/J0RnH/B+P20viZJCi6CDNR6hgIC09rbbuwdPGJoVSueRc3tnb5aOCIEZ5UeC2OJoNbQZJYHZuAkUdPhINBQmG2WS5oBDl5Cuzs03JyckajQZBEOeyY38/IUq8JAmStBWLsaIQEjgCmJn+5l6dIoml0KabDWMRjohwvkScqa6uUiiUIAiazQVSjE0kIgmJ3ZaYRCwcFwNxnhQZFHANvMMmO0lbLzXXH3IMimvjh4EFt+2rwWDQ6XRqtcZkyhL8zkNhY18gDqKyjQPRuy+gO6wdwL+1hn+1M7NdorNPdA1EXUOia+huuTVZoUJgGAS1melG0f39X3jmMGjb9U3ubIxsY98TaH9ssQMYaiiZby1ffFvtaqtzt9cvtDXWl5WcUKphGNZDkEqtNueYxtpeT7a/mX/fQn9qlXpaDvpf7A0//2trASxZ52/n59VfsTyyWp/dLHtVVXE2zQhqdRCkMyAGPQxnnkyrthQ/Li1pLi1qr7R21Fg775W+rb3x8v51IP10tjEzK1WWITsHGzPkPRhGtCCYXWAx5V3S6nRFlQ/h9FPHVaokFXhMoU5SaiDjmUyTGdAfBdJDWj2kk8FHVY5e/ta1Ow2Xb9TI7QLL1RRDigGGU5EjKQiMwFBObv5/em2D0Ey6GTsAAAAASUVORK5CYII=","aspectRatio":1.6025641025641026,"src":"/static/f1c2b97eb13574766d32aacd28ee9c75/0853f/couple.png","srcSet":"/static/f1c2b97eb13574766d32aacd28ee9c75/14156/couple.png 125w,\n/static/f1c2b97eb13574766d32aacd28ee9c75/d6e47/couple.png 250w,\n/static/f1c2b97eb13574766d32aacd28ee9c75/0853f/couple.png 500w,\n/static/f1c2b97eb13574766d32aacd28ee9c75/ce627/couple.png 750w,\n/static/f1c2b97eb13574766d32aacd28ee9c75/9dbcf/couple.png 1000w,\n/static/f1c2b97eb13574766d32aacd28ee9c75/87046/couple.png 1920w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1031px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6b51daad90009cb69b9edc04b133994d/23592/tcp.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.333333333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAlklEQVQY042QSw4DIQxDuf9Zp6IzfJMw0KemYtFFVWEEcbBjEe55/4kuvbbqKLW03gI7PuNcC/wW55Jt2LgHdzWlDGzErdeUk5jup3NNx2aYRsn78zq5UAbCcIjJ8ThEFRZvgLewTL0ELiYzevcKn5kq+G0BgIxnTDnrMGeudH3H5sAMyhve89iLj5i6k78/rDAQoET1AsSWX4lcrCKoAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tcp\"\n        title=\"tcp\"\n        src=\"/static/6b51daad90009cb69b9edc04b133994d/23592/tcp.png\"\n        srcset=\"/static/6b51daad90009cb69b9edc04b133994d/5a46d/tcp.png 300w,\n/static/6b51daad90009cb69b9edc04b133994d/0a47e/tcp.png 600w,\n/static/6b51daad90009cb69b9edc04b133994d/23592/tcp.png 1031w\"\n        sizes=\"(max-width: 1031px) 100vw, 1031px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>有图可知，由于 HTTP 只有请求和响应的概念，信道连接需要通过 TCP 来完成的，因此让我们先来谈谈 TCP 的三次握手和四次分手吧</p>\n</blockquote>\n<h2 id=\"三次握手\" style=\"position:relative;\"><a href=\"#%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B\" aria-label=\"三次握手 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>三次握手</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 543px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a98fd5b57c7cb69e93dd4c06df8f1eee/fcee8/3times.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFAv/EABUBAQEAAAAAAAAAAAAAAAAAAAID/9oADAMBAAIQAxAAAAGi6o4jJNFD/8QAGRAAAgMBAAAAAAAAAAAAAAAAAQIAAxET/9oACAEBAAEFAqie0RmypSLYiHP/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPwEn/8QAFxEBAAMAAAAAAAAAAAAAAAAAAAECMf/aAAgBAgEBPwG2pf/EABsQAAIBBQAAAAAAAAAAAAAAAAABEAIDETFR/9oACAEBAAY/ArmW42yt9hn/xAAdEAADAAICAwAAAAAAAAAAAAAAARExUSFBYZHR/9oACAEBAAE/IWEMLpXyeyxc2xppPo52L0mT/9oADAMBAAIAAwAAABCEL//EABcRAAMBAAAAAAAAAAAAAAAAAAABETH/2gAIAQMBAT8QyKw//8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8QUV//xAAbEAEAAwADAQAAAAAAAAAAAAABABEhMVFh8f/aAAgBAQABPxA+BWxIa46glzre3q25REcsNU7ygfCCi23F88n/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"3times\"\n        title=\"3times\"\n        src=\"/static/a98fd5b57c7cb69e93dd4c06df8f1eee/fcee8/3times.jpg\"\n        srcset=\"/static/a98fd5b57c7cb69e93dd4c06df8f1eee/f93b5/3times.jpg 300w,\n/static/a98fd5b57c7cb69e93dd4c06df8f1eee/fcee8/3times.jpg 543w\"\n        sizes=\"(max-width: 543px) 100vw, 543px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol>\n<li>客户端首先要 SYN=1,表示要创建连接</li>\n<li>服务端接收到后，要告诉客户端：我接受到了！所以加个 ACK=1 表示确认跟客户端创建连接，因为 TCP 连接是双向的，然后还需要发送 SYN=1 表示我也想跟你连接</li>\n<li>理论上这时就创建连接成功（也就是半连接状态）了，但是要防止一个意外(也就是下面的为什么需要三次握手)，所以客户端要再发一个消息给服务端确认一下，这时只需要 ACK=1 就行了</li>\n<li>三次握手完成</li>\n</ol>\n<blockquote>\n<ul>\n<li>SYN：代表请求创建连接，所以在三次握手中前两次要 SYN=1，表示这两次用于建立连接；</li>\n<li>ACK：代表确认接受，不管是三次握手还是四次分手，在回应的时候都会加上 ACK=1，表示消息接收到了，并且在建立连接以后的发送数据时，都需加上 ACK=1,来表示数据接收成功；</li>\n<li>seq：序列号，什么意思呢？当发送一个数据时，数据是被拆成多个数据包来发送，序列号就是对每个数据包进行编号，这样接受方才能对数据包进行再次拼接。初始序列号是随机生成的，这样不一样的数据拆包解包就不会连接错了。（例如：两个数据都被拆成 1，2，3 和一个数据是 1，2，3 一个是 101，102，103，很明显后者不会连接错误）</li>\n<li>ack:这个代表下一个数据包的编号，这也就是为什么第二请求时，ack 是 seq+1，</li>\n<li>为什么需要三次握手？---------------如果一个连接请求在网络中跑的慢，超时了，这时客户端会重发请求，但是这个跑的慢的请求最后还是跑到了，然后服务端就接收了两个连接请求，然后全部回应就会创建两个连接，浪费资源！如果加了第三次客户端确认，服务端在接受到一个客户端连接确认请求后，后面再接收到的连接确认请求就可以抛弃不管了。<br />-------------- 还有一个原因是：因为 TCP 连接时双向的，所以不仅需要连接客户端和服务端的单向连接，还需要连接服务端和客户端的单向连接，在第二次服务端发送了 SYN=1 请求连接的时候还需要客户端发送 ACK=1 来确认连接才能成功双向连接。</li>\n</ul>\n</blockquote>\n<h2 id=\"四次分手\" style=\"position:relative;\"><a href=\"#%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B\" aria-label=\"四次分手 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>四次分手</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 564px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/263613d85ce82dc31dc9281013861de6/7723c/4times.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAQABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABAADBf/EABYBAQEBAAAAAAAAAAAAAAAAAAECA//aAAwDAQACEAMQAAAB6aRsQNnaT//EABkQAAIDAQAAAAAAAAAAAAAAAAABAgMRBP/aAAgBAQABBQKicpCelds2ufUIqTz/xAAWEQEBAQAAAAAAAAAAAAAAAAAAATH/2gAIAQMBAT8BmI//xAAYEQACAwAAAAAAAAAAAAAAAAAAAQIRMf/aAAgBAgEBPwGWjo//xAAbEAABBAMAAAAAAAAAAAAAAAAAAQIRMRIhQf/aAAgBAQAGPwJ2Slm1HzNnSlP/xAAcEAACAgIDAAAAAAAAAAAAAAAAARExIVFBcYH/2gAIAQEAAT8htZDhYE0kMb5NC4BOg0qvRLzZo//aAAwDAQACAAMAAAAQaA//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREh/9oACAEDAQE/ENhnD//EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAgEBPxDIwhq//8QAGhABAQEBAQEBAAAAAAAAAAAAAREhADFBwf/aAAgBAQABPxATxPAQ3jlLSXPT51taMMGQ47SCVFN5WwKmJ+cCeblXkO//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"4times\"\n        title=\"4times\"\n        src=\"/static/263613d85ce82dc31dc9281013861de6/7723c/4times.jpg\"\n        srcset=\"/static/263613d85ce82dc31dc9281013861de6/f93b5/4times.jpg 300w,\n/static/263613d85ce82dc31dc9281013861de6/7723c/4times.jpg 564w\"\n        sizes=\"(max-width: 564px) 100vw, 564px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol>\n<li>首先客户端请求关闭客户端到服务端方向的连接，这时客户端就要发送一个 FIN=1，表示要关闭一个方向的连接（见上面四次分手的图）</li>\n<li>服务端接收到后是需要确认一下的，所以返回了一个 ACK=1,现在处于半关闭状态，服务端还可以发送数据给客户端（关闭了客户端向服务端发送数据的信道，但 TCB 还未销毁，仍可发送 ACK）</li>\n<li>这时只关闭了 TCP 一个方向，另一个方向也需要关闭,如果服务端没有数据发送给客户端了，服务端也向客户端发了一个 FIN=1 ,ACK=1，当然也要有 seq 和 ack</li>\n<li>客户端接收到后发送 ACK=1，表示接受成功</li>\n<li>服务端接收到客户端发来的 ACK=1 后关闭 TCP 连接，销毁 TCB（什么是 TCB 见下）</li>\n<li>客户端等到 2MSL 后再销毁 TCB（什么是 2MSL 见下）</li>\n<li>四次分手完成！</li>\n</ol>\n<blockquote>\n<ul>\n<li>FIN：表示请求关闭连接，在四次分手时，我们发现 FIN 发了两遍。这是因为 TCP 的连接是双向的，所以一次 FIN 只能关闭一个方向。</li>\n<li><strong>注意</strong>：TCB 传输控制块是客户端和服务端在请求连接和关闭连接时都会生成的，在请求连接成功和关闭连接成功时销毁，ACK，ack，FIN，seq 等通过 TCB 发送给对方。</li>\n<li>为什么客户端需要等到 2MSL 后才能关闭？---------------服务端在要分手的时候，如果由于某些网络原因没有收到客户端说的确认，那么它会再说一次分手，也就是重发 FIN，如果客户端在说完确认之后就关闭了 TCP 连接，那么服务端是不知道客户端到底能不能和它和平分手的，那么它的端口就一直不能关闭，所以需要客户端等待 2MSL 再关闭 TCP 连接。</li>\n<li>为什么需要四次分手？--------------TCP 是双向的，所以需要在两个方向分别关闭，每个方向的关闭又需要请求和确认，所以一共就 4 次。</li>\n<li>为什么服务端不一起发送 FIN 和 ACK 呢？这样才三次握手-----------------------在客户端说了分手之后，它还是可以接受数据的，只是不能发送而已，如果只有三次握手，服务端在没有发完数据的情况下就关闭了 TCP，那么客户端得到的数据是不完整的，所以服务端需要在客户端请求关闭连接的时候第一次就发送 ACK 说我收到了，但是你再等等，我还有数据没有发完给你，等发完之后，才发送 FIN 关闭 TCP 连接。</li>\n</ul>\n</blockquote>\n<h2 id=\"参考\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83\" aria-label=\"参考 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<blockquote>\n<ul>\n<li>此文章参考链接：<a href=\"https://baijiahao.baidu.com/s?id=1593714120815701015&#x26;wfr=spider&#x26;for=pc\">TCP 的三次握手和四次分手</a></li>\n<li>2MSL 解释：<a href=\"https://blog.csdn.net/zxx2096/article/details/80286577\">2MSL 是什么？</a></li>\n</ul>\n</blockquote>"},{"id":"15a5ed16-70d5-5b18-8420-566e95f360fc","headings":[{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"深入浅出防抖和节流","path":"/throttle","tags":["JavaScript"],"excerpt":"深入浅出防抖和节流，原理及其实现","created":"2021-02-20 21:45","createdPretty":"20 February, 2021","updated":"2021-04-11T00:00:00.000Z","updatedPretty":"20 February, 2021","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAADJElEQVQozwEZA+b8AHdrPYuDYsHHz8/b8c/a8cvZ8cvY8s3a8svX7cjZ9cPT7cHS8L7P6rzM5rrL57bK56/G5qfA46C84Zi33wDIkxirfxm2lVLYxafy6N3nzZ7RrmbNrm/TqlfVuILFspDRvJXx6uf29//y8vjw8Pfu7/br7PXl6PHg5PAAoHkgtIkpo3wqvY0qn3kuiGUUkmoOpHcbonYZgl0LeloUfFwSpYVG18Sp+fT0+PX3+fb4+Pb5+vn++Pb6AMCOHbuLGbCCHaV6HqmAI513Jq6AIIpnHndcIHlbFW9UGFRDG2FJFH9fG8Gqhvr5+/v6//f09urj3uro7ACkdwuhdRPAihfcnRO3hRqtgByjdhJqTRBoThzHp3rFoGB0Vg6HZyVrUx+RdDvDsZXGtJm4mV61izjAn2IAgWUtkWoTbVAPj2gQgmEYdlsYn3sryqt32b2cv6CNqo1wnHIdnHIcaVEglW8il3AgdFokgF4clG4jnngsAGtaSn1jL31jLLqLKLKBFbeDDta2iebPx9S3obCPeLeVZqV8IoFgIINkIYJkJ2pSJFNDImVOIn5fIHZZHwBdUTVjVzpfUzmWdjiVcy6ediXCn3SWe2CWeVt3X0mSc0aLaix2XCluViWTcS13XzRMPCZfSh1aRh1QPhkAgHJEd2c9YVYyWE4tknhLjHdKh3FLaVY2VEMqRTUge2hWh3RpcmFVcGJWb1xEfmpSeGFHf2ZBZ1IvcVoqAGNeMW5jOIZ4RIF3PYV2QoBvP4t4SH1tQXZkPltOMExEKmVZPn5sVG9cSWBONoBqSIRsSn9nR2hVPW1ZQAA4Pxs9RR9cWytYWChYWChdWCteWC1fVi92aDl0ZDtdUi96ZzyIdUWLeESMe0eIeEN8aUBoWDlyYEBxXkMANkUYM0EXLzsVREkbc3Avb2ktWVglVlYkRkchMTQYb2M4q49Zk39KjoJDjoREhXxBgnlBiX9HfnFEfG1FAElTIThDGT1IGVldI2hnJoB3NXdyMnZxMFpdJFNWJJmCQ7SUUZ6JSIx+PoV+Oo6GQY6FQoqBQ4Z9Q4B3QYwzbEDSMTK5AAAAAElFTkSuQmCC","aspectRatio":1.5060240963855422,"src":"/static/d99d21ec126a5af8d06217620c9096c0/0853f/sheep.png","srcSet":"/static/d99d21ec126a5af8d06217620c9096c0/14156/sheep.png 125w,\n/static/d99d21ec126a5af8d06217620c9096c0/d6e47/sheep.png 250w,\n/static/d99d21ec126a5af8d06217620c9096c0/0853f/sheep.png 500w,\n/static/d99d21ec126a5af8d06217620c9096c0/ce627/sheep.png 750w,\n/static/d99d21ec126a5af8d06217620c9096c0/9dbcf/sheep.png 1000w,\n/static/d99d21ec126a5af8d06217620c9096c0/87046/sheep.png 1920w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<h2 id=\"前言\" style=\"position:relative;\"><a href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"前言 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>前言</h2>\n<blockquote>\n<p>连续尝试进行过多的 DOM 相关操作时，这很可能会导致浏览器挂起，有时候甚至崩溃<br>\n此时，就需要节流和防抖来使某些代码不可以在没有间断的情况下连续重复的执行。</p>\n</blockquote>\n<h2 id=\"节流\" style=\"position:relative;\"><a href=\"#%E8%8A%82%E6%B5%81\" aria-label=\"节流 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>节流</h2>\n<blockquote>\n<p><strong>节流</strong>：让事务在一段时间间隔内周期性的执行（举个栗子：就好像不让水龙头一直不停的流，而是把水龙头揪紧一丢丢，让它一滴一滴周期性的流下去，以此达到节流的效果）\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 783px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f3e802c8fe48caf53a3ad297851151c8/e51a6/throttle.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABBElEQVQoz12RaQqDMBCFvf+l1BP4Q6lYEMTWfV9wj9O8oZHagYfxy6wZ7TxPgmBCiEtgQhy0LAvN80zrun2ZYDZNE0v5Kmn0tW3bKE1Ter1CqpuG2bHvF6uqWrnKc0VR9KY4junfNFTP85z6vqe6rqkoCirLksIw5MC2bVlgvu+zL86NLJokCfshMc7HcZCG9l3XlRUjvsiyjLtyHIe/EBgEhiIqoed5FAQBjeNIXdfx+BoudF2/tQ1mGMaNoft/ZlkWJ72NjOymaXInV0IZbNs2P7pa2DAM5D4e1MuvYkjmPZ88KuxaCsC6rldCPAMKLT8MSwPDm8tIjuFty/9dLg/jgn0AO2MYJklAzCUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"throttle\"\n        title=\"throttle\"\n        src=\"/static/f3e802c8fe48caf53a3ad297851151c8/e51a6/throttle.png\"\n        srcset=\"/static/f3e802c8fe48caf53a3ad297851151c8/5a46d/throttle.png 300w,\n/static/f3e802c8fe48caf53a3ad297851151c8/0a47e/throttle.png 600w,\n/static/f3e802c8fe48caf53a3ad297851151c8/e51a6/throttle.png 783w\"\n        sizes=\"(max-width: 783px) 100vw, 783px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">func<span class=\"token punctuation\">,</span>wait</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> timeoutID<span class=\"token punctuation\">;</span>                                <span class=\"token comment\">//初始化定时器</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>                            <span class=\"token comment\">//调用throttle则返回此闭包</span>\n        <span class=\"token keyword\">let</span> args<span class=\"token operator\">=</span>arguments<span class=\"token punctuation\">;</span>                       <span class=\"token comment\">//保存传给闭包的参数(比如：event对象)</span>\n        <span class=\"token keyword\">let</span> context<span class=\"token operator\">=</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>                         <span class=\"token comment\">//保存闭包的执行环境</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>timeoutID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>                             <span class=\"token comment\">//如果定时器不存在</span>\n            timeoutID<span class=\"token operator\">=</span><span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>        <span class=\"token comment\">//则创建一个新的定时器</span>\n                <span class=\"token function\">func</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">,</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>            <span class=\"token comment\">//绑定func的执行环境为调用闭包的this环境，传入func的参数为调用闭包的参数</span>\n                timeoutID<span class=\"token operator\">=</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>                     <span class=\"token comment\">//执行完func重置timeout</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>wait<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>                             <span class=\"token comment\">//在wait时间后将匿名函数插入执行队列</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token number\">1.</span>函数的目的是：定义一个定时器，如果定时器不存在，则创建一个新的定时器，并执行函数func；\n<span class=\"token number\">2.</span>函数返回闭包的原因：为了保持timeoutID变量一直在内存中<span class=\"token punctuation\">,</span>调用throttle函数返回的都是<span class=\"token operator\">**</span>执行过后<span class=\"token operator\">**</span>的闭包函数来访问timeoutID<span class=\"token punctuation\">,</span>通过timeoutID来判断调用throttle时是否存在定时器<span class=\"token punctuation\">;</span>\n<span class=\"token number\">3.</span>注意：apply和call不仅会绑定函数的执行环境和传入参数，还会立即执行函数</code></pre></div>\n<h2 id=\"防抖\" style=\"position:relative;\"><a href=\"#%E9%98%B2%E6%8A%96\" aria-label=\"防抖 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>防抖</h2>\n<blockquote>\n<p><strong>持续防抖</strong>：如果持续触发事务，则不执行，在停止持续触发事务一段时间后，再执行事务（举个栗子：坐电梯时，如果在电梯内持续有人按电梯的楼层号，那么电梯是不会启运行的，当没人按楼层号时，电梯会在一小段时间间隔之后才会运行.以此达到持续防抖的效果）\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 545px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4cda95ff862e24da35e4bc7a2c4670cf/3ddad/allthetime.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABSElEQVQoz31S24rCMBDt/3+GSBEFn/yC9YKIl1VLLwou9UWxVVtTtNjas5lZUmrKOnDIZJKcmTkZA9KKoqjh9XrV9nmel6CYels1QwXSNMX3YoHJZIKFXKfTKay1hd3Pjs+PxwPWqxUc18FoNEIQhBwnckqmYFDw+Xzy5j/7dKaboaqjrJvNBq7rvoFiw+EQy+USnufBcRwMBgPYts2+DkMxt9ttWJYFIQTO5zMulwuu1yv74/EYYRgiiiLZ+pGJyac7OpgwjmP0ej1st9taC3TWbDaZnCwIAnS73c8t51n2RqgEVnI0Gg0kScJ73/dhmmb50zqY8CarmMlfnc3nuN8ff+NAxPIREXQ6Hfj7PcdPpxNarVZZUXV8SkI9S/WyEDfWlUBGmvb7XzhILaM4qs2ioQ9mNYFu1GaaPlh8qlQkohz4TMpG/i+JQvkj4FsVqQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"allthetime\"\n        title=\"allthetime\"\n        src=\"/static/4cda95ff862e24da35e4bc7a2c4670cf/3ddad/allthetime.png\"\n        srcset=\"/static/4cda95ff862e24da35e4bc7a2c4670cf/5a46d/allthetime.png 300w,\n/static/4cda95ff862e24da35e4bc7a2c4670cf/3ddad/allthetime.png 545w\"\n        sizes=\"(max-width: 545px) 100vw, 545px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">func<span class=\"token punctuation\">,</span> wait</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timeoutID\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> context <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span>\n    <span class=\"token keyword\">let</span> args <span class=\"token operator\">=</span> arguments\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timeoutID <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timeoutID<span class=\"token punctuation\">)</span> <span class=\"token comment\">//如果存在定时器，则将清除定时器</span>\n    timeoutID <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">//再次创建新的定时器</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"立即防抖\" style=\"position:relative;\"><a href=\"#%E7%AB%8B%E5%8D%B3%E9%98%B2%E6%8A%96\" aria-label=\"立即防抖 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>立即防抖</h2>\n<blockquote>\n<p><strong>立即防抖</strong>：让事务开始触发时立即执行，然后持续触发事务时不执行，当停止触发事务一段时间后再将事务插入任务队列。（再举个栗子：一直按住弹簧，它不会弹起来，如果突然松手之后，它就会立刻弹起，如果在弹起的过程中又持续按住了弹簧，又突然松手，它就会在一段微小的时间间隔之内再次弹起。以此达到立即防抖的效果。）\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 730px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/66cf8900150119788e4a359330310bb9/e9beb/rightnow.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABCElEQVQoz3VSyaqFMAz1/79Id36ALkTsQsER6zwhvD5EzW1yqahXA4c0AzkZqu37DgpP8hQ72/eYdnZWVQmMeeD7PgRBAPM8H4l1XUMYhjKnuhDdod0Ztm2DTfpQnwULcp6THsYB3oQ6ROaiKAhlWR5Am3MOnufRO89zshljkGXZEVexpmm+BTEBHcMwQNd1F4zjCI7jQBzHME0TdH0HrusSYd/3R17btpRLBQ3DoGJvous6EZ7tZVneR7Ysi9jvl1R7tG2bxlI7Nk2TGljX9fcoyIQXjaIIUrmXJE0hlVCnQiLcF+1ZjomCu0qS5GjiUhAZhRAg/sVXiz/ST3/s6Q/Sr5DAblF/AElktFB1Q5NcAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"rightnow\"\n        title=\"rightnow\"\n        src=\"/static/66cf8900150119788e4a359330310bb9/e9beb/rightnow.png\"\n        srcset=\"/static/66cf8900150119788e4a359330310bb9/5a46d/rightnow.png 300w,\n/static/66cf8900150119788e4a359330310bb9/0a47e/rightnow.png 600w,\n/static/66cf8900150119788e4a359330310bb9/e9beb/rightnow.png 730w\"\n        sizes=\"(max-width: 730px) 100vw, 730px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">func<span class=\"token punctuation\">,</span> wait</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timeoutID\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> context <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span>\n    <span class=\"token keyword\">let</span> args <span class=\"token operator\">=</span> arguments\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timeoutID <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timeoutID<span class=\"token punctuation\">)</span> <span class=\"token comment\">//如果存在定时器，则清除定时器</span>\n\n    timeoutID <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      timeoutID <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span> <span class=\"token comment\">//定时器在wait时间后清零</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> wait<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timeoutID <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">//如果不存在定时器(timeout=null)，则执行函数</span>\n      <span class=\"token function\">func</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>因此个人认为，防抖和节流的共同作用都是让浏览器节约成本的操作，区别是实现和节约成本的方式不同。</p>\n</blockquote>\n<h2 id=\"参考\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83\" aria-label=\"参考 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"http://blog.poetries.top/2018/12/21/js-debounce/#at?hmsr=toutiao.io&#x26;utm_medium=toutiao.io&#x26;utm_source=toutiao.io\">一个写的很好的博客</a></li>\n</ul>"},{"id":"fe967101-6d5d-5486-ac8d-ba36eb18c2a6","headings":[{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"webpack中五个容易混淆的知识点","path":"/webpack","tags":["JavaScript"],"excerpt":"webpack中五个容易混淆的知识点","created":"2021-02-20 21:45","createdPretty":"20 February, 2021","updated":"2021-04-11T00:00:00.000Z","updatedPretty":"20 February, 2021","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAADFklEQVQozxXO7U/TCADH8b7UHA926x7ade3abd06242Wjm7rYMCeYGwMcBeYW3ZmMDQD9bLzeBhwM27yNCdMFBUkKCZGhuaCBi+od4nmLvfCy/1NluT39pPvD1A2n0MUP+DqFhIGzTqQQpU2HLIbNRwFuxisWzD3ddqHQp7USP/VK2O3rl+7vTi3tbnVaLz99PEPQNF0DpaxptWkAy16pRWDWELVboZdNp2PJ4IuOuLlEhHfT2Ox/GRmsVhYr1ae7j5pNN4cHx8DUMt5WNGkVzUbtC2yP8Okmqe0glUn0obRuC034cym3JPZ4cLP+Tvl4v366vbu1v6LvZcHLwAUaiK0LYS2VcYk3EqhoM0AsSZNF68bDBNDMTyRILJZYTwXKi5EllcLtc272zv3H+/UH21vADKT39I4ZMUUZhSU4yYUNCKKXlE7Moh4PepwAMtN87lpLpe3L6+Pr1bLG1vL9Ydr1VrlDFsxJUtqHEa1nVQxBETpFZQelHgo4tfHw4bBAUPiEpVOtY0l7ber4fVauraxUFlZWFwqAJi62YIp20xakUZcNkSktZxJxVFqX4fK0w51Cmq76YJAwyEfHhsiJ67TK2vhYnFqdiY/dS0NGBHQTmrcNCJd1HkZuJNFPBcRidGHJTbWJ/R4CVJ33unAhyJt3W50OE6Uyj3z82P58dFMIgKwhMZpgWXcxSABDgkJaKAdCzgto1FHNMhwFNgtGvp72/1eR0iyxMPk5bRhItN5OdabCLoBhwkWrWdZWUY9+qhEDIjGETfe52j1kE1d9IV+CZ0cdSZHpGgfH/GzA36mp4MZkNioh5HLkGhRdzFan10TFHRBHgtwWLJDn2yDUzz+I4fngvx8OpC65PL7TD7RLFjRDhvstiHdLAbMTqXnplNz+WTxRqY8c3Vt6WbtzkzpZva36cytdHw2M7y3UdmplXYfrzy4t1ivLtUqM2ulQrX0S/nXSeBwb/No/+HB9vrrZ/WTw/2/3h+e7d3h36fH//558u3L6f//fP7v6+nnd69OjvY+HD0/ffvyQ+P5+1fPfj949B0NpOhRHZ8n2AAAAABJRU5ErkJggg==","aspectRatio":1.5060240963855422,"src":"/static/87f90b87c54b86eb166522b63f27a280/0853f/bonsai.png","srcSet":"/static/87f90b87c54b86eb166522b63f27a280/14156/bonsai.png 125w,\n/static/87f90b87c54b86eb166522b63f27a280/d6e47/bonsai.png 250w,\n/static/87f90b87c54b86eb166522b63f27a280/0853f/bonsai.png 500w,\n/static/87f90b87c54b86eb166522b63f27a280/ce627/bonsai.png 750w,\n/static/87f90b87c54b86eb166522b63f27a280/9dbcf/bonsai.png 1000w,\n/static/87f90b87c54b86eb166522b63f27a280/87046/bonsai.png 1920w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<h2 id=\"1webpack-中，module，chunk-和-bundle-的区别是什么？\" style=\"position:relative;\"><a href=\"#1webpack-%E4%B8%AD%EF%BC%8Cmodule%EF%BC%8Cchunk-%E5%92%8C-bundle-%E7%9A%84%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F\" aria-label=\"1webpack 中，module，chunk 和 bundle 的区别是什么？ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.webpack 中，<code class=\"language-text\">module</code>，<code class=\"language-text\">chunk</code> 和 <code class=\"language-text\">bundle</code> 的区别是什么？</h2>\n<p><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 657px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/be2141af3283bf7c9127ae8874c0ba52/a1253/img.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVQozwGfAmD9AN7u6avi2K3j2qDe08Lo497i5rjBxbrCx7nBxr/Hy7vDx7rDx7a/xNHV197q8rvY6r3a673a67jY6t/q7wCd3soixo47zJoIvX1U26OamJcKHSUaLDQ4Rk1cZWtCT1UXKjIJHylhY2Of0eVSsNhvudpwuttGqtibzucAm93IAJG+DI7fAInWF5flQprXM36ePoKZQ4edQoacQoacP4OZMHKJU4aiZ7frDI3cG5TdHJPeDpDZnM/nAJvcyQWQsyKPzRaKxhaK2y+s+lnN/WPf/1/e/2De/2He/2Hf/1/V/DC5/wCH/wR5/QeA/wmA/wB78ZvN5gCb3MmY0Cfk4R/V3BDk4ETB2b5sy+ld1vlk1/h72vZs2Pdc1/ldyet8t8mHwMc6n6lFo6dHpKUum7Kcz+cAmNzLbMM7s9AmoMskwdVNzuC0gdXrXdX6Xtf6Xtf6X9f6XNf6bdLvuNzI8+Jl9dsN9N4S/+MJuMY1nc3mAJjcyojKL9ndLMbVGdLbR7/KpWKdrEORq0WRqkSRqkWRqkWSqz+DmoKcma/RvkunllerlVutkzmipJvO5wCX3MuKxyvg2RnO0hLc2ULM16x/zeFd2v9o3P593/1u3P9e2/9q1PWp2NPj3Hzm1x7n2yT04R2uxEOdzuUAl9zKXsM9oNEyjMopstldtsGlSoGQN4CYOoCYQIGYO4GYOYGZMnSLfpeWs9O+SqaUV6uTXK2ROqGjm87nAN3t6Iva04nb2YTb17Tq6tzb4aqtsLKys7Gxs6+xs7Cxs7KytKuusMvLzNzq+KPS86nU9KbT86fT8N/p7wD08vP88O7/8e7/8/D78/H29vT9/f37/f37/f38/f37/f37/f38/f34+fj28/D/9u/99e368ur48ery8fDrA7XUJdQeIQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1604373359405.jpg\"\n        title=\"1604373359405.jpg\"\n        src=\"/static/be2141af3283bf7c9127ae8874c0ba52/a1253/img.png\"\n        srcset=\"/static/be2141af3283bf7c9127ae8874c0ba52/5a46d/img.png 300w,\n/static/be2141af3283bf7c9127ae8874c0ba52/0a47e/img.png 600w,\n/static/be2141af3283bf7c9127ae8874c0ba52/a1253/img.png 657w\"\n        sizes=\"(max-width: 657px) 100vw, 657px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br />看这个图就很明白了：<br /></p>\n<ol>\n<li>对于一份同逻辑的代码，当我们手写下一个一个的文件，它们无论是 ESM 还是 commonJS 或是 AMD，他们都是 module ；</li>\n<li>当我们写的 module 源文件传到 webpack 进行打包时，webpack 会根据文件引用关系生成 chunk 文件，webpack 会对这个 chunk 文件进行一些操作；</li>\n<li>webpack 处理好 chunk 文件后，最后会输出 bundle 文件，这个 bundle 文件包含了经过加载和编译的最终源文件，所以它可以直接在浏览器中运行。</li>\n</ol>\n<p><br />一般来说一个 chunk 对应一个 bundle，比如上图中的 utils.js -> chunks 1 -> utils.bundle.js；但也有例外，比如说上图中，我就用 MiniCssExtractPlugin 从 chunks 0 中抽离出了 index.bundle.css 文件。<br /><code class=\"language-text\">module</code>，<code class=\"language-text\">chunk</code> 和 <code class=\"language-text\">bundle</code> 其实就是同一份逻辑代码在不同转换场景下的取了三个名字：<br />我们直接写出来的是 module，webpack 处理时是 chunk，最后生成浏览器可以直接运行的 bundle。<br />\n<br /></p>\n<h2 id=\"2filename-和-chunkfilename-的区别\" style=\"position:relative;\"><a href=\"#2filename-%E5%92%8C-chunkfilename-%E7%9A%84%E5%8C%BA%E5%88%AB\" aria-label=\"2filename 和 chunkfilename 的区别 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.<code class=\"language-text\">filename</code> 和 <code class=\"language-text\">chunkFilename</code> 的区别</h2>\n<p><br /><code class=\"language-text\">filename</code> 指<strong>列在</strong> <code class=\"language-text\">entry</code> 中，打包后输出的文件的名称。<br /><code class=\"language-text\">chunkFilename</code> 指<strong>未列在</strong> <code class=\"language-text\">entry</code> 中，却又需要被打包出来的文件（如懒加载的文件）的名称。<br /></p>\n<h2 id=\"3webpackprefetch、webpackpreload-和-webpackchunkname-到底是干什么的？\" style=\"position:relative;\"><a href=\"#3webpackprefetch%E3%80%81webpackpreload-%E5%92%8C-webpackchunkname-%E5%88%B0%E5%BA%95%E6%98%AF%E5%B9%B2%E4%BB%80%E4%B9%88%E7%9A%84%EF%BC%9F\" aria-label=\"3webpackprefetch、webpackpreload 和 webpackchunkname 到底是干什么的？ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.<code class=\"language-text\">webpackPrefetch</code>、<code class=\"language-text\">webpackPreload</code> 和 <code class=\"language-text\">webpackChunkName</code> 到底是干什么的？</h2>\n<p><br /><code class=\"language-text\">webpackChunkName</code> 是为预加载的文件取别名，<code class=\"language-text\">webpackPrefetch</code> 会在浏览器闲置下载文件，<code class=\"language-text\">webpackPreload</code> 会在父 chunk 加载时并行下载文件。<br />\n<br /><code class=\"language-text\">webpackChunkName</code>打包出来的 bundle 会有 vendors~这种前缀<br />原因是其实 webpack 懒加载是用内置的一个插件 <strong>SplitChunksPlugin</strong> 实现的，这个插件里面有些<strong>默认配置项</strong>，比如说 <code class=\"language-text\">automaticNameDelimiter</code>，默认的分割符就是 <code class=\"language-text\">~</code><br />\n<br /></p>\n<h2 id=\"4hash、chunkhash、contenthash-有什么不同？\" style=\"position:relative;\"><a href=\"#4hash%E3%80%81chunkhash%E3%80%81contenthash-%E6%9C%89%E4%BB%80%E4%B9%88%E4%B8%8D%E5%90%8C%EF%BC%9F\" aria-label=\"4hash、chunkhash、contenthash 有什么不同？ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.<code class=\"language-text\">hash</code>、<code class=\"language-text\">chunkhash</code>、<code class=\"language-text\">contenthash</code> 有什么不同？</h2>\n<p><br />hash 计算与整个项目的构建相关；<br />chunkhash 计算与同一 chunk 内容相关；<br />contenthash 计算与文件内容本身相关。<br /></p>\n<h2 id=\"5sourse-map-中-eval、cheap、inline-和-module-各是什么意思？\" style=\"position:relative;\"><a href=\"#5sourse-map-%E4%B8%AD-eval%E3%80%81cheap%E3%80%81inline-%E5%92%8C-module-%E5%90%84%E6%98%AF%E4%BB%80%E4%B9%88%E6%84%8F%E6%80%9D%EF%BC%9F\" aria-label=\"5sourse map 中 eval、cheap、inline 和 module 各是什么意思？ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.<code class=\"language-text\">sourse-map</code> 中 <code class=\"language-text\">eval</code>、<code class=\"language-text\">cheap</code>、<code class=\"language-text\">inline</code> 和 <code class=\"language-text\">module</code> 各是什么意思？</h2>\n<table>\n<thead>\n<tr>\n<th align=\"left\">参数</th>\n<th align=\"left\">参数解释</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">eval</td>\n<td align=\"left\">打包后的模块都使用 <code class=\"language-text\">eval()</code>执行，行映射可能不准；不产生独立的 map 文件，速度很快(不需要复杂转换和打包)，不能映射到原始代码（没有从 loader 中获取 source map）</td>\n</tr>\n<tr>\n<td align=\"left\">cheap</td>\n<td align=\"left\">map 映射只显示行不显示列（只看得到哪行错了），忽略源自 loader 的 source map,即没有源码的映射</td>\n</tr>\n<tr>\n<td align=\"left\">inline</td>\n<td align=\"left\">映射文件以 base64 格式编码，加在 bundle 文件最后，不产生独立的 map 文件</td>\n</tr>\n<tr>\n<td align=\"left\">module</td>\n<td align=\"left\">增加对 loader source map 和第三方模块的映射，即源码的映射</td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">hidden</code><br /><code class=\"language-text\">nosources-source-map</code></td>\n<td align=\"left\">和<code class=\"language-text\">source-map</code>基本相同，但是不会有<code class=\"language-text\">sourceMappingURL</code>注释，这样你就无法定位到源文件，这样你在开发环境能看到具体的目录结构，基本上就是生产环境能用，开发环境不能用，</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"原文链接\" style=\"position:relative;\"><a href=\"#%E5%8E%9F%E6%96%87%E9%93%BE%E6%8E%A5\" aria-label=\"原文链接 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>原文链接</h2>\n<p><a href=\"https://mp.weixin.qq.com/s/H5KeOIKoJ1r3K8-EbKmdLA\">点这里！</a></p>"},{"id":"b0e210c9-c4f7-509f-a05b-d2adca87d8f6","headings":[{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"react使用websocket通信","path":"/websocket","tags":["Network"],"excerpt":"react使用websocket通信","created":"2021-02-20 21:45","createdPretty":"20 February, 2021","updated":"2021-04-11T00:00:00.000Z","updatedPretty":"20 February, 2021","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAC4jAAAuIwF4pT92AAADEklEQVQozw2N7VMSCQCH97+4qTsrShBXFpZlgX3fhWWBXRAEEdB0PCBJSRIMLzMyhG6sAJVSeQ0zo5LLzrzJ3mYub7KppvrQf3R8eGZ+X57fA+gpAsNQBO6jDGoGhzG012FCFia8/2xmv+83fr7a/nGw9eNl89v+1tcXzS97D47b9Q9PKgfVlWx8HOjtkcGQHIWVGtU5GJIN2rDlZKiRu/K2fufL8+r3l1udi89/1Y7btU/t+sfd2n/Pah9alfZqNteRYVW3sueMQv4bBHb5JDJ/NVb9c/719vpRu378vHn0uPR+5/7x3sPO/vdJpdM8elp7t7N52FjNJSKATHZCIf9V03dK4tHrsdH8fKy1cnO/VjhsFouzgfmAYXlCqKdDe/cyb1u1N4+rh9sbrx+VDxprN6bHAaX8pBrssrKa6IgjlwiVl2aflbIvNpczUbcHO+3EZcMmxaSonHb23Zly7Fdu//1gY7e8tlO6m03FAUQtk3gk5BcS4cF0bLi4MHV/MV7PpfwcNMaTETtNQ7+I+tNhN5f0YsX40G7lXmu9sF3Kr2TSAIv32ggwMeJeiAbi4eDtazP59OzSYtbrcvXj2qid8bDw1eSVfH59Y22jWii2yuXmamElc31xNg5YJBuhBVkdxOM6n394MpaMRKcvz90cDU3ByrMY2DXiHQyHYpELM5HYXO5WsVFubhZXi7dyufQNANQoFSrFWVAhV3WDiLbf1S9YBa8vGBge10AgS+IBX1DkzW7R4Rsa9YxNTqQyhVLtUvIPI28BUExjJHQ4rjKQCEdDJI1SpMblksYnZhzOAY9ot3MUR5MMw9AWK+XwiGOTF1JL84vLTqcDMBrVar2GNPZoMa2JkOuMkF4vFy1oOHo5HLrotNlYCufMfAeU4TCLjR3wu0LT0bml1Nw1ANUp1VolS6sxGpNEDtaeIyidxy04XQOS6GBIHDeiBInrCQIhKT3DGcwCKbntgd/PRxMAolVAULfZZDBbOKfEWwWKFzh/cEiwWewWFkMhjiZYjqVMpk5cz7AIQSEUjQmi1Rv8H1OrJKaXHwWoAAAAAElFTkSuQmCC","aspectRatio":1.5060240963855422,"src":"/static/dc6da965afbecc04f53ba4eeafaf5c6b/0853f/girl.png","srcSet":"/static/dc6da965afbecc04f53ba4eeafaf5c6b/14156/girl.png 125w,\n/static/dc6da965afbecc04f53ba4eeafaf5c6b/d6e47/girl.png 250w,\n/static/dc6da965afbecc04f53ba4eeafaf5c6b/0853f/girl.png 500w,\n/static/dc6da965afbecc04f53ba4eeafaf5c6b/ce627/girl.png 750w,\n/static/dc6da965afbecc04f53ba4eeafaf5c6b/9dbcf/girl.png 1000w,\n/static/dc6da965afbecc04f53ba4eeafaf5c6b/87046/girl.png 1920w","sizes":"(max-width: 500px) 100vw, 500px"}}}},"html":"<h2 id=\"浏览器自带的-api\" style=\"position:relative;\"><a href=\"#%E6%B5%8F%E8%A7%88%E5%99%A8%E8%87%AA%E5%B8%A6%E7%9A%84-api\" aria-label=\"浏览器自带的 api permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>浏览器自带的 api</h2>\n<blockquote>\n<p>如果是 https 则采用 wss</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 这里的转发标识为/ws</span>\n<span class=\"token keyword\">const</span> wsPath <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">ws://</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>host<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/ws/system</span><span class=\"token template-punctuation string\">`</span></span>\n<span class=\"token keyword\">const</span> socket <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WebSocket</span><span class=\"token punctuation\">(</span>wsPath<span class=\"token punctuation\">)</span>\nsocket<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"open\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// send可以传递字符串或者二进制</span>\n  socket<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> page<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> size<span class=\"token operator\">:</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\nsocket<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"message\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleMessage<span class=\"token punctuation\">)</span>\nsocket<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"close\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  socket<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"message\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleMessage<span class=\"token punctuation\">)</span>\n  socket<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><a name=\"0BRMq\"></a></p>\n<h2 id=\"开发环境配置：\" style=\"position:relative;\"><a href=\"#%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%EF%BC%9A\" aria-label=\"开发环境配置： permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>开发环境配置：</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">devServer<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      proxy<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 普通http请求</span>\n        <span class=\"token string\">'/api'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            target<span class=\"token operator\">:</span> <span class=\"token string\">'http://localhost:8099/'</span><span class=\"token punctuation\">,</span>\n            changeOrigin<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n            secure<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\">// websocket请求配置</span>\n        <span class=\"token string\">'/ws'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          target<span class=\"token operator\">:</span> <span class=\"token string\">'ws://localhost:8099/'</span><span class=\"token punctuation\">,</span><span class=\"token comment\">// 可以写http或者ws开头</span>\n          ws<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 代理使用websokcet协议</span>\n          secure<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n          changeOrigin<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n        <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br />\n<p><a name=\"UDtcL\"></a></p>\n<h2 id=\"生产环境配置：\" style=\"position:relative;\"><a href=\"#%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%EF%BC%9A\" aria-label=\"生产环境配置： permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>生产环境配置：</h2>\n<div class=\"gatsby-highlight\" data-language=\"nginx\"><pre class=\"language-nginx\"><code class=\"language-nginx\"><span class=\"token operator\">/</span><span class=\"token operator\">/</span> 这里是websocket相关的配置\n<span class=\"token keyword\">location</span> <span class=\"token operator\">/</span>api<span class=\"token operator\">/</span>ws <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">proxy_pass</span> <span class=\"token keyword\">http</span><span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span><span class=\"token number\">192.168</span><span class=\"token number\">.233</span><span class=\"token number\">.238</span><span class=\"token punctuation\">:</span><span class=\"token number\">8090</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">proxy_next_upstream</span> error <span class=\"token keyword\">timeout</span> invalid_header http_500 http_502 http_503<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">proxy_set_header</span> Host <span class=\"token variable\">$host</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">proxy_http_version</span> <span class=\"token number\">1.1</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">proxy_set_header</span> X<span class=\"token operator\">-</span>Real<span class=\"token operator\">-</span>IP <span class=\"token variable\">$remote_addr</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">proxy_set_header</span> X<span class=\"token operator\">-</span>Forwarded<span class=\"token operator\">-</span>For <span class=\"token variable\">$proxy_add_x_forwarded_for</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">proxy_set_header</span> X<span class=\"token operator\">-</span>Forwarded<span class=\"token operator\">-</span>Proto <span class=\"token keyword\">https</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">proxy_set_header</span> Upgrade <span class=\"token variable\">$http_upgrade</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">proxy_set_header</span> Connection <span class=\"token string\">\"upgrade\"</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">proxy_set_header</span> Origin <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">proxy_redirect</span> off<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span></code></pre></div>\n<br />\n<h2 id=\"我的-nginx-配置：\" style=\"position:relative;\"><a href=\"#%E6%88%91%E7%9A%84-nginx-%E9%85%8D%E7%BD%AE%EF%BC%9A\" aria-label=\"我的 nginx 配置： permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>我的 nginx 配置：</h2>\n<div class=\"gatsby-highlight\" data-language=\"nginx\"><pre class=\"language-nginx\"><code class=\"language-nginx\"><span class=\"token keyword\">location</span> <span class=\"token operator\">~</span> <span class=\"token operator\">/</span>ws<span class=\"token operator\">/</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">rewrite</span> <span class=\"token operator\">^</span><span class=\"token operator\">/</span>ws<span class=\"token operator\">/</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span>api<span class=\"token operator\">/</span>v1<span class=\"token operator\">/</span>$<span class=\"token number\">1</span> <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">proxy_pass</span> <span class=\"token keyword\">http</span><span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>ginapp<span class=\"token operator\">-</span>service<span class=\"token punctuation\">:</span><span class=\"token number\">8686</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">proxy_http_version</span> <span class=\"token number\">1.1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">proxy_set_header</span> Upgrade <span class=\"token variable\">$http_upgrade</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">proxy_set_header</span> Connection <span class=\"token string\">\"upgrade\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"参考\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83\" aria-label=\"参考 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li>nodejs 后端非常好用的 websocket 通信包：<a href=\"https://socket.io/\">https://socket.io/</a></li>\n<li>基于 socket.io 衍生出的前端 websocket 通信工具：<a href=\"https://socket.io/docs/client-api/\">https://socket.io/docs/client-api/</a></li>\n<li>注意：socket.io.client 必须与 socker.io 配合使用</li>\n</ul>"}],"postsPerPage":5}},"staticQueryHashes":["1116962356","2275848304","3138592700","3462520645","444477021","545095672"]}