{"componentChunkName":"component---theme-src-templates-post-tsx","path":"/redraw","result":{"data":{"post":{"id":"7c1aa616-6722-5f80-a80d-b211d3ee947f","headings":[{"depth":2},{"depth":2}],"frontmatter":{"title":"前端性能优化之回流和重绘","path":"/redraw","tags":["JavaScript"],"excerpt":"前端性能优化之回流和重绘","created":"2021-02-20 21:45","createdPretty":"20 February, 2021","updated":"2021-04-11T00:00:00.000Z","updatedPretty":"11 April, 2021","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAADJElEQVQozwEZA+b8AGVDL3ZQP4lhTJtvWah7Z6yAa76Re82fh9mpkOa+qNmyl9W/pvb697u8rp6YhqSejqqikL2wm7qrlbiqlABRLx5uRTKGWEWZalakc1+yg27JmIHdrJLltpvqwqvsybHs2MH9///Iy8Ccl4WknY2popG+s568rZW6rJUASSgZYjgne0o2j1xIonFct4hz1aWN6Lmg7sKq8Mu08dS/9ObZ////19rQnJeFoZqKq6SUwrajva6YvKyWAEQnGkklGWc4KnhDNYZPQZZdTsSJd+m6o/DJs/PUv/Tbyfft4////+Tm35+ciqCYiKukk8G2o76wmb2ulwCnb1pmHBxjBQtwCg95CxF8CA9zBw21Vlj20r/12sr24NL48ev////u8Oulo5GblIKnoZG9sqHBspy+r5gAklFCTQsJQQABRQYKUgsQZQ4TgQAM0j5N98668tS/68qt9+/l////9/j0raybl497o5yMu7Kjw7Wgvq+YAJJcSU8PDDYBBD0DBVIDBGQJDLUYKfhSY+S4oa2ajdS6qv78+v////v9+7a2p5WNep6Xhbu0o8W4o7+wmQCmb1ldKyFVCgxJAwVlCw2QDhWpDhjtR1jUoJHetKHw2Mv////////+//6+vrGTjHmknYvGv63GvKW+sJgAi1RFUxUSnCMlIA8PXhETnR0hgDIrqko/t4Ft57+t8dXI/v79////////xci+lI15oJiGvbalxbumvbCYADoGCjoGCkgCBk8FB1cKB2YoG5tkTap4XKppUOSvlPXXx/39/P///////8/Ty5aQfpWNeqihkMO6pruvlwA4HBQ5GRMzEQxCFg9TJRV9SzSdZ1CzgGi9hWvYnoDv1sL6/Pz////////Z3NWXkoGSiXaemIbCuKW7rpcAPy8YSSwcTy0dVjEiYzQhf044nGpTsX5lwo5y1p6C4sm09Pf0////////4ePcmJSEj4d0mJF/vrWjuq6XADgmE0EqF1k6KW5JN3FELo5dRqNuV7qDaNmihOeujuDIr+3w7P///////+Xn4JqXiI2FcpGKeLiwnrqulaUlv3RaB75BAAAAAElFTkSuQmCC","aspectRatio":1.5151515151515151,"src":"/static/87fda446656eadb4e66da3852be9cdc0/90823/child.png","srcSet":"/static/87fda446656eadb4e66da3852be9cdc0/dc47e/child.png 200w,\n/static/87fda446656eadb4e66da3852be9cdc0/9f2d5/child.png 400w,\n/static/87fda446656eadb4e66da3852be9cdc0/90823/child.png 800w,\n/static/87fda446656eadb4e66da3852be9cdc0/77647/child.png 1200w,\n/static/87fda446656eadb4e66da3852be9cdc0/f8d4f/child.png 1600w,\n/static/87fda446656eadb4e66da3852be9cdc0/4ce6a/child.png 1920w","sizes":"(max-width: 800px) 100vw, 800px"}}}},"html":"<h2 id=\"回流和重绘优化\" style=\"position:relative;\"><a href=\"#%E5%9B%9E%E6%B5%81%E5%92%8C%E9%87%8D%E7%BB%98%E4%BC%98%E5%8C%96\" aria-label=\"回流和重绘优化 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>回流和重绘优化</h2>\n<ol>\n<li>translate 替代 top 改变</li>\n<li>opacity 替代 visibility</li>\n<li>不要一条一条的修改 DOM 的样式，预先定义好 class，然后修改 DOM 的 className</li>\n<li>把 DOM 离线后修改，比如：先把 DOM 给 display:none（有一次 reflow），然后你修改 100 次，然后再把它显示出来</li>\n<li>不要把 DOM 节点的属性值放在一个循环里面当成循环里的变量</li>\n<li>不要使用 table 布局，可能一个很小的改动都会造成整个 table 的布局</li>\n<li>动画实现的速度选择</li>\n<li>对于动画新建图层</li>\n<li>启用 GPU 硬件加速</li>\n</ol>\n<h2 id=\"chrome-创建图层的的条件\" style=\"position:relative;\"><a href=\"#chrome-%E5%88%9B%E5%BB%BA%E5%9B%BE%E5%B1%82%E7%9A%84%E7%9A%84%E6%9D%A1%E4%BB%B6\" aria-label=\"chrome 创建图层的的条件 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Chrome 创建图层的的条件</h2>\n<blockquote>\n<p>图层的作用是让回流和重绘都在一个区域里进行，也就是硬件加速</p>\n</blockquote>\n<ol>\n<li>3D 或透视变换（prespective transform）CSS 属性</li>\n<li>使用加速视频解码的<code class=\"language-text\">&lt;video&gt;</code>节点</li>\n<li>拥有 3D（webGL）上下文或加速的 2D 上下文的<code class=\"language-text\">&lt;canvas&gt;</code>节点</li>\n<li>混合插件（如：flash）</li>\n<li>对自己的 opacity 做 CSS 动画或使用动画 webkit 变换的元素</li>\n<li>拥有加速 CSS 过滤器的元素</li>\n<li>元素有一个包含复合层的后代节点（一个元素拥有一个子元素，该子元素在自己的层里）</li>\n<li>元素有 z-index 较低且包含一个复合层的兄弟元素（换句话说就是该元素在复合层上面渲染）</li>\n</ol>"},"primaryTag":{"name":"JavaScript","color":"#1e81b0"}},"pageContext":{"postId":"7c1aa616-6722-5f80-a80d-b211d3ee947f","primaryTag":"JavaScript"}},"staticQueryHashes":["2275848304","3097946992","3138592700","3462520645"]}