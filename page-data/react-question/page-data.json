{"componentChunkName":"component---theme-src-templates-post-tsx","path":"/react-question","result":{"data":{"post":{"id":"c5e0b9eb-35e0-56d1-82e6-b5316cc66ae9","headings":[{"depth":2},{"depth":2},{"depth":3},{"depth":2},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":2},{"depth":2}],"frontmatter":{"title":"研究了React源码后知道的答案","path":"/react-question","tags":["React"],"excerpt":"带着问题研究React源码","created":"2023-04-25 16:26","createdPretty":"25 April, 2023","updated":"2023-04-25 16:26","updatedPretty":"25 April, 2023","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAgX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABWjOpKyLCf//EABoQAAICAwAAAAAAAAAAAAAAAAECABEDEBP/2gAIAQEAAQUCXI06PbOxINb/AP/EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/Aaf/xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPwGH/8QAGhAAAgIDAAAAAAAAAAAAAAAAAAEQIhIhI//aAAgBAQAGPwJ3yqLqjbHP/8QAGxAAAgMAAwAAAAAAAAAAAAAAATEAESEQQVH/2gAIAQEAAT8hHOdLpTEf3ShSQk+w+BYrn//aAAwDAQACAAMAAAAQiy//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/EB//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPxAj/8QAGxABAQEBAQADAAAAAAAAAAAAAREAITFBUWH/2gAIAQEAAT8QsKGEDZIefumdwrwi+nmu4nY9xZQupu6X53//2Q==","aspectRatio":1.5384615384615385,"src":"/static/e5c3f03dd47f4eb2d04c92314d958278/f2cbb/header.jpg","srcSet":"/static/e5c3f03dd47f4eb2d04c92314d958278/8850c/header.jpg 200w,\n/static/e5c3f03dd47f4eb2d04c92314d958278/da113/header.jpg 400w,\n/static/e5c3f03dd47f4eb2d04c92314d958278/f2cbb/header.jpg 800w,\n/static/e5c3f03dd47f4eb2d04c92314d958278/c26c2/header.jpg 1200w,\n/static/e5c3f03dd47f4eb2d04c92314d958278/9352a/header.jpg 1600w,\n/static/e5c3f03dd47f4eb2d04c92314d958278/4fb49/header.jpg 1920w","sizes":"(max-width: 800px) 100vw, 800px"}}}},"html":"<h2 id=\"宏观结构\" style=\"position:relative;\"><a href=\"#%E5%AE%8F%E8%A7%82%E7%BB%93%E6%9E%84\" aria-label=\"宏观结构 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>宏观结构</h2>\n<blockquote>\n<p>以下代码源码均以 v18 版本来进行解说</p>\n</blockquote>\n<p>参考<a href=\"https://7kms.github.io/react-illustration-series/main/macro-structure#%E6%9E%B6%E6%9E%84%E5%88%86%E5%B1%82\">图解 React-架构分层</a>，可以把 react 整体结构分成以下两个核心层</p>\n<ul>\n<li><code class=\"language-text\">react</code>暴露的接口层</li>\n<li>调度器<code class=\"language-text\">scheduler</code>---构造器<code class=\"language-text\">react-reconciler</code>---渲染器<code class=\"language-text\">react-dom</code>组成的内核层</li>\n</ul>\n<p>以下问题，是按照内核层三层架构的<b>主干链路</b>中核心源码进行解答，如果问题欢迎提出。</p>\n<h2 id=\"调度器-scheduler\" style=\"position:relative;\"><a href=\"#%E8%B0%83%E5%BA%A6%E5%99%A8-scheduler\" aria-label=\"调度器 scheduler permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>调度器 scheduler</h2>\n<p>核心职责只有一个，就是执行回调</p>\n<ul>\n<li>把 react-reconciler 提供的回调函数, 包装到一个任务对象中</li>\n<li>在内部维护一个任务队列, 优先级高的排在最前面</li>\n<li>循环消费任务队列, 直到队列清空</li>\n</ul>\n<h3 id=\"时间切片原理\" style=\"position:relative;\"><a href=\"#%E6%97%B6%E9%97%B4%E5%88%87%E7%89%87%E5%8E%9F%E7%90%86\" aria-label=\"时间切片原理 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>时间切片原理</h3>\n<p>时间切片(time slicing)的主要作用是执行时间分割，让出主线程（把控制权归还给浏览器，让浏览器可以处理用户输入、UI 绘制等紧急任务）</p>\n<h2 id=\"构造器-react-reconciler\" style=\"position:relative;\"><a href=\"#%E6%9E%84%E9%80%A0%E5%99%A8-react-reconciler\" aria-label=\"构造器 react reconciler permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>构造器 react-reconciler</h2>\n<p>主要功能分为以下四个阶段</p>\n<ol>\n<li>输入: 暴露 api 函数(如: scheduleUpdateOnFiber), 供给其他包(如 react 包)调用</li>\n<li>注册调度任务: 与调度中心(scheduler 包)交互, 注册调度任务 task, 等待任务回调</li>\n<li>执行任务回调(render): 在内存中构造出 fiber 树, 同时与渲染器(react-dom)交互, 在内存中创建出与 fiber 对应的 DOM 节点.</li>\n<li>输出(commit): 与渲染器(react-dom)交互, 渲染 DOM 节点</li>\n</ol>\n<p>以上阶段的功能源码顺序是：</p>\n<ol>\n<li>输入：只要涉及到需要改变 fiber 的操作（无论是首次渲染还是后续更新），最后都会间接调用<a href=\"https://github1s.com/neroneroffy/react-source-code-debug/blob/HEAD/src/react/v18/react-reconciler/src/ReactFiberWorkLoop.old.js#L523-L524\">scheduleUpdateOnFiber</a></li>\n<li>注册调度任务：<a href=\"https://github1s.com/neroneroffy/react-source-code-debug/blob/HEAD/src/react/v18/react-reconciler/src/ReactFiberWorkLoop.old.js#L636-L637\">ensureRootIsScheduled</a></li>\n<li>执行任务回调：<a href=\"https://github1s.com/neroneroffy/react-source-code-debug/blob/HEAD/src/react/v18/react-reconciler/src/ReactFiberWorkLoop.old.js#L823-L824\">performSyncWorkOnRoot</a>或<a href=\"https://github1s.com/neroneroffy/react-source-code-debug/blob/HEAD/src/react/v18/react-reconciler/src/ReactFiberWorkLoop.old.js#L874-L875\">performConcurrentWorkOnRoot</a></li>\n<li>输出：<a href=\"https://github1s.com/neroneroffy/react-source-code-debug/blob/HEAD/src/react/v18/react-reconciler/src/ReactFiberWorkLoop.new.js#L2018-L2019\">commitRoot</a></li>\n</ol>\n<h3 id=\"哪些方法可以触发更新\" style=\"position:relative;\"><a href=\"#%E5%93%AA%E4%BA%9B%E6%96%B9%E6%B3%95%E5%8F%AF%E4%BB%A5%E8%A7%A6%E5%8F%91%E6%9B%B4%E6%96%B0\" aria-label=\"哪些方法可以触发更新 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>哪些方法可以触发更新</h3>\n<p>只要涉及到更新操作，都会间接调用 scheduleUpdateOnFiber 函数。主动发起更新主要有三种方式：</p>\n<ul>\n<li><code class=\"language-text\">class</code> 组件中调用<code class=\"language-text\">setState</code></li>\n<li><code class=\"language-text\">function</code> 组件中调用 <code class=\"language-text\">hook</code> 对象暴露处的<code class=\"language-text\">dispatchAction</code></li>\n<li>在<code class=\"language-text\">root</code>节点上重复调用 render，<a href=\"https://legacy.reactjs.org/docs/rendering-elements.html#updating-the-rendered-element\">官方示例</a></li>\n</ul>\n<h3 id=\"如何注册调度任务\" style=\"position:relative;\"><a href=\"#%E5%A6%82%E4%BD%95%E6%B3%A8%E5%86%8C%E8%B0%83%E5%BA%A6%E4%BB%BB%E5%8A%A1\" aria-label=\"如何注册调度任务 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>如何注册调度任务</h3>\n<ul>\n<li>performSyncWorkOnRoot 通过<a href=\"https://github1s.com/neroneroffy/react-source-code-debug/blob/HEAD/src/react/v18/react-reconciler/src/ReactFiberSyncTaskQueue.new.js#L23-L24\">scheduleSyncCallback</a>注册同步任务，逻辑是往全局的 <code class=\"language-text\">syncQueue</code> 队列中插入回调函数 callback，最后通过<a href=\"https://github1s.com/neroneroffy/react-source-code-debug/blob/HEAD/src/react/v18/react-reconciler/src/ReactFiberSyncTaskQueue.old.js#L51-L52\">flushSyncCallbacks</a>同步调用</li>\n<li>performConcurrentWorkOnRoot 通过<code class=\"language-text\">scheduler</code>封装的<a href=\"https://github1s.com/neroneroffy/react-source-code-debug/blob/HEAD/src/react/v18/scheduler/src/forks/Scheduler.js#L311-L312\">scheduleCallback</a>来注册异步任务。</li>\n</ul>\n<h3 id=\"render-阶段的源码流程\" style=\"position:relative;\"><a href=\"#render-%E9%98%B6%E6%AE%B5%E7%9A%84%E6%BA%90%E7%A0%81%E6%B5%81%E7%A8%8B\" aria-label=\"render 阶段的源码流程 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>render 阶段的源码流程</h3>\n<p>performSyncWorkOnRoot 构建 fiber 树的源码流程如下</p>\n<ol>\n<li><a href=\"https://github1s.com/neroneroffy/react-source-code-debug/blob/HEAD/src/react/v18/react-reconciler/src/ReactFiberWorkLoop.new.js#L1302-L1303\">renderRootSync</a></li>\n<li><a href=\"https://github1s.com/neroneroffy/react-source-code-debug/blob/HEAD/src/react/v18/react-reconciler/src/ReactFiberWorkLoop.new.js#L1758-L1759\">workLoopSync</a></li>\n<li><a href=\"https://github1s.com/neroneroffy/react-source-code-debug/blob/HEAD/src/react/v18/react-reconciler/src/ReactFiberWorkLoop.new.js#L1891-L1892\">performUnitOfWork</a></li>\n<li><a href=\"https://github1s.com/neroneroffy/react-source-code-debug/blob/HEAD/src/react/v18/react-reconciler/src/ReactFiberWorkLoop.new.js#L1904-L1905\">beginWork</a></li>\n<li><a href=\"https://github1s.com/neroneroffy/react-source-code-debug/blob/HEAD/src/react/v18/react-reconciler/src/ReactFiberWorkLoop.new.js#L1911-L1912\">completeUnitOfWork</a></li>\n</ol>\n<p>performConcurrentWorkOnRoot 构建 fiber 树的源码流程如下</p>\n<ol>\n<li>需要时间切片进入<a href=\"https://github1s.com/neroneroffy/react-source-code-debug/blob/HEAD/src/react/v18/react-reconciler/src/ReactFiberWorkLoop.new.js#L1803-L1804\">renderRootConcurrent</a>，不需要则进入 renderRootSync</li>\n<li>renderRootConcurrent 进入<a href=\"https://github1s.com/neroneroffy/react-source-code-debug/blob/HEAD/src/react/v18/react-reconciler/src/ReactFiberWorkLoop.new.js#L1844-L1845\">workLoopConcurrent</a>，renderRootSync 进入 workLoopSync</li>\n<li>performUnitOfWork</li>\n<li>beginWork</li>\n<li>completeUnitOfWork</li>\n</ol>\n<h3 id=\"详细说下-render-阶段\" style=\"position:relative;\"><a href=\"#%E8%AF%A6%E7%BB%86%E8%AF%B4%E4%B8%8B-render-%E9%98%B6%E6%AE%B5\" aria-label=\"详细说下 render 阶段 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>详细说下 render 阶段</h3>\n<p>render 阶段的构建过程分为以下两个阶段：</p>\n<ol>\n<li>深度优先向下的 beginWork 探寻阶段：若节点有更新则计算新状态和 diff 之后生成新的 fiber 节点，然后在新的 fiber 节点打上 effectTag，最后 return 它的子节点，若子节点为空（也就是叶子节点）则进入 completeWork 回溯阶段</li>\n<li>completeWork 回溯阶段：根据 beginWork 阶段创建的 fiber 节点创建（或更新）其 DOM 对象，并且自下而上收集 effectList，最终收集到 root 上</li>\n</ol>\n<blockquote>\n<p>在 Concurrent 模式下，render 阶段可被打断</p>\n</blockquote>\n<h3 id=\"可中断更新的实现原理\" style=\"position:relative;\"><a href=\"#%E5%8F%AF%E4%B8%AD%E6%96%AD%E6%9B%B4%E6%96%B0%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86\" aria-label=\"可中断更新的实现原理 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>可中断更新的实现原理</h3>\n<h3 id=\"详细说下-commit-阶段\" style=\"position:relative;\"><a href=\"#%E8%AF%A6%E7%BB%86%E8%AF%B4%E4%B8%8B-commit-%E9%98%B6%E6%AE%B5\" aria-label=\"详细说下 commit 阶段 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>详细说下 commit 阶段</h3>\n<p>commit 阶段主要处理的是<b>副作用队列</b>，分为 以下三个阶段：</p>\n<ol>\n<li>commitBeforeMutationEffects：DOM 变更前，处理副作用队列中带有 Snapshot,Passive 标记的 fiber 节点</li>\n<li>commitMutationEffects：DOM 变更，界面得到更新. 处理副作用队列中带有 Placement, Update, Deletion, Hydrating 标记的 fiber 节点</li>\n<li>commitLayoutEffects：DOM 变更后，处理副作用队列中带有 Update | Callback 标记的 fiber 节点</li>\n</ol>\n<h2 id=\"渲染器-react-dom\" style=\"position:relative;\"><a href=\"#%E6%B8%B2%E6%9F%93%E5%99%A8-react-dom\" aria-label=\"渲染器 react dom permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>渲染器 react-dom</h2>\n<ul>\n<li>引导 react 应用的启动(通过 ReactDOM.render)</li>\n<li>实现 HostConfig 协议(源码在 ReactDOMHostConfig.js 中), 能够将 react-reconciler 包构造出来的 fiber 树表现出来, 生成 dom 节点(浏览器中), 生成字符串(ssr)</li>\n</ul>\n<h2 id=\"参考\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83\" aria-label=\"参考 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://7kms.github.io/react-illustration-series/main/fibertree-update#%E5%9B%9E%E6%BA%AF%E9%98%B6%E6%AE%B5-completework\">图解 React</a></li>\n<li><a href=\"https://github.com/neroneroffy/react-source-code-debug\">React 的秘密</a></li>\n</ul>"},"primaryTag":{"name":"React","color":"#5e8cb4"}},"pageContext":{"postId":"c5e0b9eb-35e0-56d1-82e6-b5316cc66ae9","primaryTag":"React"}},"staticQueryHashes":["1116962356","2275848304","3097946992","3138592700","3462520645"]}