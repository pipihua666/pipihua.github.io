{"componentChunkName":"component---theme-src-templates-post-tsx","path":"/gatsby-antd","result":{"data":{"post":{"id":"930e25a1-7f60-5290-844c-2605d687279f","headings":[{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"react 高亮显示关键词","path":"/gatsby-antd","tags":["React"],"excerpt":"react 高亮显示关键词，不用库，原生显示","created":"2021-02-20 21:45","createdPretty":"20 February, 2021","updated":"2021-04-11T00:00:00.000Z","updatedPretty":"11 April, 2021","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAADJElEQVQozwEZA+b8ACgTGkcuL15GQUItMjgkLUUvMjgjJ0MnKV06NXdUSJZzY6qMe6uRgpV2ZY1tXYNkWHBPRnJSSV8+Ol0/QAAxGR1DKihcQj41HyMuGyJELCxBJyhOMC5oRTyHZlmmh3ioi3i5oZGXeWaAXk5xUEdmRj9xUEdjQTtXNzYAOh8fPSIjPiEkNh4iOCImRCorOiAlVDUycEs9qYt70LmpqIt5ood3im1ce1pPakhBXj45Xz86YT86Ti8wADUZHkUkI0YlJTQbIT8lKE0vLzsgJlc2MoVeTMOol8arnKOEdpByZoFgU39cUGRCPFc3NFQ1NFM0Mlk3NAA8Gh9AHiJFIiU5HSJDJilPLy5CJShZNzKHY1bPtafMsaShhHmMal15U0d4UkdhPjdXNzNVNTNRLy9TMTIAPxofOxsfQSAjOB0iSSkqTSwsSSkrZUE7hmRZtJmRrpWPlXZqdlJIcExCdlFGWzg1SSstRyktRSYpVC0tAFIqKkAgIkEiIzogI08uLUQmKz4gJVw3L41qW7WbhLGYgo5rXWJAOWNAPGZAO1AtLzsfJjwhKD0gJ04mKAB6TDN9Tz52Sz5WMi1aOCdpRCpzUDuefW7Kp4a2m1m7oWWujXZ6WE1ZOTJIKyhKLCxQLzBIKi5KKi1RLy8AaEIuek8zfk8vek00fVpMsZJ55cOr17OTo4ZOn4ZFmIA+gmk5tZN5yKeTlnZiclI9SSwmSSspUTAvRCYoAFg1JG9HM6B1XdawmPneyP/m0uC8l8ymW9e0ZeLBceG/btO0Z7eWXtOvkvHKr9OrjqJ6ZYJYS1QwLysWHwCjd2LSpovsxqnyz7Hwx6jGnHqbdz20kknDn1POqljbtmDKpFSbfD1vUDCFYU+cc2GLZFhqSUdDKC8kER4AvI1zypx+v5FzsIJoh19LXD8nZkoqb1AxdlgxeFkwknE5nns8fV4wZEcrSi8lUjU1NiArLxsoXEBBhGNaAHlOQ5ZpVZFjUFs4MTUfGkYwIVQ6I0kxI0oyJEIqIz8pIE0zJFQ3JzIfICUXHhwQGi8bI4FeVaiAbp54Z2aDFUbWy7m4AAAAAElFTkSuQmCC","aspectRatio":1.5037593984962405,"src":"/static/133cf3c23846178c742207aa20a64dab/90823/tree.png","srcSet":"/static/133cf3c23846178c742207aa20a64dab/dc47e/tree.png 200w,\n/static/133cf3c23846178c742207aa20a64dab/9f2d5/tree.png 400w,\n/static/133cf3c23846178c742207aa20a64dab/90823/tree.png 800w,\n/static/133cf3c23846178c742207aa20a64dab/77647/tree.png 1200w,\n/static/133cf3c23846178c742207aa20a64dab/f8d4f/tree.png 1600w,\n/static/133cf3c23846178c742207aa20a64dab/4ce6a/tree.png 1920w","sizes":"(max-width: 800px) 100vw, 800px"}}}},"html":"<h2 id=\"正则表达式转义，你会用到的\" style=\"position:relative;\"><a href=\"#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%BD%AC%E4%B9%89%EF%BC%8C%E4%BD%A0%E4%BC%9A%E7%94%A8%E5%88%B0%E7%9A%84\" aria-label=\"正则表达式转义，你会用到的 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>正则表达式转义，你会用到的</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 正则特殊字符转义</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> escapeRegexp <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>string <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token function\">String</span><span class=\"token punctuation\">(</span>string<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[\\\\^$*+?.()|[\\]{}]</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\\\\$&amp;\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"针对关键词进行高亮\" style=\"position:relative;\"><a href=\"#%E9%92%88%E5%AF%B9%E5%85%B3%E9%94%AE%E8%AF%8D%E8%BF%9B%E8%A1%8C%E9%AB%98%E4%BA%AE\" aria-label=\"针对关键词进行高亮 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>针对关键词进行高亮</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> escapeRegexp <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"Utils/string\"</span>\n\n<span class=\"token comment\">// 针对关键词进行高亮</span>\n<span class=\"token comment\">// 正则匹配有可能会涉及到特定字符</span>\n<span class=\"token comment\">// targetVal 要高亮的目标字符串</span>\n<span class=\"token comment\">// 高亮关键词</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">hightLight</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">targetVal<span class=\"token punctuation\">,</span> highLightValue</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> res <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span>\n  <span class=\"token keyword\">let</span> hasHighLight <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n  hasHighLight <span class=\"token operator\">=</span> highLightValue<span class=\"token punctuation\">.</span><span class=\"token function\">some</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> reg <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token function\">escapeRegexp</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"i\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 不区分大小写</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>reg<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>targetVal<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>hasHighLight<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    res <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;span style=\"color:black;background:#f6e58d\"></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>targetVal<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/span></span><span class=\"token template-punctuation string\">`</span></span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    res <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>targetVal<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/span></span><span class=\"token template-punctuation string\">`</span></span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> res\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"针对字符串进行高亮\" style=\"position:relative;\"><a href=\"#%E9%92%88%E5%AF%B9%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BF%9B%E8%A1%8C%E9%AB%98%E4%BA%AE\" aria-label=\"针对字符串进行高亮 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>针对字符串进行高亮</h2>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 根据搜索条件替换字符串关键词高亮标签</span>\n<span class=\"token comment\">// 针对长字符串的高亮显示</span>\n<span class=\"token comment\">// 返回的数组可以用React.createElement('pre',null,stringReplaceMark(targetVal,highLighValue))</span>\n<span class=\"token function-variable function\">stringReplaceMark</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">targetVal<span class=\"token punctuation\">,</span> highLightValue</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> replaceVal <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Array<span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>highLightValue<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> highLightValue<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    highLightValue<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> reg <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token function\">escapeRegexp</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"i\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// 高亮替换的字符</span>\n      <span class=\"token keyword\">const</span> isReplaced <span class=\"token operator\">=</span> targetVal<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>reg<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> targetVal<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>reg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span>\n      <span class=\"token comment\">// 将字符串从高亮的位置切割成数组，好用上面的isReplaced插入到数组的分割空位中</span>\n      <span class=\"token keyword\">const</span> replaceArr <span class=\"token operator\">=</span> targetVal<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span>reg<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">const</span> length <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>replaceArr<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> replaceArr<span class=\"token punctuation\">.</span>length\n      replaceArr<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        replaceVal<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// 在空位插入高亮标签，不在最后插入</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">!==</span> length <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token operator\">&amp;&amp;</span> isReplaced<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          replaceVal<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>\n            <span class=\"token operator\">&lt;</span>span style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> color<span class=\"token operator\">:</span> <span class=\"token string\">\"black\"</span><span class=\"token punctuation\">,</span> background<span class=\"token operator\">:</span> <span class=\"token string\">\"#f6e58d\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n              <span class=\"token punctuation\">{</span>isReplaced<span class=\"token punctuation\">}</span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span>\n          <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    replaceVal<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>targetVal<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> replaceVal\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><br />推荐：<br /></p>\n<ul>\n<li><a href=\"https://github.com/benjamingr/RegExp.escape\">正则转义相关地址</a></li>\n</ul>"},"primaryTag":{"name":"React","color":null}},"pageContext":{"postId":"930e25a1-7f60-5290-844c-2605d687279f","primaryTag":"React"}},"staticQueryHashes":["1116962356","2275848304","3097946992","3138592700","3462520645"]}