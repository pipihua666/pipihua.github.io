{"componentChunkName":"component---theme-src-templates-post-tsx","path":"/linux-shell","result":{"data":{"post":{"id":"5023eb29-24a7-5f25-8f26-0c4c0eb08839","headings":[{"depth":2},{"depth":2},{"depth":2},{"depth":3},{"depth":2},{"depth":2},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":2},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":2},{"depth":2},{"depth":3},{"depth":3},{"depth":2},{"depth":2},{"depth":3},{"depth":3},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":3},{"depth":2},{"depth":2},{"depth":2},{"depth":3},{"depth":3},{"depth":2},{"depth":3},{"depth":3}],"frontmatter":{"title":"Linux-shell","path":"/linux-shell","tags":["Linux"],"excerpt":"linux-shell，个人记录学习","created":"2021-04-11T00:00:00.000Z","createdPretty":"11 April, 2021","updated":"2021-04-11T00:00:00.000Z","updatedPretty":"11 April, 2021","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC8klEQVQozw3RyW4bZQAA4HkQHoA3AAlx66ESAm5cqFRSkSbFcRPHY3s8+/r/4392z9iuPROPd894iZ2lbnHihGCaqi0SCREXKEtVJNQiwaEv0L7Ad/mwZGKVyt0VmZTEpQGXgXwGiXkk0khkTJnTBFYkSYmiRILgslkmnaK3k5mNOxurK2s3b2DJ5Hqe2GSoFJAIpBAyjysihYCgqxKSBcjzFpBrZqGCFEOSBJIk01vpZDL1zXri6xVMZdOGlLYKlK2Lpsa9IzTI+J6xU7bLNipqsGRogevUHMvVNFUQ2Bye3d7a2riTuL2KQWbTg3jNZFxDMFTG1XlBEtfSOVNVdjvhoFH1He2ejQLXqJjIhsBSJF3iRCpPbOMYS2YlJlcumg8eHMdx3Gm31vLqh59/ef2Ta0gR/Wp5HI/GcbdfL0/6vZIBbVW2oCKQFEMwGEngNIVDBKaHR8Pxbhi2uHDxGTPiZCMogWrFubr67e8Xr54++fn57/+OhiNFoMvFKhAUhqCxZqMNVd60oG4jVeNXcfI62H//lnqLQmFQ6rXCw6j/7WQ0HAxOFo/ajYYBlFq5ocoFCs9ir1/9/+Ozi4NpXKsZjkHdyLAfF2bvrYAvcDBt7kRhfTGfL8+W01H8cHYUtzu+V7GRAViiwNHY3v7keLG4PztcnJwe7PZE3fxI3/sg74bV4vL4eL44WT46v7z8pRd1w7A+jqKD6f1uWHdV1gIitp3fZGWqG41Pvnv2cP5DXQefZoSvZDXyUTfutTtBsOMOB5046taDYNjfbbeGisQzRDqb2sKId/ECQzKEhqBn37N5RgAFaBf9WslyVMvTy74fhK3+cDbePxvtfR/vL2udWcGs5wgRy+aTeSIBZcqzqyLFIcN2PdvzdNOxNct0K5VmO2o04/7k7PTpn7/+9d/zl2/OL/8ZHT5xvCZ2c/124u4G4CGgSYFjaZKgqYwkkSKEsu4Bxy/VBzutSTw9m51ePf7pxeOLl0fnf0zmF7oVvAXjurvNWDzUaQAAAABJRU5ErkJggg==","aspectRatio":1.5037593984962405,"src":"/static/f2df1ce3efc76701a8251a8b9d07f035/90823/header.png","srcSet":"/static/f2df1ce3efc76701a8251a8b9d07f035/dc47e/header.png 200w,\n/static/f2df1ce3efc76701a8251a8b9d07f035/9f2d5/header.png 400w,\n/static/f2df1ce3efc76701a8251a8b9d07f035/90823/header.png 800w,\n/static/f2df1ce3efc76701a8251a8b9d07f035/77647/header.png 1200w,\n/static/f2df1ce3efc76701a8251a8b9d07f035/f8d4f/header.png 1600w,\n/static/f2df1ce3efc76701a8251a8b9d07f035/4ce6a/header.png 1920w","sizes":"(max-width: 800px) 100vw, 800px"}}}},"html":"<h2 id=\"shell-脚本的不同运行方式\" style=\"position:relative;\"><a href=\"#shell-%E8%84%9A%E6%9C%AC%E7%9A%84%E4%B8%8D%E5%90%8C%E8%BF%90%E8%A1%8C%E6%96%B9%E5%BC%8F\" aria-label=\"shell 脚本的不同运行方式 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Shell 脚本的不同运行方式</h2>\n<ul>\n<li>内建命令不需要创建子进程</li>\n<li>内建命令对当前 shell 生效</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">bash</span> <span class=\"token number\">1</span>.sh\n<span class=\"token comment\"># 不用给1.sh赋予执行权限，bash脚本执行完后会回到当前目录</span>\n<span class=\"token comment\"># 会产生新的子进程</span>\n\n./1.sh\n<span class=\"token comment\"># 必须要可执行权限，bash脚本执行完后会回到当前目录</span>\n<span class=\"token comment\"># 会产生新的子进程</span>\n\n<span class=\"token builtin class-name\">source</span> <span class=\"token number\">1</span>.sh 和 <span class=\"token builtin class-name\">.</span> <span class=\"token number\">1</span>.sh\n<span class=\"token comment\"># 必须要可执行权限，bash脚本执行完后不会回到当前目录</span>\n<span class=\"token comment\"># 不会创建新的子进程</span></code></pre></div>\n<p><a name=\"i9qSO\"></a></p>\n<h2 id=\"管道与重定向\" style=\"position:relative;\"><a href=\"#%E7%AE%A1%E9%81%93%E4%B8%8E%E9%87%8D%E5%AE%9A%E5%90%91\" aria-label=\"管道与重定向 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>管道与重定向</h2>\n<blockquote>\n<p>管道和信号是一样的，也是进程通信的方式之一</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># 输入重定向</span>\n<span class=\"token operator\">&lt;</span>\n\n<span class=\"token comment\"># 输出重定向</span>\n<span class=\"token operator\">></span>\n\n<span class=\"token comment\"># 追加模式</span>\n<span class=\"token operator\">>></span>\n\n<span class=\"token comment\"># 将a.txt文件内容赋值给变量ss</span>\n<span class=\"token builtin class-name\">read</span> ss <span class=\"token operator\">&lt;</span> a.txt\n\n<span class=\"token comment\"># 将ss变量内容写入到文件中</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token variable\">$ss</span> <span class=\"token operator\">></span> a.txt\n\n<span class=\"token comment\"># 将ss变量内容追加到文件中</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token variable\">$ss</span> <span class=\"token operator\">>></span> a.txt\n\n<span class=\"token comment\"># 将错误信息重定向到文件中</span>\nxxx <span class=\"token operator\"><span class=\"token file-descriptor important\">2</span>></span> a.txt\n\n<span class=\"token comment\"># 将输出信息全部重定向到文件中</span>\nxxx <span class=\"token operator\">&amp;></span> a.txt</code></pre></div>\n<p><a name=\"DPoUT\"></a></p>\n<h2 id=\"变量的赋值\" style=\"position:relative;\"><a href=\"#%E5%8F%98%E9%87%8F%E7%9A%84%E8%B5%8B%E5%80%BC\" aria-label=\"变量的赋值 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>变量的赋值</h2>\n<ul>\n<li>shell 中不区分变量类型</li>\n<li>变量赋值等号两边不允许有空格</li>\n<li>将命令的值赋值给变量，使用 $() 和 ``</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token assign-left variable\">a</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">ls</span> -l /etc<span class=\"token variable\">)</span></span></code></pre></div>\n<p><a name=\"Yfx5Z\"></a></p>\n<h3 id=\"\" style=\"position:relative;\"><a href=\"#\" aria-label=\" permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><a name=\"Lj0JN\"></a></p>\n<h2 id=\"变量的作用范围\" style=\"position:relative;\"><a href=\"#%E5%8F%98%E9%87%8F%E7%9A%84%E4%BD%9C%E7%94%A8%E8%8C%83%E5%9B%B4\" aria-label=\"变量的作用范围 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>变量的作用范围</h2>\n<ul>\n<li>声明的变量只在当前的 shell 中生效，在子进程、父进程和 bash xx.sh 中都是不生效的，要想使得变量在 bash xx.sh 中生效，需要执行 source xx.sh 或者. xx.sh，因为这两种方式都不会创建新的子进程</li>\n<li>使用 export xx，可以使该变量在子进程中可用</li>\n<li>使用 unset xx，删除变量</li>\n</ul>\n<p><a name=\"VifoM\"></a></p>\n<h2 id=\"环境变量、预定义变量和位置变量\" style=\"position:relative;\"><a href=\"#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E3%80%81%E9%A2%84%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F%E5%92%8C%E4%BD%8D%E7%BD%AE%E5%8F%98%E9%87%8F\" aria-label=\"环境变量、预定义变量和位置变量 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>环境变量、预定义变量和位置变量</h2>\n<p><a name=\"fXmLm\"></a></p>\n<h3 id=\"环境变量每个-shell-打开都可以获取到的变量\" style=\"position:relative;\"><a href=\"#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E6%AF%8F%E4%B8%AA-shell-%E6%89%93%E5%BC%80%E9%83%BD%E5%8F%AF%E4%BB%A5%E8%8E%B7%E5%8F%96%E5%88%B0%E7%9A%84%E5%8F%98%E9%87%8F\" aria-label=\"环境变量每个 shell 打开都可以获取到的变量 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>环境变量每个 shell 打开都可以获取到的变量</h3>\n<ul>\n<li>env 查看环境变量</li>\n<li>set 查看环境变量、预定义变量和位置变量</li>\n<li>PATH 该变量定义了命令查找的路径，我们需要添加路径时可以 PATH=$PATH:xx，该变量修改后可以在子进程和别的 shell 中生效，因为被 export 了</li>\n<li>PS1 设置 shell 中提示\n<a name=\"Qjcoy\"></a></li>\n</ul>\n<h3 id=\"预定义变量\" style=\"position:relative;\"><a href=\"#%E9%A2%84%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F\" aria-label=\"预定义变量 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>预定义变量</h3>\n<ul>\n<li>$?上一条命令是否执行成功，成功的话返回 0</li>\n<li>$$\n$$</li>\n<li>$0 当前执行的程序,比如 bash\n<a name=\"o7DzA\"></a></li>\n</ul>\n<h3 id=\"位置变量获取命令行参数\" style=\"position:relative;\"><a href=\"#%E4%BD%8D%E7%BD%AE%E5%8F%98%E9%87%8F%E8%8E%B7%E5%8F%96%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0\" aria-label=\"位置变量获取命令行参数 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>位置变量(获取命令行参数)</h3>\n<ul>\n<li>$1......$n 特别注意的是当大于等于 10 时，必须写成${10}...${xx}</li>\n<li>$* 和 $@ 代表所有位置参数</li>\n<li>$#代表位置参数的数量</li>\n<li>如果想给位置变量设置默认值可以用${1-xx}，xx 就是设置的默认值</li>\n</ul>\n<br />\n<a name=\"06JSY\"></a>\n### 环境变量配置文件\n<a name=\"zdAS3\"></a>\n#### 所有用户都可用的环境变量保存在\n<ul>\n<li>/etc/profile</li>\n<li>/etc/profile.d</li>\n<li>/etc/bashrc\n<a name=\"Nd42S\"></a></li>\n</ul>\n<h3 id=\"用户自定义的环境变量\" style=\"position:relative;\"><a href=\"#%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F\" aria-label=\"用户自定义的环境变量 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>用户自定义的环境变量</h3>\n<ul>\n<li>~/.bashrc</li>\n<li>~/.bash_profile</li>\n</ul>\n<p><a name=\"5onOE\"></a></p>\n<h2 id=\"数组\" style=\"position:relative;\"><a href=\"#%E6%95%B0%E7%BB%84\" aria-label=\"数组 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>数组</h2>\n<p><a name=\"iMbNR\"></a></p>\n<h3 id=\"定义数组\" style=\"position:relative;\"><a href=\"#%E5%AE%9A%E4%B9%89%E6%95%B0%E7%BB%84\" aria-label=\"定义数组 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>定义数组</h3>\n<ul>\n<li>IPTS=(1 2 3 4)\n<a name=\"EzMuA\"></a></li>\n</ul>\n<h3 id=\"显示所有元素\" style=\"position:relative;\"><a href=\"#%E6%98%BE%E7%A4%BA%E6%89%80%E6%9C%89%E5%85%83%E7%B4%A0\" aria-label=\"显示所有元素 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>显示所有元素</h3>\n<ul>\n<li>echo ${IPTS[@]}\n<a name=\"w3ZXj\"></a></li>\n</ul>\n<h3 id=\"显示长度\" style=\"position:relative;\"><a href=\"#%E6%98%BE%E7%A4%BA%E9%95%BF%E5%BA%A6\" aria-label=\"显示长度 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>显示长度</h3>\n<ul>\n<li>echo ${#IPTS[@]}\n<a name=\"qyfN5\"></a></li>\n</ul>\n<h3 id=\"获取第一个元素\" style=\"position:relative;\"><a href=\"#%E8%8E%B7%E5%8F%96%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%85%83%E7%B4%A0\" aria-label=\"获取第一个元素 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>获取第一个元素</h3>\n<ul>\n<li>echo ${IPTS[0]}<br /></li>\n</ul>\n<p><a name=\"0s3Fh\"></a></p>\n<h2 id=\"转义与引用\" style=\"position:relative;\"><a href=\"#%E8%BD%AC%E4%B9%89%E4%B8%8E%E5%BC%95%E7%94%A8\" aria-label=\"转义与引用 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>转义与引用</h2>\n<blockquote>\n<p>注意单引号 ` 是不对特殊字符进行解释，双引号” 会对特殊字符进行解释</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># $a</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">'<span class=\"token variable\">$a</span>'</span>\n\n<span class=\"token comment\"># 1</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$a</span>\"</span></code></pre></div>\n<ul>\n<li>反引号 ` 可以获取命令执行的结果</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token assign-left variable\">num1</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">expr</span> <span class=\"token number\">4</span> + <span class=\"token number\">5</span><span class=\"token variable\">`</span></span>\n<span class=\"token comment\"># 9</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token variable\">$num1</span></code></pre></div>\n<p><a name=\"Qzhxz\"></a></p>\n<h2 id=\"运算符\" style=\"position:relative;\"><a href=\"#%E8%BF%90%E7%AE%97%E7%AC%A6\" aria-label=\"运算符 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>运算符</h2>\n<p><a name=\"r9MEo\"></a></p>\n<h3 id=\"赋值运算符\" style=\"position:relative;\"><a href=\"#%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97%E7%AC%A6\" aria-label=\"赋值运算符 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>赋值运算符</h3>\n<p><a name=\"HSkcr\"></a></p>\n<h3 id=\"算数运算符\" style=\"position:relative;\"><a href=\"#%E7%AE%97%E6%95%B0%E8%BF%90%E7%AE%97%E7%AC%A6\" aria-label=\"算数运算符 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>算数运算符</h3>\n<ul>\n<li>expr 4 + 5 只能支持整数</li>\n<li>((4+5))((a=9))((a++))是 let 的简化方式</li>\n</ul>\n<p><a name=\"FMSpu\"></a></p>\n<h2 id=\"特殊符号大全\" style=\"position:relative;\"><a href=\"#%E7%89%B9%E6%AE%8A%E7%AC%A6%E5%8F%B7%E5%A4%A7%E5%85%A8\" aria-label=\"特殊符号大全 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>特殊符号大全</h2>\n<ul>\n<li>$()和反引号``的作用一样，里面包含需要执行的命令</li>\n<li>()会创建一个新的 shell</li>\n<li>[]是 test 命令的简写</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> <span class=\"token number\">5</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">4</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># 1</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token variable\">$?</span></code></pre></div>\n<ul>\n<li>{}输出范围和快速操作</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># 0 1 2 3 4 5 6 7 8 9</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token punctuation\">{</span><span class=\"token number\">0</span><span class=\"token punctuation\">..</span><span class=\"token number\">9</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\"># mv 1.sh 1.sh.bak</span>\n➜ <span class=\"token function\">mv</span> <span class=\"token number\">1</span>.sh<span class=\"token punctuation\">{</span>,.bak<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>;会确保上一条命令执行完在执行下一条</li>\n<li>&#x26;&#x26;上一条命令执行成功后执行下一条</li>\n<li>:类似于 python 中的 pass</li>\n</ul>\n<p><a name=\"pSaDt\"></a></p>\n<h2 id=\"test-命令\" style=\"position:relative;\"><a href=\"#test-%E5%91%BD%E4%BB%A4\" aria-label=\"test 命令 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>test 命令</h2>\n<p><a name=\"s5Zdd\"></a></p>\n<h3 id=\"退出程序命令\" style=\"position:relative;\"><a href=\"#%E9%80%80%E5%87%BA%E7%A8%8B%E5%BA%8F%E5%91%BD%E4%BB%A4\" aria-label=\"退出程序命令 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>退出程序命令</h3>\n<ul>\n<li>exit 会返回上一条命令的成功与否</li>\n<li>exit 10 返回值 10，非 0 则是不正常退出\n<a name=\"YvvVv\"></a></li>\n</ul>\n<h3 id=\"test-命令可以用来检查文件或者比较值\" style=\"position:relative;\"><a href=\"#test-%E5%91%BD%E4%BB%A4%E5%8F%AF%E4%BB%A5%E7%94%A8%E6%9D%A5%E6%A3%80%E6%9F%A5%E6%96%87%E4%BB%B6%E6%88%96%E8%80%85%E6%AF%94%E8%BE%83%E5%80%BC\" aria-label=\"test 命令可以用来检查文件或者比较值 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>test 命令可以用来检查文件或者比较值</h3>\n<ul>\n<li>\n<p>test 可以做一下测试</p>\n<ul>\n<li>文件测试</li>\n<li>整数比较测试</li>\n<li>字符串测试</li>\n</ul>\n</li>\n<li>test 测试语句可以简化为 [] 符号</li>\n<li>[] 还有扩展写法 [[]] 支持 &#x26;&#x26;、|| 等</li>\n</ul>\n<p><a name=\"ofm71\"></a></p>\n<h2 id=\"if-else\" style=\"position:relative;\"><a href=\"#if-else\" aria-label=\"if else permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>if else</h2>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span> <span class=\"token operator\">==</span> <span class=\"token string\">\"start\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$0</span> start...\"</span>\n<span class=\"token keyword\">elif</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span> <span class=\"token operator\">==</span> <span class=\"token string\">\"stop\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$0</span> stop...\"</span>\n<span class=\"token keyword\">else</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Usage: <span class=\"token variable\">$0</span> {start|stop}\"</span>\n<span class=\"token keyword\">fi</span></code></pre></div>\n<p><a name=\"awwSV\"></a></p>\n<h2 id=\"case\" style=\"position:relative;\"><a href=\"#case\" aria-label=\"case permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>case</h2>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token keyword\">case</span> <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span> <span class=\"token keyword\">in</span>\n    <span class=\"token string\">\"start\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"START\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$0</span> start...\"</span>\n    <span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token string\">\"stop\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$0</span> stop...\"</span>\n    <span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span>\n\n    *<span class=\"token punctuation\">)</span>\n        <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Usage: <span class=\"token variable\">$0</span> {start|stop}\"</span>\n    <span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">esac</span></code></pre></div>\n<p><a name=\"hOKtR\"></a></p>\n<h2 id=\"for\" style=\"position:relative;\"><a href=\"#for\" aria-label=\"for permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>for</h2>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token shebang important\">#!/bin/bash</span>\n\n<span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">filename</span> <span class=\"token keyword\">in</span> <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">ls</span> *.mp3<span class=\"token variable\">)</span></span> <span class=\"token punctuation\">;</span> <span class=\"token keyword\">do</span>\n    <span class=\"token function\">mv</span> <span class=\"token variable\">$filename</span> <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">basename</span> $filename .mp3<span class=\"token variable\">)</span></span>.mp4\n<span class=\"token keyword\">done</span>\n\n<span class=\"token keyword\">for</span> <span class=\"token variable\"><span class=\"token punctuation\">((</span> i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;=</span><span class=\"token number\">10</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span> <span class=\"token punctuation\">))</span></span> <span class=\"token punctuation\">;</span> <span class=\"token keyword\">do</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token variable\">$i</span>\n<span class=\"token keyword\">done</span></code></pre></div>\n<p><a name=\"vwyW5\"></a></p>\n<h2 id=\"while\" style=\"position:relative;\"><a href=\"#while\" aria-label=\"while permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>while</h2>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token shebang important\">#!/bin/bash</span>\n\n<span class=\"token assign-left variable\">n</span><span class=\"token operator\">=</span><span class=\"token number\">1</span>\n<span class=\"token comment\"># [[ $n &lt; 10 ]] 不能用于条件判断</span>\n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">[</span>  <span class=\"token variable\">$n</span> -lt <span class=\"token number\">10</span> <span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">do</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token variable\">$n</span>\n    <span class=\"token variable\"><span class=\"token punctuation\">((</span>n<span class=\"token operator\">++</span><span class=\"token punctuation\">))</span></span>\n\n<span class=\"token keyword\">done</span></code></pre></div>\n<p><a name=\"kmlve\"></a></p>\n<h2 id=\"嵌套\" style=\"position:relative;\"><a href=\"#%E5%B5%8C%E5%A5%97\" aria-label=\"嵌套 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>嵌套</h2>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token shebang important\">#!/bin/bash</span>\n\n<span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">filename</span> <span class=\"token keyword\">in</span> <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">ls</span> *.mp4<span class=\"token variable\">)</span></span> <span class=\"token punctuation\">;</span> <span class=\"token keyword\">do</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> -x <span class=\"token variable\">$filename</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n        <span class=\"token builtin class-name\">echo</span> <span class=\"token variable\">$filename</span> <span class=\"token punctuation\">;</span> <span class=\"token builtin class-name\">break</span>\n    <span class=\"token keyword\">fi</span>\n<span class=\"token keyword\">done</span></code></pre></div>\n<p><a name=\"G8e3J\"></a></p>\n<h2 id=\"循环处理位置参数\" style=\"position:relative;\"><a href=\"#%E5%BE%AA%E7%8E%AF%E5%A4%84%E7%90%86%E4%BD%8D%E7%BD%AE%E5%8F%82%E6%95%B0\" aria-label=\"循环处理位置参数 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>循环处理位置参数</h2>\n<ul>\n<li>$#  位置参数的数量</li>\n<li>$*  所有的位置参数</li>\n<li>$0  脚本名称</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token shebang important\">#!/bin/bash</span>\n\n<span class=\"token comment\"># for</span>\n<span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">args</span> <span class=\"token keyword\">in</span> <span class=\"token variable\">$*</span> <span class=\"token punctuation\">;</span> <span class=\"token keyword\">do</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$args</span>\"</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"help\"</span> <span class=\"token punctuation\">]</span> <span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n        <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$args</span>\"</span> <span class=\"token string\">\"<span class=\"token variable\">$args</span>\"</span>\n    <span class=\"token keyword\">fi</span>\n<span class=\"token keyword\">done</span>\n\n<span class=\"token comment\"># while</span>\n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$#</span>\"</span> -ge <span class=\"token number\">1</span> <span class=\"token punctuation\">]</span> <span class=\"token punctuation\">;</span> <span class=\"token keyword\">do</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"help\"</span> <span class=\"token punctuation\">]</span> <span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n        <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span> <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span>\n    <span class=\"token keyword\">fi</span>\n    <span class=\"token builtin class-name\">shift</span>\n<span class=\"token keyword\">done</span></code></pre></div>\n<p><a name=\"kHwkR\"></a></p>\n<h2 id=\"自定义函数\" style=\"position:relative;\"><a href=\"#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0\" aria-label=\"自定义函数 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>自定义函数</h2>\n<ul>\n<li>local  声明函数内的变量</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token shebang important\">#!/bin/bash</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function-name function\">checkpid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin class-name\">local</span> i\n\n    <span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">i</span> <span class=\"token keyword\">in</span> <span class=\"token variable\">$*</span> <span class=\"token punctuation\">;</span> <span class=\"token keyword\">do</span>\n        <span class=\"token punctuation\">[</span> -d <span class=\"token string\">\"/proc/<span class=\"token variable\">$i</span>\"</span> <span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">return</span> <span class=\"token number\">0</span>\n    <span class=\"token keyword\">done</span>\n\n    <span class=\"token builtin class-name\">return</span> <span class=\"token number\">1</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a name=\"gKUfg\"></a></p>\n<h2 id=\"脚本控制\" style=\"position:relative;\"><a href=\"#%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6\" aria-label=\"脚本控制 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>脚本控制</h2>\n<p><a name=\"iFerV\"></a></p>\n<h3 id=\"fork-炸弹---\" style=\"position:relative;\"><a href=\"#fork-%E7%82%B8%E5%BC%B9---\" aria-label=\"fork 炸弹    permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>fork 炸弹 - .(){.|.&#x26;};.</h3>\n<blockquote>\n<p>普通用户创建的线程数是受到控制的，可以通过 ulimit -a 控制</p>\n</blockquote>\n<p><a name=\"UEMzC\"></a></p>\n<h2 id=\"捕获信号\" style=\"position:relative;\"><a href=\"#%E6%8D%95%E8%8E%B7%E4%BF%A1%E5%8F%B7\" aria-label=\"捕获信号 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>捕获信号</h2>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># kill -l</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> SIGHUP     <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> SIGINT     <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> SIGQUIT     <span class=\"token number\">4</span><span class=\"token punctuation\">)</span> SIGILL     <span class=\"token number\">5</span><span class=\"token punctuation\">)</span> SIGTRAP\n<span class=\"token number\">6</span><span class=\"token punctuation\">)</span> SIGABRT     <span class=\"token number\">7</span><span class=\"token punctuation\">)</span> SIGBUS     <span class=\"token number\">8</span><span class=\"token punctuation\">)</span> SIGFPE     <span class=\"token number\">9</span><span class=\"token punctuation\">)</span> SIGKILL    <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> SIGUSR1\n<span class=\"token number\">11</span><span class=\"token punctuation\">)</span> SIGSEGV    <span class=\"token number\">12</span><span class=\"token punctuation\">)</span> SIGUSR2    <span class=\"token number\">13</span><span class=\"token punctuation\">)</span> SIGPIPE    <span class=\"token number\">14</span><span class=\"token punctuation\">)</span> SIGALRM    <span class=\"token number\">15</span><span class=\"token punctuation\">)</span> SIGTERM\n<span class=\"token number\">16</span><span class=\"token punctuation\">)</span> SIGSTKFLT    <span class=\"token number\">17</span><span class=\"token punctuation\">)</span> SIGCHLD    <span class=\"token number\">18</span><span class=\"token punctuation\">)</span> SIGCONT    <span class=\"token number\">19</span><span class=\"token punctuation\">)</span> SIGSTOP    <span class=\"token number\">20</span><span class=\"token punctuation\">)</span> SIGTSTP\n<span class=\"token number\">21</span><span class=\"token punctuation\">)</span> SIGTTIN    <span class=\"token number\">22</span><span class=\"token punctuation\">)</span> SIGTTOU    <span class=\"token number\">23</span><span class=\"token punctuation\">)</span> SIGURG    <span class=\"token number\">24</span><span class=\"token punctuation\">)</span> SIGXCPU    <span class=\"token number\">25</span><span class=\"token punctuation\">)</span> SIGXFSZ\n<span class=\"token number\">26</span><span class=\"token punctuation\">)</span> SIGVTALRM    <span class=\"token number\">27</span><span class=\"token punctuation\">)</span> SIGPROF    <span class=\"token number\">28</span><span class=\"token punctuation\">)</span> SIGWINCH    <span class=\"token number\">29</span><span class=\"token punctuation\">)</span> SIGIO    <span class=\"token number\">30</span><span class=\"token punctuation\">)</span> SIGPWR\n<span class=\"token number\">31</span><span class=\"token punctuation\">)</span> SIGSYS    <span class=\"token number\">34</span><span class=\"token punctuation\">)</span> SIGRTMIN    <span class=\"token number\">35</span><span class=\"token punctuation\">)</span> SIGRTMIN+1    <span class=\"token number\">36</span><span class=\"token punctuation\">)</span> SIGRTMIN+2    <span class=\"token number\">37</span><span class=\"token punctuation\">)</span> SIGRTMIN+3\n<span class=\"token number\">38</span><span class=\"token punctuation\">)</span> SIGRTMIN+4    <span class=\"token number\">39</span><span class=\"token punctuation\">)</span> SIGRTMIN+5    <span class=\"token number\">40</span><span class=\"token punctuation\">)</span> SIGRTMIN+6    <span class=\"token number\">41</span><span class=\"token punctuation\">)</span> SIGRTMIN+7    <span class=\"token number\">42</span><span class=\"token punctuation\">)</span> SIGRTMIN+8\n<span class=\"token number\">43</span><span class=\"token punctuation\">)</span> SIGRTMIN+9    <span class=\"token number\">44</span><span class=\"token punctuation\">)</span> SIGRTMIN+10    <span class=\"token number\">45</span><span class=\"token punctuation\">)</span> SIGRTMIN+11    <span class=\"token number\">46</span><span class=\"token punctuation\">)</span> SIGRTMIN+12    <span class=\"token number\">47</span><span class=\"token punctuation\">)</span> SIGRTMIN+13\n<span class=\"token number\">48</span><span class=\"token punctuation\">)</span> SIGRTMIN+14    <span class=\"token number\">49</span><span class=\"token punctuation\">)</span> SIGRTMIN+15    <span class=\"token number\">50</span><span class=\"token punctuation\">)</span> SIGRTMAX-14    <span class=\"token number\">51</span><span class=\"token punctuation\">)</span> SIGRTMAX-13    <span class=\"token number\">52</span><span class=\"token punctuation\">)</span> SIGRTMAX-12\n<span class=\"token number\">53</span><span class=\"token punctuation\">)</span> SIGRTMAX-11    <span class=\"token number\">54</span><span class=\"token punctuation\">)</span> SIGRTMAX-10    <span class=\"token number\">55</span><span class=\"token punctuation\">)</span> SIGRTMAX-9    <span class=\"token number\">56</span><span class=\"token punctuation\">)</span> SIGRTMAX-8    <span class=\"token number\">57</span><span class=\"token punctuation\">)</span> SIGRTMAX-7\n<span class=\"token number\">58</span><span class=\"token punctuation\">)</span> SIGRTMAX-6    <span class=\"token number\">59</span><span class=\"token punctuation\">)</span> SIGRTMAX-5    <span class=\"token number\">60</span><span class=\"token punctuation\">)</span> SIGRTMAX-4    <span class=\"token number\">61</span><span class=\"token punctuation\">)</span> SIGRTMAX-3    <span class=\"token number\">62</span><span class=\"token punctuation\">)</span> SIGRTMAX-2\n<span class=\"token number\">63</span><span class=\"token punctuation\">)</span> SIGRTMAX-1    <span class=\"token number\">64</span><span class=\"token punctuation\">)</span> SIGRTMAX</code></pre></div>\n<p><a name=\"gb4xZ\"></a></p>\n<h2 id=\"trap-捕获信号\" style=\"position:relative;\"><a href=\"#trap-%E6%8D%95%E8%8E%B7%E4%BF%A1%E5%8F%B7\" aria-label=\"trap 捕获信号 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>trap 捕获信号</h2>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token shebang important\">#!/bin/bash</span>\n\n<span class=\"token builtin class-name\">trap</span> <span class=\"token string\">\"echo 15\"</span> <span class=\"token number\">15</span>\n\n<span class=\"token builtin class-name\">echo</span> <span class=\"token variable\">$$</span>\n\n<span class=\"token keyword\">while</span> <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">;</span> <span class=\"token keyword\">do</span>\n    <span class=\"token builtin class-name\">:</span>\n<span class=\"token keyword\">done</span></code></pre></div>\n<p><a name=\"2wMfj\"></a></p>\n<h2 id=\"计划任务\" style=\"position:relative;\"><a href=\"#%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1\" aria-label=\"计划任务 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>计划任务</h2>\n<p><a name=\"zC7l8\"></a></p>\n<h3 id=\"一次性的计划任务at-命令\" style=\"position:relative;\"><a href=\"#%E4%B8%80%E6%AC%A1%E6%80%A7%E7%9A%84%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1at-%E5%91%BD%E4%BB%A4\" aria-label=\"一次性的计划任务at 命令 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>一次性的计划任务:at 命令</h3>\n<ul>\n<li>没有标准输出，需要使用重定向</li>\n<li>在 at 命令中执行的 shell 命令如果不是系统内置命令，需要使用命令的完整路径</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">at <span class=\"token number\">18</span>:31 （在18点31执行任务，ctrl + d退出<span class=\"token punctuation\">)</span>\natq （显示一次性任务的列表）</code></pre></div>\n<p><a name=\"GmdEF\"></a></p>\n<h3 id=\"周期性计划任务（同一次性任务有标准输出流和命令路径的问题）\" style=\"position:relative;\"><a href=\"#%E5%91%A8%E6%9C%9F%E6%80%A7%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1%EF%BC%88%E5%90%8C%E4%B8%80%E6%AC%A1%E6%80%A7%E4%BB%BB%E5%8A%A1%E6%9C%89%E6%A0%87%E5%87%86%E8%BE%93%E5%87%BA%E6%B5%81%E5%92%8C%E5%91%BD%E4%BB%A4%E8%B7%AF%E5%BE%84%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%89\" aria-label=\"周期性计划任务（同一次性任务有标准输出流和命令路径的问题） permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>周期性计划任务（同一次性任务有标准输出流和命令路径的问题）</h3>\n<ul>\n<li>/var/log/cron 任务的日志</li>\n<li>/var/spool/cron 用户的计划任务</li>\n<li>配置方式 crontabl -e</li>\n<li>查看现有的计划任务 crontab -l</li>\n<li>\n<p>配置方式: 分钟 小时 日期 月份 星期 执行的命令</p>\n<ul>\n<li>比如 1 1 1 1 1-5 echo crontab （1 月 1 日 1 时 1 分 如果是周一到周五，就输出 crontab）</li>\n</ul>\n</li>\n</ul>\n<p><a name=\"uWBR6\"></a></p>\n<h2 id=\"计划任务加锁\" style=\"position:relative;\"><a href=\"#%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1%E5%8A%A0%E9%94%81\" aria-label=\"计划任务加锁 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>计划任务加锁</h2>\n<p><a name=\"cYVMR\"></a></p>\n<h3 id=\"延时计划任务即使系统遇到了关机等影响计划任务的事情，也能让计划任务延时运行起来\" style=\"position:relative;\"><a href=\"#%E5%BB%B6%E6%97%B6%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1%E5%8D%B3%E4%BD%BF%E7%B3%BB%E7%BB%9F%E9%81%87%E5%88%B0%E4%BA%86%E5%85%B3%E6%9C%BA%E7%AD%89%E5%BD%B1%E5%93%8D%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1%E7%9A%84%E4%BA%8B%E6%83%85%EF%BC%8C%E4%B9%9F%E8%83%BD%E8%AE%A9%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1%E5%BB%B6%E6%97%B6%E8%BF%90%E8%A1%8C%E8%B5%B7%E6%9D%A5\" aria-label=\"延时计划任务即使系统遇到了关机等影响计划任务的事情，也能让计划任务延时运行起来 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>延时计划任务即使系统遇到了关机等影响计划任务的事情，也能让计划任务延时运行起来</h3>\n<ul>\n<li>/etc/cron.d/0hourly 系统记录计划任务的是否运行（每小时）</li>\n<li>/etc/anacrontab 延时任务文件夹 （每天、每周、每月）\n<a name=\"vQG0a\"></a></li>\n</ul>\n<h3 id=\"flock--xn-tmpflock--c-rootash-一段时间只能运行一个脚本\" style=\"position:relative;\"><a href=\"#flock--xn-tmpflock--c-rootash-%E4%B8%80%E6%AE%B5%E6%97%B6%E9%97%B4%E5%8F%AA%E8%83%BD%E8%BF%90%E8%A1%8C%E4%B8%80%E4%B8%AA%E8%84%9A%E6%9C%AC\" aria-label=\"flock  xn tmpflock  c rootash 一段时间只能运行一个脚本 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>flock -xn \"tmp/f.lock\" -c \"/root/a.sh\" 一段时间只能运行一个脚本</h3>\n<ul>\n<li>/tmp/f.lock 锁存放的文件路径</li>\n<li>需要锁住的命令/root/a.sh</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># 加锁</span>\nflock -xn <span class=\"token string\">\"/tmp/f.lock\"</span> -c <span class=\"token string\">\"/tmp/1.sh\"</span>\n\n<span class=\"token comment\"># 另外一个地方执行该脚本时就会直接退出</span>\nflock -xn <span class=\"token string\">\"/tmp/f.lock\"</span> -c <span class=\"token string\">\"/tmp/1.sh\"</span></code></pre></div>"},"primaryTag":{"name":"Linux","color":null}},"pageContext":{"postId":"5023eb29-24a7-5f25-8f26-0c4c0eb08839","primaryTag":"Linux"}},"staticQueryHashes":["1116962356","2275848304","3097946992","3138592700","3462520645"]}