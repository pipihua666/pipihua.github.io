{"componentChunkName":"component---theme-src-templates-post-tsx","path":"/linux-service","result":{"data":{"post":{"id":"84b5c43e-23c5-5d22-a432-5b0968b51683","headings":[{"depth":2},{"depth":3},{"depth":3},{"depth":2},{"depth":3},{"depth":3},{"depth":2},{"depth":2},{"depth":2},{"depth":3},{"depth":2},{"depth":3},{"depth":2},{"depth":2}],"frontmatter":{"title":"Linux-服务管理","path":"/linux-service","tags":["Linux"],"excerpt":"linux-服务管理，个人记录学习","created":"2021-04-11T00:00:00.000Z","createdPretty":"11 April, 2021","updated":"2021-04-11T00:00:00.000Z","updatedPretty":"11 April, 2021","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAADJElEQVQozwEZA+b8ABAPDhUgLRMZIBYgKhokMB04UwlRiwFKfgNFdgFAbwE9agE7ZwE4ZgE3ZQE1YwI0YgI0YQEzYgEzYgIzYQAQDw0UGR4YJDEYHSMcJS0fJSkgSm4EU4oASnsCR3YCQ3EBP20DPmwEPWwDO2wBPHAAN20BN2oBNWgANGgAEhMWEhANFyMtFRshHycxLDlKRF5/PGqWC1SEAE1+A0x8A0d6AEB1ADp1AD15BjpqEUJyBkF7CUR+DUV9AA4VHxcYHS83SENTcFhskF58qFJ2oktwmDNlkRdYiQZLgQBIghlaj050lTxLVjtAOkA/OR0yTBcsShoqQQBBSl13g6KHkrKJlrODkax6iaNwhqBYeZxFbJQ/Z5FniqqJobOfpaippJzAuaOmpI6OhnpPTVEqLDclJzMAqbPIpbHGnaa5jZeqlZurlZqrhY2gbX+XV3GTUm2Rio2MzsrAlZSQo6WjqKqmgH99wbmqxbijoJOFSEI7AL7Aw7q+w660vZ2ktoiTqHZ/jYKJnHaDnVxzk1t2oB8vTHh6d9DSynZ4eeXm35OUkVpbWtDOwtDJto2HeADKzszS0c7FxMmpq7xxfn48SEksOExOWXJeb41Zc51NY4sVGyqvsKzn59/g4djT0suSko9tbWxwcGyhn5YAusLFt73FtLfLgImRVWRcMzxAHys4DhIhU1xzeoqrW3urKDtbJSYn19bK4+PZ3t3Ux8fAi4uFcXFubW1qAMO7sLWvtoaKl1VlX0ZQTB0kLiAqNA4QHFNYcImSs2d+plJokAAAA1pcXenp3OHh1oaGgCMjI1BPTpeWkQC7rKOgmqBUYVxKWFIpMDIaIysdIywLDBY+Q1t3f55weZlodZ4wOlQCBQyNjYfo5tra2c45OTkzMzJdXVcAqI+NWl1YQE1FNz46GiAkHSguFRgfHBsiOz9ISlZcTVZlYWqXTFaAEBcmHSIsuLar3dvOmJeOFhYVNjY2AFpfbT9KPis2NxsjKBUbIhQcJQ4OFCQjJz5ARTA6RB8qMUpai1Vopys2WQAAAD8/P83MwNPRxJiYkYiHgSdtMYpo6E3kAAAAAElFTkSuQmCC","aspectRatio":1.5037593984962405,"src":"/static/2488e7022098906f1e790b6c6b7279a3/90823/header.png","srcSet":"/static/2488e7022098906f1e790b6c6b7279a3/dc47e/header.png 200w,\n/static/2488e7022098906f1e790b6c6b7279a3/9f2d5/header.png 400w,\n/static/2488e7022098906f1e790b6c6b7279a3/90823/header.png 800w,\n/static/2488e7022098906f1e790b6c6b7279a3/77647/header.png 1200w,\n/static/2488e7022098906f1e790b6c6b7279a3/f8d4f/header.png 1600w,\n/static/2488e7022098906f1e790b6c6b7279a3/4ce6a/header.png 1920w","sizes":"(max-width: 800px) 100vw, 800px"}}}},"html":"<p><a name=\"4LcBi\"></a></p>\n<h2 id=\"防火墙的概述：\" style=\"position:relative;\"><a href=\"#%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E6%A6%82%E8%BF%B0%EF%BC%9A\" aria-label=\"防火墙的概述： permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>防火墙的概述：</h2>\n<p><a name=\"npBbA\"></a></p>\n<h3 id=\"软件防火墙，主要限制-ip，过滤-ip-等\" style=\"position:relative;\"><a href=\"#%E8%BD%AF%E4%BB%B6%E9%98%B2%E7%81%AB%E5%A2%99%EF%BC%8C%E4%B8%BB%E8%A6%81%E9%99%90%E5%88%B6-ip%EF%BC%8C%E8%BF%87%E6%BB%A4-ip-%E7%AD%89\" aria-label=\"软件防火墙，主要限制 ip，过滤 ip 等 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>软件防火墙，主要限制 ip，过滤 ip 等</h3>\n<ul>\n<li>包过滤防火墙，比如 ip，iptables 就是包过滤防火墙</li>\n<li>应用层防火墙，比如根据系统用户来控制\n<a name=\"Db2J4\"></a></li>\n</ul>\n<h3 id=\"硬件防火墙，用来防-dos-攻击等，也兼顾一些软件防火墙的功能\" style=\"position:relative;\"><a href=\"#%E7%A1%AC%E4%BB%B6%E9%98%B2%E7%81%AB%E5%A2%99%EF%BC%8C%E7%94%A8%E6%9D%A5%E9%98%B2-dos-%E6%94%BB%E5%87%BB%E7%AD%89%EF%BC%8C%E4%B9%9F%E5%85%BC%E9%A1%BE%E4%B8%80%E4%BA%9B%E8%BD%AF%E4%BB%B6%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E5%8A%9F%E8%83%BD\" aria-label=\"硬件防火墙，用来防 dos 攻击等，也兼顾一些软件防火墙的功能 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>硬件防火墙，用来防 dos 攻击等，也兼顾一些软件防火墙的功能</h3>\n<blockquote>\n<p>Centos 6 默认使用的防火墙是 iptables,\nCentos 7 是 firewallD，\n但这两者底层都是内核中的 filter 过滤表来进行实际的控制</p>\n</blockquote>\n<p><a name=\"Au3lM\"></a></p>\n<h2 id=\"iptables-的表和链\" style=\"position:relative;\"><a href=\"#iptables-%E7%9A%84%E8%A1%A8%E5%92%8C%E9%93%BE\" aria-label=\"iptables 的表和链 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>iptables 的表和链</h2>\n<p><a name=\"Jqrw9\"></a></p>\n<h3 id=\"规则表\" style=\"position:relative;\"><a href=\"#%E8%A7%84%E5%88%99%E8%A1%A8\" aria-label=\"规则表 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>规则表</h3>\n<ul>\n<li>filter,用来过滤</li>\n<li>nat，地址转换</li>\n<li>其他查看 man iptables\n<a name=\"hjkma\"></a></li>\n</ul>\n<h3 id=\"规则链确定规则的方向\" style=\"position:relative;\"><a href=\"#%E8%A7%84%E5%88%99%E9%93%BE%E7%A1%AE%E5%AE%9A%E8%A7%84%E5%88%99%E7%9A%84%E6%96%B9%E5%90%91\" aria-label=\"规则链确定规则的方向 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>规则链(确定规则的方向)</h3>\n<ul>\n<li>INPUT，外部请求进入当前主机</li>\n<li>OUTPUT，当前主机发出的数据包</li>\n<li>FORWARD，数据包经过当前主机转给其他主机</li>\n<li>PREROUTING，路由前</li>\n<li>POSTROUTING，路由后</li>\n</ul>\n<p><a name=\"v7mOl\"></a></p>\n<h2 id=\"iptables-filter-表\" style=\"position:relative;\"><a href=\"#iptables-filter-%E8%A1%A8\" aria-label=\"iptables filter 表 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>iptables filter 表</h2>\n<ul>\n<li>iptales -t filter 命令 规则链 规则</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># -v 显示更详细信息</span>\n<span class=\"token comment\"># -n 不进行反向域名解析</span>\n<span class=\"token comment\"># -L 显示iptables信息</span>\n<span class=\"token comment\"># 所以查看防火墙的配置可以使用iptables -t filter -vnL</span>\n<span class=\"token punctuation\">[</span>root@iz2zeje77jss3tlyqj8p12z ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># iptables -t filter -vnL</span>\nChain INPUT <span class=\"token punctuation\">(</span>policy ACCEPT <span class=\"token number\">0</span> packets, <span class=\"token number\">0</span> bytes<span class=\"token punctuation\">)</span>\n pkts bytes target     prot opt <span class=\"token keyword\">in</span>     out     <span class=\"token builtin class-name\">source</span>               destination\n\nChain FORWARD <span class=\"token punctuation\">(</span>policy ACCEPT <span class=\"token number\">0</span> packets, <span class=\"token number\">0</span> bytes<span class=\"token punctuation\">)</span>\n pkts bytes target     prot opt <span class=\"token keyword\">in</span>     out     <span class=\"token builtin class-name\">source</span>               destination\n\nChain OUTPUT <span class=\"token punctuation\">(</span>policy ACCEPT <span class=\"token number\">0</span> packets, <span class=\"token number\">0</span> bytes<span class=\"token punctuation\">)</span>\n pkts bytes target     prot opt <span class=\"token keyword\">in</span>     out     <span class=\"token builtin class-name\">source</span>               destination</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"> <span class=\"token comment\"># 增加iptables规则</span>\n <span class=\"token comment\"># -A 在规则后加入 -I 在规则前加入（靠前的优先级高）</span>\n <span class=\"token comment\"># -s 源地址 -d 目的地址</span>\n <span class=\"token comment\"># -j 指定是ACCEPT还是DROP</span>\n <span class=\"token punctuation\">[</span>root@iz2zeje77jss3tlyqj8p12z ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># iptables -t filter -A INPUT -s 10.0.0.1 -j ACCEPT</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"> <span class=\"token comment\"># 下面默认规则都是ACCEPT，如果没有匹配到我们指定的规则，最后就会匹配默认规则</span>\n<span class=\"token punctuation\">[</span>root@iz2zeje77jss3tlyqj8p12z ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># iptables -nvL</span>\nChain INPUT <span class=\"token punctuation\">(</span>policy ACCEPT <span class=\"token number\">49</span> packets, <span class=\"token number\">3361</span> bytes<span class=\"token punctuation\">)</span>\n pkts bytes target     prot opt <span class=\"token keyword\">in</span>     out     <span class=\"token builtin class-name\">source</span>               destination\n    <span class=\"token number\">0</span>     <span class=\"token number\">0</span> ACCEPT     all  --  *      *       <span class=\"token number\">10.0</span>.0.1             <span class=\"token number\">0.0</span>.0.0/0\n\nChain FORWARD <span class=\"token punctuation\">(</span>policy ACCEPT <span class=\"token number\">0</span> packets, <span class=\"token number\">0</span> bytes<span class=\"token punctuation\">)</span>\n pkts bytes target     prot opt <span class=\"token keyword\">in</span>     out     <span class=\"token builtin class-name\">source</span>               destination\n\nChain OUTPUT <span class=\"token punctuation\">(</span>policy ACCEPT <span class=\"token number\">31</span> packets, <span class=\"token number\">8484</span> bytes<span class=\"token punctuation\">)</span>\n pkts bytes target     prot opt <span class=\"token keyword\">in</span>     out     <span class=\"token builtin class-name\">source</span>               destination\n\n <span class=\"token comment\"># 修改默认规则，以下为拒绝所有INPUT的ip连接</span>\n iptables -P INPUT DROP\n\n <span class=\"token comment\"># 清空所有自定义规则，不会修改默认规则</span>\n iptables -F\n\n <span class=\"token comment\"># 清空某个规则</span>\n iptables -D 序列号\n\n <span class=\"token comment\"># 多个规则</span>\n <span class=\"token comment\"># -i 指定网络接口（网卡）</span>\n <span class=\"token comment\"># -p 指定协议tcp/udp</span>\n <span class=\"token comment\"># -dport 指定端口</span>\niptables -t filter -A INPUT -i eth0 -s <span class=\"token number\">10.0</span>.0.2 -p tcp --dport <span class=\"token number\">80</span> -j ACCEPT</code></pre></div>\n<p><a name=\"Z16YH\"></a></p>\n<h2 id=\"iptables-nat-表\" style=\"position:relative;\"><a href=\"#iptables-nat-%E8%A1%A8\" aria-label=\"iptables nat 表 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>iptables nat 表</h2>\n<ul>\n<li>iptables -t nat 命令 规则链 规则</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># 修改目的地址，转发到10.0.0.1上</span>\niptables -t nat -A PREROUTING -i eth0 -d <span class=\"token number\">114.115</span>.116.117 -p tcp -dport <span class=\"token number\">80</span> -j DNAT --to-destination <span class=\"token number\">10.0</span>.0.1\n\n<span class=\"token comment\"># 修改源地址，将内网ip都改为出口IP地址</span>\niptables -t nat -A POSTROUTING -s <span class=\"token number\">10.0</span>.0.0/24 -o eth1 -j SNAT --to-source <span class=\"token number\">111.112</span>.113.114</code></pre></div>\n<blockquote>\n<p>iptables 自定义的规则默认是存在内存中的，需要持久化\n可以直接在 /etc/sysconfig/iptables 中写数据，也可以下载工具将内存中的数据写到文件中 yum install iptables-services</p>\n</blockquote>\n<p><a name=\"szxJF\"></a></p>\n<h2 id=\"ssh\" style=\"position:relative;\"><a href=\"#ssh\" aria-label=\"ssh permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SSH</h2>\n<p><a name=\"xVyDj\"></a></p>\n<h3 id=\"ssh-服务配置文件---sshd_config\" style=\"position:relative;\"><a href=\"#ssh-%E6%9C%8D%E5%8A%A1%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6---sshd_config\" aria-label=\"ssh 服务配置文件   sshd_config permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ssh 服务配置文件 - sshd_config</h3>\n<ul>\n<li>Port 22 默认端口</li>\n<li>PermitRootLogin yes 是否允许 root 登录</li>\n<li>AuthorizedKeysFile .ssh/authorized_keys 秘钥认证文件</li>\n</ul>\n<br />\n<a name=\"lxoKU\"></a>\n### 将公钥拷贝到服务器上\n<ul>\n<li>ssh-copy-id -i /root/.ssh/id_ras.pub root@/xxx</li>\n</ul>\n<p><a name=\"rYekR\"></a></p>\n<h2 id=\"ftp-服务器-vsftpd-介绍与软件包安装\" style=\"position:relative;\"><a href=\"#ftp-%E6%9C%8D%E5%8A%A1%E5%99%A8-vsftpd-%E4%BB%8B%E7%BB%8D%E4%B8%8E%E8%BD%AF%E4%BB%B6%E5%8C%85%E5%AE%89%E8%A3%85\" aria-label=\"ftp 服务器 vsftpd 介绍与软件包安装 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>FTP 服务器 vsftpd 介绍与软件包安装</h2>\n<p><a name=\"oVW3t\"></a></p>\n<h3 id=\"ftp-协议分为两条连接不同的信息要用不同连接传输\" style=\"position:relative;\"><a href=\"#ftp-%E5%8D%8F%E8%AE%AE%E5%88%86%E4%B8%BA%E4%B8%A4%E6%9D%A1%E8%BF%9E%E6%8E%A5%E4%B8%8D%E5%90%8C%E7%9A%84%E4%BF%A1%E6%81%AF%E8%A6%81%E7%94%A8%E4%B8%8D%E5%90%8C%E8%BF%9E%E6%8E%A5%E4%BC%A0%E8%BE%93\" aria-label=\"ftp 协议分为两条连接不同的信息要用不同连接传输 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>FTP 协议分为两条连接,不同的信息要用不同连接传输</h3>\n<ul>\n<li>命令链路</li>\n<li>数据链路</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># 安装</span>\nyum <span class=\"token function\">install</span> vsftpd <span class=\"token function\">ftp</span>\n\n<span class=\"token comment\"># 启动</span>\nsystemctl start vsftpd.service\n\n<span class=\"token comment\"># 开机自启动</span>\nsystemctl <span class=\"token builtin class-name\">enable</span> vsftpd.service\n\n<span class=\"token comment\"># 访问，使用ftp账户，则是匿名模式，默认的目录是宿主机的/var/ftp目录。也可以用系统用户，目录则是用户根目录</span>\n<span class=\"token punctuation\">[</span>root@VM-0-16-centos ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># ftp localhost</span>\nTrying ::1<span class=\"token punctuation\">..</span>.\nConnected to localhost <span class=\"token punctuation\">(</span>::1<span class=\"token punctuation\">)</span>.\n<span class=\"token number\">220</span> <span class=\"token punctuation\">(</span>vsFTPd <span class=\"token number\">3.0</span>.2<span class=\"token punctuation\">)</span>\nName <span class=\"token punctuation\">(</span>localhost:root<span class=\"token punctuation\">)</span>: <span class=\"token function\">ftp</span>\n<span class=\"token number\">331</span> Please specify the password.\nPassword:\n<span class=\"token number\">230</span> Login successful.\nRemote system <span class=\"token builtin class-name\">type</span> is UNIX.\nUsing binary mode to transfer files.\nftp<span class=\"token operator\">></span> <span class=\"token function\">ls</span>\n<span class=\"token number\">229</span> Entering Extended Passive Mode <span class=\"token punctuation\">(</span><span class=\"token operator\">||</span><span class=\"token operator\">|</span><span class=\"token number\">31008</span><span class=\"token operator\">|</span><span class=\"token punctuation\">)</span>.\n<span class=\"token number\">150</span> Here comes the directory listing.\ndrwxr-xr-x    <span class=\"token number\">2</span> <span class=\"token number\">0</span>        <span class=\"token number\">0</span>            <span class=\"token number\">4096</span> Apr 01  <span class=\"token number\">2020</span> pub\n<span class=\"token number\">226</span> Directory send OK.\n\n<span class=\"token comment\"># 要开启ftp服务让别的主机访问，需要开放端口，最简单的用firewall-cmd --add-service ftp</span>\n\n<span class=\"token comment\"># 下载和上传</span>\n➜ <span class=\"token function\">ftp</span> <span class=\"token number\">139.155</span>.182.202\nConnected to <span class=\"token number\">139.155</span>.182.202.\n<span class=\"token number\">220</span> <span class=\"token punctuation\">(</span>vsFTPd <span class=\"token number\">3.0</span>.2<span class=\"token punctuation\">)</span>\nName <span class=\"token punctuation\">(</span><span class=\"token number\">139.155</span>.182.202:qq<span class=\"token punctuation\">)</span>: xx\n<span class=\"token number\">331</span> Please specify the password.\nPassword:\n<span class=\"token number\">230</span> Login successful.\nftp<span class=\"token operator\">></span> <span class=\"token operator\">!</span>ls <span class=\"token comment\"># ！可以执行本机命令</span>\na.txt        get_product.py    ipv4        main.go        utils\naa.txt        go.mod        ipv6        result.txt    writefile.py\nbfile        go.sum        knowledge.py    <span class=\"token builtin class-name\">test</span>\nftp<span class=\"token operator\">></span> put a.txt <span class=\"token comment\"># 上传文件，既在远程主机上写入文件</span>\n<span class=\"token number\">200</span> PORT <span class=\"token builtin class-name\">command</span> successful. Consider using PASV.\n<span class=\"token number\">150</span> Ok to send data.\n<span class=\"token number\">226</span> Transfer complete.\n<span class=\"token number\">7500000</span> bytes sent <span class=\"token keyword\">in</span> <span class=\"token number\">0.926</span> seconds <span class=\"token punctuation\">(</span><span class=\"token number\">7.72</span> Mbytes/s<span class=\"token punctuation\">)</span>\nftp<span class=\"token operator\">></span> <span class=\"token function\">ls</span>\n<span class=\"token number\">200</span> PORT <span class=\"token builtin class-name\">command</span> successful. Consider using PASV.\n<span class=\"token number\">150</span> Here comes the directory listing.\n-rw-r--r--    <span class=\"token number\">1</span> <span class=\"token number\">1000</span>     <span class=\"token number\">1000</span>      <span class=\"token number\">7500000</span> Nov 02 <span class=\"token number\">14</span>:21 a.txt\ndrwxrwxr-x    <span class=\"token number\">2</span> <span class=\"token number\">1000</span>     <span class=\"token number\">1000</span>         <span class=\"token number\">4096</span> Nov 02 <span class=\"token number\">14</span>:19 <span class=\"token builtin class-name\">test</span>\n<span class=\"token number\">226</span> Directory send OK.\nftp<span class=\"token operator\">></span> get aaaa.txt <span class=\"token comment\"># 下载文件，既在本地主机上写入文件</span>\n<span class=\"token number\">200</span> PORT <span class=\"token builtin class-name\">command</span> successful. Consider using PASV.\n<span class=\"token number\">150</span> Opening BINARY mode data connection <span class=\"token keyword\">for</span> aaaa.txt <span class=\"token punctuation\">(</span><span class=\"token number\">7</span> bytes<span class=\"token punctuation\">)</span>.\nWARNING<span class=\"token operator\">!</span> <span class=\"token number\">2</span> bare linefeeds received <span class=\"token keyword\">in</span> ASCII mode\nFile may not have transferred correctly.\n<span class=\"token number\">226</span> Transfer complete.\n<span class=\"token number\">7</span> bytes received <span class=\"token keyword\">in</span> <span class=\"token number\">0.000211</span> seconds <span class=\"token punctuation\">(</span><span class=\"token number\">32.4</span> kbytes/s<span class=\"token punctuation\">)</span></code></pre></div>\n<p><a name=\"51nHl\"></a></p>\n<h2 id=\"samba-和-nfs-服务\" style=\"position:relative;\"><a href=\"#samba-%E5%92%8C-nfs-%E6%9C%8D%E5%8A%A1\" aria-label=\"samba 和 nfs 服务 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Samba 和 NFS 服务</h2>\n<ul>\n<li>samba 服务主要针对于 windows 和 windows 系统</li>\n<li>NFS 主要针对的的是 linux 和 linux 系统</li>\n</ul>\n<p><a name=\"HcTgt\"></a></p>\n<h2 id=\"nginx-基本配置文件\" style=\"position:relative;\"><a href=\"#nginx-%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\" aria-label=\"nginx 基本配置文件 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nginx 基本配置文件</h2>\n<p>OpenResty® 是一个基于 Nginx 与 Lua 的高性能 Web 平台，其内部集成了大量精良的 Lua 库、第三方模块以及大多数的依赖项。用于方便地搭建能够处理超高并发、扩展性极高的动态 Web 应用、Web 服务和动态网关。<br />\n<br />OpenResty® 通过汇聚各种设计精良的 Nginx 模块（主要由 OpenResty 团队自主开发），从而将 Nginx 有效地变成一个强大的通用 Web 应用平台。这样，Web 开发人员和系统工程师可以使用 Lua 脚本语言调动 Nginx 支持的各种 C 以及 Lua 模块，快速构造出足以胜任 10K 乃至 1000K 以上单机并发连接的高性能 Web 应用系统。<br />\n<br />OpenResty® 的目标是让你的 Web 服务直接跑在 Nginx 服务内部，充分利用 Nginx 的非阻塞 I/O 模型，不仅仅对 HTTP 客户端请求，甚至于对远程后端诸如 MySQL、PostgreSQL、Memcached 以及 Redis 等都进行一致的高性能响应。来自 OpenResty® 官网</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># 下载</span>\nyum-config-manager --add-repo https://openresty.org/package/centos/openresty.repo\nyum <span class=\"token function\">install</span> openresty\n\n<span class=\"token comment\"># 配置文件</span>\n/usr/local/openresty/nginx/conf/nginx.conf\n\n<span class=\"token comment\"># 启动</span>\n<span class=\"token function\">service</span> openresty start<span class=\"token operator\">|</span>stop<span class=\"token operator\">|</span>restart<span class=\"token operator\">|</span>reload</code></pre></div>\n<br />\n<br />\n<br />"},"primaryTag":{"name":"Linux","color":null}},"pageContext":{"postId":"84b5c43e-23c5-5d22-a432-5b0968b51683","primaryTag":"Linux"}},"staticQueryHashes":["1116962356","2275848304","3097946992","3138592700","3462520645"]}