{"componentChunkName":"component---theme-src-templates-post-tsx","path":"/webpack","result":{"data":{"post":{"id":"e8a844fe-3bf5-5c19-ad1c-402c1418e7f2","headings":[{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2},{"depth":2}],"frontmatter":{"title":"webpack中五个容易混淆的知识点","path":"/webpack","tags":["JavaScript"],"excerpt":"webpack中五个容易混淆的知识点","created":"2021-02-20 21:45","createdPretty":"20 February, 2021","updated":"2021-04-11T00:00:00.000Z","updatedPretty":"11 April, 2021","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAADFklEQVQozxXO7U/TCADH8b7UHA926x7ade3abd06242Wjm7rYMCeYGwMcBeYW3ZmMDQD9bLzeBhwM27yNCdMFBUkKCZGhuaCBi+od4nmLvfCy/1NluT39pPvD1A2n0MUP+DqFhIGzTqQQpU2HLIbNRwFuxisWzD3ddqHQp7USP/VK2O3rl+7vTi3tbnVaLz99PEPQNF0DpaxptWkAy16pRWDWELVboZdNp2PJ4IuOuLlEhHfT2Ox/GRmsVhYr1ae7j5pNN4cHx8DUMt5WNGkVzUbtC2yP8Okmqe0glUn0obRuC034cym3JPZ4cLP+Tvl4v366vbu1v6LvZcHLwAUaiK0LYS2VcYk3EqhoM0AsSZNF68bDBNDMTyRILJZYTwXKi5EllcLtc272zv3H+/UH21vADKT39I4ZMUUZhSU4yYUNCKKXlE7Moh4PepwAMtN87lpLpe3L6+Pr1bLG1vL9Ydr1VrlDFsxJUtqHEa1nVQxBETpFZQelHgo4tfHw4bBAUPiEpVOtY0l7ber4fVauraxUFlZWFwqAJi62YIp20xakUZcNkSktZxJxVFqX4fK0w51Cmq76YJAwyEfHhsiJ67TK2vhYnFqdiY/dS0NGBHQTmrcNCJd1HkZuJNFPBcRidGHJTbWJ/R4CVJ33unAhyJt3W50OE6Uyj3z82P58dFMIgKwhMZpgWXcxSABDgkJaKAdCzgto1FHNMhwFNgtGvp72/1eR0iyxMPk5bRhItN5OdabCLoBhwkWrWdZWUY9+qhEDIjGETfe52j1kE1d9IV+CZ0cdSZHpGgfH/GzA36mp4MZkNioh5HLkGhRdzFan10TFHRBHgtwWLJDn2yDUzz+I4fngvx8OpC65PL7TD7RLFjRDhvstiHdLAbMTqXnplNz+WTxRqY8c3Vt6WbtzkzpZva36cytdHw2M7y3UdmplXYfrzy4t1ivLtUqM2ulQrX0S/nXSeBwb/No/+HB9vrrZ/WTw/2/3h+e7d3h36fH//558u3L6f//fP7v6+nnd69OjvY+HD0/ffvyQ+P5+1fPfj949B0NpOhRHZ8n2AAAAABJRU5ErkJggg==","aspectRatio":1.5037593984962405,"src":"/static/87f90b87c54b86eb166522b63f27a280/90823/bonsai.png","srcSet":"/static/87f90b87c54b86eb166522b63f27a280/dc47e/bonsai.png 200w,\n/static/87f90b87c54b86eb166522b63f27a280/9f2d5/bonsai.png 400w,\n/static/87f90b87c54b86eb166522b63f27a280/90823/bonsai.png 800w,\n/static/87f90b87c54b86eb166522b63f27a280/77647/bonsai.png 1200w,\n/static/87f90b87c54b86eb166522b63f27a280/f8d4f/bonsai.png 1600w,\n/static/87f90b87c54b86eb166522b63f27a280/4ce6a/bonsai.png 1920w","sizes":"(max-width: 800px) 100vw, 800px"}}}},"html":"<h2 id=\"1webpack-中，module，chunk-和-bundle-的区别是什么？\" style=\"position:relative;\"><a href=\"#1webpack-%E4%B8%AD%EF%BC%8Cmodule%EF%BC%8Cchunk-%E5%92%8C-bundle-%E7%9A%84%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F\" aria-label=\"1webpack 中，module，chunk 和 bundle 的区别是什么？ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.webpack 中，<code class=\"language-text\">module</code>，<code class=\"language-text\">chunk</code> 和 <code class=\"language-text\">bundle</code> 的区别是什么？</h2>\n<p><br /><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 657px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/be2141af3283bf7c9127ae8874c0ba52/a1253/img.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVQozwGfAmD9AN7u6avi2K3j2qDe08Lo497i5rjBxbrCx7nBxr/Hy7vDx7rDx7a/xNHV197q8rvY6r3a673a67jY6t/q7wCd3soixo47zJoIvX1U26OamJcKHSUaLDQ4Rk1cZWtCT1UXKjIJHylhY2Of0eVSsNhvudpwuttGqtibzucAm93IAJG+DI7fAInWF5flQprXM36ePoKZQ4edQoacQoacP4OZMHKJU4aiZ7frDI3cG5TdHJPeDpDZnM/nAJvcyQWQsyKPzRaKxhaK2y+s+lnN/WPf/1/e/2De/2He/2Hf/1/V/DC5/wCH/wR5/QeA/wmA/wB78ZvN5gCb3MmY0Cfk4R/V3BDk4ETB2b5sy+ld1vlk1/h72vZs2Pdc1/ldyet8t8mHwMc6n6lFo6dHpKUum7Kcz+cAmNzLbMM7s9AmoMskwdVNzuC0gdXrXdX6Xtf6Xtf6X9f6XNf6bdLvuNzI8+Jl9dsN9N4S/+MJuMY1nc3mAJjcyojKL9ndLMbVGdLbR7/KpWKdrEORq0WRqkSRqkWRqkWSqz+DmoKcma/RvkunllerlVutkzmipJvO5wCX3MuKxyvg2RnO0hLc2ULM16x/zeFd2v9o3P593/1u3P9e2/9q1PWp2NPj3Hzm1x7n2yT04R2uxEOdzuUAl9zKXsM9oNEyjMopstldtsGlSoGQN4CYOoCYQIGYO4GYOYGZMnSLfpeWs9O+SqaUV6uTXK2ROqGjm87nAN3t6Iva04nb2YTb17Tq6tzb4aqtsLKys7Gxs6+xs7Cxs7KytKuusMvLzNzq+KPS86nU9KbT86fT8N/p7wD08vP88O7/8e7/8/D78/H29vT9/f37/f37/f38/f37/f37/f38/f34+fj28/D/9u/99e368ur48ery8fDrA7XUJdQeIQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1604373359405.jpg\"\n        title=\"1604373359405.jpg\"\n        src=\"/static/be2141af3283bf7c9127ae8874c0ba52/a1253/img.png\"\n        srcset=\"/static/be2141af3283bf7c9127ae8874c0ba52/5a46d/img.png 300w,\n/static/be2141af3283bf7c9127ae8874c0ba52/0a47e/img.png 600w,\n/static/be2141af3283bf7c9127ae8874c0ba52/a1253/img.png 657w\"\n        sizes=\"(max-width: 657px) 100vw, 657px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span><br />看这个图就很明白了：<br /></p>\n<ol>\n<li>对于一份同逻辑的代码，当我们手写下一个一个的文件，它们无论是 ESM 还是 commonJS 或是 AMD，他们都是 module ；</li>\n<li>当我们写的 module 源文件传到 webpack 进行打包时，webpack 会根据文件引用关系生成 chunk 文件，webpack 会对这个 chunk 文件进行一些操作；</li>\n<li>webpack 处理好 chunk 文件后，最后会输出 bundle 文件，这个 bundle 文件包含了经过加载和编译的最终源文件，所以它可以直接在浏览器中运行。</li>\n</ol>\n<p><br />一般来说一个 chunk 对应一个 bundle，比如上图中的 utils.js -> chunks 1 -> utils.bundle.js；但也有例外，比如说上图中，我就用 MiniCssExtractPlugin 从 chunks 0 中抽离出了 index.bundle.css 文件。<br /><code class=\"language-text\">module</code>，<code class=\"language-text\">chunk</code> 和 <code class=\"language-text\">bundle</code> 其实就是同一份逻辑代码在不同转换场景下的取了三个名字：<br />我们直接写出来的是 module，webpack 处理时是 chunk，最后生成浏览器可以直接运行的 bundle。<br />\n<br /></p>\n<h2 id=\"2filename-和-chunkfilename-的区别\" style=\"position:relative;\"><a href=\"#2filename-%E5%92%8C-chunkfilename-%E7%9A%84%E5%8C%BA%E5%88%AB\" aria-label=\"2filename 和 chunkfilename 的区别 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.<code class=\"language-text\">filename</code> 和 <code class=\"language-text\">chunkFilename</code> 的区别</h2>\n<p><br /><code class=\"language-text\">filename</code> 指<strong>列在</strong> <code class=\"language-text\">entry</code> 中，打包后输出的文件的名称。<br /><code class=\"language-text\">chunkFilename</code> 指<strong>未列在</strong> <code class=\"language-text\">entry</code> 中，却又需要被打包出来的文件（如懒加载的文件）的名称。<br /></p>\n<h2 id=\"3webpackprefetch、webpackpreload-和-webpackchunkname-到底是干什么的？\" style=\"position:relative;\"><a href=\"#3webpackprefetch%E3%80%81webpackpreload-%E5%92%8C-webpackchunkname-%E5%88%B0%E5%BA%95%E6%98%AF%E5%B9%B2%E4%BB%80%E4%B9%88%E7%9A%84%EF%BC%9F\" aria-label=\"3webpackprefetch、webpackpreload 和 webpackchunkname 到底是干什么的？ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.<code class=\"language-text\">webpackPrefetch</code>、<code class=\"language-text\">webpackPreload</code> 和 <code class=\"language-text\">webpackChunkName</code> 到底是干什么的？</h2>\n<p><br /><code class=\"language-text\">webpackChunkName</code> 是为预加载的文件取别名，<code class=\"language-text\">webpackPrefetch</code> 会在浏览器闲置下载文件，<code class=\"language-text\">webpackPreload</code> 会在父 chunk 加载时并行下载文件。<br />\n<br /><code class=\"language-text\">webpackChunkName</code>打包出来的 bundle 会有 vendors~这种前缀<br />原因是其实 webpack 懒加载是用内置的一个插件 <strong>SplitChunksPlugin</strong> 实现的，这个插件里面有些<strong>默认配置项</strong>，比如说 <code class=\"language-text\">automaticNameDelimiter</code>，默认的分割符就是 <code class=\"language-text\">~</code><br />\n<br /></p>\n<h2 id=\"4hash、chunkhash、contenthash-有什么不同？\" style=\"position:relative;\"><a href=\"#4hash%E3%80%81chunkhash%E3%80%81contenthash-%E6%9C%89%E4%BB%80%E4%B9%88%E4%B8%8D%E5%90%8C%EF%BC%9F\" aria-label=\"4hash、chunkhash、contenthash 有什么不同？ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.<code class=\"language-text\">hash</code>、<code class=\"language-text\">chunkhash</code>、<code class=\"language-text\">contenthash</code> 有什么不同？</h2>\n<p><br />hash 计算与整个项目的构建相关；<br />chunkhash 计算与同一 chunk 内容相关；<br />contenthash 计算与文件内容本身相关。<br /></p>\n<h2 id=\"5sourse-map-中-eval、cheap、inline-和-module-各是什么意思？\" style=\"position:relative;\"><a href=\"#5sourse-map-%E4%B8%AD-eval%E3%80%81cheap%E3%80%81inline-%E5%92%8C-module-%E5%90%84%E6%98%AF%E4%BB%80%E4%B9%88%E6%84%8F%E6%80%9D%EF%BC%9F\" aria-label=\"5sourse map 中 eval、cheap、inline 和 module 各是什么意思？ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.<code class=\"language-text\">sourse-map</code> 中 <code class=\"language-text\">eval</code>、<code class=\"language-text\">cheap</code>、<code class=\"language-text\">inline</code> 和 <code class=\"language-text\">module</code> 各是什么意思？</h2>\n<table>\n<thead>\n<tr>\n<th align=\"left\">参数</th>\n<th align=\"left\">参数解释</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">eval</td>\n<td align=\"left\">打包后的模块都使用 <code class=\"language-text\">eval()</code>执行，行映射可能不准；不产生独立的 map 文件，速度很快(不需要复杂转换和打包)，不能映射到原始代码（没有从 loader 中获取 source map）</td>\n</tr>\n<tr>\n<td align=\"left\">cheap</td>\n<td align=\"left\">map 映射只显示行不显示列（只看得到哪行错了），忽略源自 loader 的 source map,即没有源码的映射</td>\n</tr>\n<tr>\n<td align=\"left\">inline</td>\n<td align=\"left\">映射文件以 base64 格式编码，加在 bundle 文件最后，不产生独立的 map 文件</td>\n</tr>\n<tr>\n<td align=\"left\">module</td>\n<td align=\"left\">增加对 loader source map 和第三方模块的映射，即源码的映射</td>\n</tr>\n<tr>\n<td align=\"left\"><code class=\"language-text\">hidden</code><br /><code class=\"language-text\">nosources-source-map</code></td>\n<td align=\"left\">和<code class=\"language-text\">source-map</code>基本相同，但是不会有<code class=\"language-text\">sourceMappingURL</code>注释，这样你就无法定位到源文件，这样你在开发环境能看到具体的目录结构，基本上就是生产环境能用，开发环境不能用，</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"原文链接\" style=\"position:relative;\"><a href=\"#%E5%8E%9F%E6%96%87%E9%93%BE%E6%8E%A5\" aria-label=\"原文链接 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>原文链接</h2>\n<p><a href=\"https://mp.weixin.qq.com/s/H5KeOIKoJ1r3K8-EbKmdLA\">点这里！</a></p>"},"primaryTag":{"name":"JavaScript","color":"#1e81b0"}},"pageContext":{"postId":"e8a844fe-3bf5-5c19-ad1c-402c1418e7f2","primaryTag":"JavaScript"}},"staticQueryHashes":["1116962356","2275848304","3097946992","3138592700","3462520645"]}