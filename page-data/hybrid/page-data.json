{"componentChunkName":"component---theme-src-templates-post-tsx","path":"/hybrid","result":{"data":{"post":{"id":"b66ef05b-d527-5d8f-9cc6-f95158c3461b","headings":[{"depth":2},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":3},{"depth":2},{"depth":2},{"depth":3},{"depth":4},{"depth":4},{"depth":2},{"depth":2}],"frontmatter":{"title":"开始移动端混合开发吧！","path":"/hybrid","tags":["JavaScript"],"excerpt":"入门混合开发核心技术JSBridge","created":"2022-04-11T00:00:00.000Z","createdPretty":"11 April, 2022","updated":"2022-04-11 15:30","updatedPretty":"11 April, 2022","featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAUCAwT/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAGvavgNxcH/xAAbEAACAgMBAAAAAAAAAAAAAAABAgADBBETFP/aAAgBAQABBQKrJIVcoT0zSKBdsdp//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHBAAAQMFAAAAAAAAAAAAAAAAAAEQIRESIjKh/9oACAEBAAY/AsiWpb0lDU//xAAdEAEAAQQDAQAAAAAAAAAAAAABABEhMUFRcZHR/9oACAEBAAE/IcgWLTK2gNp5KwE9w3HumkLfqf/aAAwDAQACAAMAAAAQ8M//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAcEAEAAwADAQEAAAAAAAAAAAABABEhMYGxQcH/2gAIAQEAAT8Qu+JGszj2OU28A3XUYejEdJNQXzI4LHF4B0wwjevrf8n/2Q==","aspectRatio":1.5384615384615385,"src":"/static/2028670c891345733adcdeb6611a1ccb/f2cbb/header.jpg","srcSet":"/static/2028670c891345733adcdeb6611a1ccb/8850c/header.jpg 200w,\n/static/2028670c891345733adcdeb6611a1ccb/da113/header.jpg 400w,\n/static/2028670c891345733adcdeb6611a1ccb/f2cbb/header.jpg 800w,\n/static/2028670c891345733adcdeb6611a1ccb/c26c2/header.jpg 1200w,\n/static/2028670c891345733adcdeb6611a1ccb/9352a/header.jpg 1600w,\n/static/2028670c891345733adcdeb6611a1ccb/4fb49/header.jpg 1920w","sizes":"(max-width: 800px) 100vw, 800px"}}}},"html":"<h2 id=\"混合开发介绍\" style=\"position:relative;\"><a href=\"#%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91%E4%BB%8B%E7%BB%8D\" aria-label=\"混合开发介绍 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>混合开发介绍</h2>\n<h3 id=\"定义\" style=\"position:relative;\"><a href=\"#%E5%AE%9A%E4%B9%89\" aria-label=\"定义 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>定义</h3>\n<p>混合使用 Native 和 Web 技术开发</p>\n<h3 id=\"优缺点\" style=\"position:relative;\"><a href=\"#%E4%BC%98%E7%BC%BA%E7%82%B9\" aria-label=\"优缺点 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>优缺点</h3>\n<ul>\n<li>\n<p>优点：开发快、易更新、开发周期短</p>\n<blockquote>\n<p>原生应用每次开发需要重新发包，重装</p>\n</blockquote>\n</li>\n<li>\n<p>性能问题、兼容性问题</p>\n<blockquote>\n<p>没有原生流畅，需要兼容不同浏览器（App 上是 webview），但在 android5.0+和 ios9.0+上缺点不再明显，缺点在实际出现问题时再解决就好了</p>\n</blockquote>\n</li>\n</ul>\n<h3 id=\"应用场景\" style=\"position:relative;\"><a href=\"#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF\" aria-label=\"应用场景 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>应用场景</h3>\n<ul>\n<li>微信公众号：通过 JSSDK 连接 Native 和 Web 端\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 528px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/82fb7f09b5f3525bf78ba1baedbf4618/4af8e/wx1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABrklEQVQ4y22U65LCIAyFff9nXP+t0pu22tLam8gX5yDjLjORkIRDTpJ62LYt7Pse2J/Pp+kIOrZc5MvlO+bAzzAMoeu6cLlcwvV6tR253+/mQ9Dlb9vWdPZpmgJL4Id1XYP33hzs4ziaPs9z6Ps+ZYv+eDzMf7vdzP9+EPtkvgQokCkaq7q2l7cIdDqdkg8dcMCcc/aIAM/n31AU7gMIJbKDNrsoAqZaoZNl0zRGdxwnOxPLUs2thmQgUNUs13URUGpYVWUoo6Avy2JAJJYAQZeoZt86wrLaRdrQhD7r3y6ro2SDcJauM1mXZWl1nufF4mGXj0+qoV5HCGBBB8GmM91EiFm3NU1Coqyx4VLXtakxvEy3XVEYADayPB5/YpeL9PCnKe9ZTIBcoibD4FMDAGhiR22komCrI10e1ZdDEs6drVGDH78pL2lU8hKIssZDDQL0PV4++ChzLEkCJIhMoclOsOrGJeywEKgAlYzNa17DPQZBua6qCNAbEIuMuwgGVeLyBTCAf7oMEK/TMXQyUjf17SKqde7jTv7PZHNIjfSHQKB2bDlAblOjYJJn+AK49d0Hx+x4hAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"微信公众号\"\n        title=\"微信公众号\"\n        src=\"/static/82fb7f09b5f3525bf78ba1baedbf4618/4af8e/wx1.png\"\n        srcset=\"/static/82fb7f09b5f3525bf78ba1baedbf4618/5a46d/wx1.png 300w,\n/static/82fb7f09b5f3525bf78ba1baedbf4618/4af8e/wx1.png 528w\"\n        sizes=\"(max-width: 528px) 100vw, 528px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></li>\n<li>微信小程序：通过内置框架连接 Native 和 Web 端，其不同是本来由 WebView 渲染的部分由原生端接管了。所以小程序渲染可原生渲染，也可 WebView 渲染\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 504px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a1a989ca8e664297170c0c30d572627a/08115/wx2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB0UlEQVQ4y22T55LCMAyE8/5PyC9mqAkhDZxCCzp/gs2F4zyj2FZZrSwluVwuhlyvV/vvPAzDl25+v9/v9ng8fB/H0ZKmaayqKjsej74jeZ77ThCAfd+7vSiKyUf+XdcZCzCAkxCCB7DSLLWyrPx8jKDYYFGWpZHYfdLMmtPJz+fz2WP3u61l2cF1Dti2rVNumtoDYVbXtT2fT3cCFD0+sAQI3SkCwxABeIz+CUqCob/ZbGy32zkjdDiSDEGHz3K5dFDiSKLqppL5ICwAYAcz6WGlhydo6AcH3u+3L1ZvINkTBQFCKYBiEMgcGL3esyjyL0BnCIgel84hlMjbhjb8nqOQLE1TPw/DZWqaKnKGKFmUer/dnInuOFxjADsCoOZSPsQDqIoSGOBQ15WX03W9td2L1To2ydlE9oBlWWaLxcKq2LCIYrdIQHP4fCedABkZvSESzsEOh4OXzHPgg53uh9A6CKzKsoh+meXxqWDvgCyy6VfSnbNK12jILh+IhBD7ECvBdwIEXQw1RgDADj1+AtbAf5QcdUiCAkMbM2zWay9HTmrCarWy+S86ByTRR1PIjmL+V2guceAuG3f0MGWnxDng1BTNmAClm9//2iR6Y83hD4hT2eV58rUwAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"微信小程序\"\n        title=\"微信小程序\"\n        src=\"/static/a1a989ca8e664297170c0c30d572627a/08115/wx2.png\"\n        srcset=\"/static/a1a989ca8e664297170c0c30d572627a/5a46d/wx2.png 300w,\n/static/a1a989ca8e664297170c0c30d572627a/08115/wx2.png 504w\"\n        sizes=\"(max-width: 504px) 100vw, 504px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></li>\n</ul>\n<h3 id=\"核心技术之-jsbridge\" style=\"position:relative;\"><a href=\"#%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E4%B9%8B-jsbridge\" aria-label=\"核心技术之 jsbridge permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>核心技术之 JSBridge</h3>\n<ul>\n<li>实现 Native 端和 Web 端双向通信的一种机制</li>\n<li>以 JS 引擎或 WebView 容器作为媒介</li>\n<li>通过约定协议进行通信</li>\n</ul>\n<h3 id=\"主流框架\" style=\"position:relative;\"><a href=\"#%E4%B8%BB%E6%B5%81%E6%A1%86%E6%9E%B6\" aria-label=\"主流框架 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>主流框架</h3>\n<ul>\n<li>纯 Web 渲染：Cordva（前身是 PhoneGap）</li>\n<li>原生渲染：React Native，Weex</li>\n<li>混合渲染：微信小程序，比如常见的表单控件是 Web 渲染，播放视频、地图等是原生渲染</li>\n</ul>\n<h2 id=\"jsbridge-的实现原理\" style=\"position:relative;\"><a href=\"#jsbridge-%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86\" aria-label=\"jsbridge 的实现原理 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JSBridge 的实现原理</h2>\n<ul>\n<li>类比 client/server 模式，JSBridg 类似其中的 http 协议</li>\n<li>将 Native 端原生接口封装成 JS 接口</li>\n<li>将 Web 端 JS 接口封装成 Native 接口</li>\n<li>Web 端和 Native 端双向通信</li>\n</ul>\n<h2 id=\"jsbridge-的实现方式\" style=\"position:relative;\"><a href=\"#jsbridge-%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F\" aria-label=\"jsbridge 的实现方式 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JSBridge 的实现方式</h2>\n<h3 id=\"web-调用-native-的两种方式\" style=\"position:relative;\"><a href=\"#web-%E8%B0%83%E7%94%A8-native-%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F\" aria-label=\"web 调用 native 的两种方式 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Web 调用 Native 的两种方式</h3>\n<h4 id=\"1-拦截-webview-请求的-url-schema。在-web-端发送请求的时候被原生端拦截，然后-native-去解析执行对应的方法\" style=\"position:relative;\"><a href=\"#1-%E6%8B%A6%E6%88%AA-webview-%E8%AF%B7%E6%B1%82%E7%9A%84-url-schema%E3%80%82%E5%9C%A8-web-%E7%AB%AF%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82%E7%9A%84%E6%97%B6%E5%80%99%E8%A2%AB%E5%8E%9F%E7%94%9F%E7%AB%AF%E6%8B%A6%E6%88%AA%EF%BC%8C%E7%84%B6%E5%90%8E-native-%E5%8E%BB%E8%A7%A3%E6%9E%90%E6%89%A7%E8%A1%8C%E5%AF%B9%E5%BA%94%E7%9A%84%E6%96%B9%E6%B3%95\" aria-label=\"1 拦截 webview 请求的 url schema。在 web 端发送请求的时候被原生端拦截，然后 native 去解析执行对应的方法 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 拦截 WebView 请求的 URL Schema。在 Web 端发送请求的时候被原生端拦截，然后 Native 去解析执行对应的方法</h4>\n<blockquote>\n<ul>\n<li>其原理是在 Web 端发送请求的时候被原生端拦截，然后 Native 去解析执行对应的方法</li>\n<li>URL Schema 是类 URL 的一种请求格式，我们常见的 http 协议就是符合 url schama 的，其格式是<code class=\"language-text\">&lt;protocol&gt;://&lt;domain&gt;/&lt;path&gt;?&lt;query&gt;</code></li>\n<li>比如说自定义 JSBrige 通信额 URL Schema 符合<code class=\"language-text\">jsbridge://&lt;method&gt;?&lt;params&gt;</code>格式的如下<code class=\"language-text\">jsbridge://showToast?text=hello&amp;a=b</code>，其中 jsbridge 是协议，showToast 是原生方法名，text=gello&#x26;a=b 是我们要传给 showToast 方法的参数</li>\n</ul>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 681px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/667df8a4f87fefc3357658ebb0d20d3b/8ce52/urlSchema.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABG0lEQVQoz01Sia6EIAz0/7/y7SZPV7w4RfDodpqtkWREWpiZUprzPOk4Diql0LqulLftRt2r5Gqtguu6buCcnlVg3eATUyS7LNR2HX36D5lhEIQQKKVEPcde7zdtLAJRzMCTTNFADZtAjIE1PVyAEHnrLL3+XtT+t2SMoWme6YBLEP3cisN93+UQFPH/VMPaWks+eJmfA4LI4yp0FocJ5Von5alTJYaQc46890waKMYoOYW617NAg88wjOKwcmNUXa8CysE7ieec7xwEsUZ+miYqPOfMhAgGLqnjhszzIi5wX/Gn3ve9lCuls1PsX9dEiXNwCIAQObiWpuDJzHzJlstbuNvjOHCp/nZYyiZxYzjOxMiDRJ4ZCwDalC/UV23EpH+c9QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"urlSchema\"\n        title=\"urlSchema\"\n        src=\"/static/667df8a4f87fefc3357658ebb0d20d3b/8ce52/urlSchema.png\"\n        srcset=\"/static/667df8a4f87fefc3357658ebb0d20d3b/5a46d/urlSchema.png 300w,\n/static/667df8a4f87fefc3357658ebb0d20d3b/0a47e/urlSchema.png 600w,\n/static/667df8a4f87fefc3357658ebb0d20d3b/8ce52/urlSchema.png 681w\"\n        sizes=\"(max-width: 681px) 100vw, 681px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<ul>\n<li>优点：兼容性好。</li>\n<li>缺点：不直观，浏览器对 URL 的长度有限制</li>\n</ul>\n</blockquote>\n<h4 id=\"2-向-webview-注入-js-api。\" style=\"position:relative;\"><a href=\"#2-%E5%90%91-webview-%E6%B3%A8%E5%85%A5-js-api%E3%80%82\" aria-label=\"2 向 webview 注入 js api。 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 向 WebView 注入 JS API。</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 439px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8d69aba7e5c6c8097684febcf3b5edb1/e3b18/jsObject.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABMElEQVQoz3VS2W7DMAzL///ctpc23R6CNtma5Y6d++JMDTKCARNA2I0pipIarOuKbduwLAumacI4jpjmGX3foypL5HmO++Mhv2f3Xd4dj9Dcs0aw7zsY1lpB13WCpmlQOkGeX8+nnMqheFEUIs6gBiGCWjmOYyHzThzHIeTzySQ643vbtjDGiCg1vEN+pKOqqhzJ+OokKNgSxZhc17WcFNQ7+RQjL2D1RRwmSNNM3LCAzkVBwWEYfJudNWjdGBg04QXVNkU0gfNiiwoNJtEZ2yaHIJ/deUHdWu5sc4bcKpPG4Xc2rWndWy7JfdfDusKTy0nTVLi6eb8UXuiCfxVrLMIwRBRFSO4xkuQTl+sFL69vuIVXvN8+8J1l0g2L0pEuyy/Fz8jh3N5/oQI8/86Ygj8BNrnyKDOujQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"jsObject\"\n        title=\"jsObject\"\n        src=\"/static/8d69aba7e5c6c8097684febcf3b5edb1/e3b18/jsObject.png\"\n        srcset=\"/static/8d69aba7e5c6c8097684febcf3b5edb1/5a46d/jsObject.png 300w,\n/static/8d69aba7e5c6c8097684febcf3b5edb1/e3b18/jsObject.png 439w\"\n        sizes=\"(max-width: 439px) 100vw, 439px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<ul>\n<li>优点：简单直观</li>\n<li>缺点：有兼容性问题（Anddroid 4.2+）</li>\n</ul>\n</blockquote>\n<h2 id=\"带回调的-jsbridge\" style=\"position:relative;\"><a href=\"#%E5%B8%A6%E5%9B%9E%E8%B0%83%E7%9A%84-jsbridge\" aria-label=\"带回调的 jsbridge permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>带回调的 JSBridge</h2>\n<ul>\n<li>在对端执行操作并返回结果</li>\n<li>有输入有输出才是完整的调用</li>\n<li>其根本目的是实现双向通信\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 664px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dbf82573790ee618f61571f02f599676/31493/callback.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABR0lEQVQoz4VS2W6DQAzM//9V+po8NeKdQ20FYUM4lhumOyZeIaS0SNZ6jT2esfc0zzPWdYVtGiRxjCRJEEYRojBEnMT4/vlC13VYlgXM/c9O4zhCrW0t+r7392EY5E6bpknujB9BtBnPk7UWVVWhLEsH2EoRGStzsqPxP0/mE/wtQ4LUdY3HoxBAspldJxaxozYpikL+8f4n4CZ1A2IhQfYfk47S34GJ5OXFhnJYSLalG0HxLLxMxjkW+iTAGo5jPzv1BZBJWti4bW+gpTsrz1wBOUOezNnGM6NrO/RdL008IFkyQNt/ykaZNU2N2+0T5/MHLteLs6v4QRBIAw+o8xnHwT8ZbUQpZEWfCqxt3JKeuOc5sjSDMUaYe8lM5Ba5HGNy5C4hzVK3eSMAW9x42cfFqRK/FGWiQZG+uKG/3qM2Pfo898bYL7afWOR6JWJNAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"callback\"\n        title=\"callback\"\n        src=\"/static/dbf82573790ee618f61571f02f599676/31493/callback.png\"\n        srcset=\"/static/dbf82573790ee618f61571f02f599676/5a46d/callback.png 300w,\n/static/dbf82573790ee618f61571f02f599676/0a47e/callback.png 600w,\n/static/dbf82573790ee618f61571f02f599676/31493/callback.png 664w\"\n        sizes=\"(max-width: 664px) 100vw, 664px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></li>\n</ul>\n<h2 id=\"jsbridge-的开源实现\" style=\"position:relative;\"><a href=\"#jsbridge-%E7%9A%84%E5%BC%80%E6%BA%90%E5%AE%9E%E7%8E%B0\" aria-label=\"jsbridge 的开源实现 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JSBridge 的开源实现</h2>\n<ul>\n<li><a href=\"https://github.com/lzyzsd/JsBridge\">JsBridge</a>：基于 URL Schema 实现</li>\n<li><a href=\"https://github.com/wendux/DSBridge-Android\">DSBridge-Android</a>：Android 版，基于注入 JS API 实现</li>\n<li><a href=\"https://github.com/wendux/DSBridge-IOS\">DSBridge-IOS</a>：IOS 版，基于注入 JS API 实现</li>\n</ul>"},"primaryTag":{"name":"JavaScript","color":null}},"pageContext":{"postId":"b66ef05b-d527-5d8f-9cc6-f95158c3461b","primaryTag":"JavaScript"}},"staticQueryHashes":["1116962356","2275848304","3097946992","3138592700","3462520645"]}